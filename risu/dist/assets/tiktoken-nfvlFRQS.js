let E,S,W,q,M,z,T,O,j,ge=(async()=>{const I="/assets/tiktoken_bg-BVcmbAOd.wasm",R=async(e={},n)=>{let _;if(n.startsWith("data:")){const o=n.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(o,"base64");else if(typeof atob=="function"){const d=atob(o);r=new Uint8Array(d.length);for(let i=0;i<d.length;i++)r[i]=d.charCodeAt(i)}else throw new Error("Cannot decode base64-encoded data URL");_=await WebAssembly.instantiate(r,e)}else{const o=await fetch(n),r=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))_=await WebAssembly.instantiateStreaming(o,e);else{const d=await o.arrayBuffer();_=await WebAssembly.instantiate(d,e)}}return _.instance.exports};let t;W=function(e){t=e};const u=new Array(128).fill(void 0);u.push(void 0,null,!0,!1);function y(e){return u[e]}let f=u.length;function J(e){e<132||(u[e]=f,f=e)}function p(e){const n=y(e);return J(e),n}let l=0,h=null;function g(){return(h===null||h.byteLength===0)&&(h=new Uint8Array(t.memory.buffer)),h}const N=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let x=new N("utf-8");const P=typeof x.encodeInto=="function"?function(e,n){return x.encodeInto(e,n)}:function(e,n){const _=x.encode(e);return n.set(_),{read:e.length,written:_.length}};function k(e,n,_){if(_===void 0){const c=x.encode(e),b=n(c.length);return g().subarray(b,b+c.length).set(c),l=c.length,b}let o=e.length,r=n(o);const d=g();let i=0;for(;i<o;i++){const c=e.charCodeAt(i);if(c>127)break;d[r+i]=c}if(i!==o){i!==0&&(e=e.slice(i)),r=_(r,o,o=i+e.length*3);const c=g().subarray(r+i,r+o),b=P(e,c);i+=b.written}return l=i,r}function V(e){return e==null}let m=null;function s(){return(m===null||m.byteLength===0)&&(m=new Int32Array(t.memory.buffer)),m}const F=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let B=new F("utf-8",{ignoreBOM:!0,fatal:!0});B.decode();function A(e,n){return B.decode(g().subarray(e,e+n))}function w(e){f===u.length&&u.push(u.length+1);const n=f;return f=u[n],u[n]=e,n}let v=null;function L(){return(v===null||v.byteLength===0)&&(v=new Uint32Array(t.memory.buffer)),v}function U(e,n){return L().subarray(e/4,e/4+n)}function G(e,n){const _=n(e.length*1);return g().set(e,_/1),l=e.length,_}function H(e,n){const _=n(e.length*4);return L().set(e,_/4),l=e.length,_}function C(e,n){return g().subarray(e/1,e/1+n)}function D(e,n){try{return e.apply(this,n)}catch(_){t.__wbindgen_export_3(w(_))}}E=class{static __wrap(e){const n=Object.create(E.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const e=this.__destroy_into_raw();t.__wbg_tiktoken_free(e)}constructor(e,n,_){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const o=k(e,t.__wbindgen_export_0,t.__wbindgen_export_1),r=l,d=k(_,t.__wbindgen_export_0,t.__wbindgen_export_1),i=l,c=t.tiktoken_new(o,r,w(n),d,i);return E.__wrap(c)}get name(){try{const _=t.__wbindgen_add_to_stack_pointer(-16);t.tiktoken_name(_,this.ptr);var e=s()[_/4+0],n=s()[_/4+1];let o;return e!==0&&(o=A(e,n).slice(),t.__wbindgen_export_2(e,n*1)),o}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode(e,n,_){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const b=t.__wbindgen_add_to_stack_pointer(-16),ue=k(e,t.__wbindgen_export_0,t.__wbindgen_export_1),we=l;t.tiktoken_encode(b,this.ptr,ue,we,w(n),w(_));var o=s()[b/4+0],r=s()[b/4+1],d=s()[b/4+2],i=s()[b/4+3];if(i)throw p(d);var c=U(o,r).slice();return t.__wbindgen_export_2(o,r*4),c}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode_ordinary(e){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const r=t.__wbindgen_add_to_stack_pointer(-16),d=k(e,t.__wbindgen_export_0,t.__wbindgen_export_1),i=l;t.tiktoken_encode_ordinary(r,this.ptr,d,i);var n=s()[r/4+0],_=s()[r/4+1],o=U(n,_).slice();return t.__wbindgen_export_2(n,_*4),o}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode_with_unstable(e,n,_){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const i=t.__wbindgen_add_to_stack_pointer(-16),c=k(e,t.__wbindgen_export_0,t.__wbindgen_export_1),b=l;t.tiktoken_encode_with_unstable(i,this.ptr,c,b,w(n),w(_));var o=s()[i/4+0],r=s()[i/4+1],d=s()[i/4+2];if(d)throw p(r);return p(o)}finally{t.__wbindgen_add_to_stack_pointer(16)}}encode_single_token(e){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const n=G(e,t.__wbindgen_export_0),_=l;return t.tiktoken_encode_single_token(this.ptr,n,_)>>>0}decode(e){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const r=t.__wbindgen_add_to_stack_pointer(-16),d=H(e,t.__wbindgen_export_0),i=l;t.tiktoken_decode(r,this.ptr,d,i);var n=s()[r/4+0],_=s()[r/4+1],o=C(n,_).slice();return t.__wbindgen_export_2(n,_*1),o}finally{t.__wbindgen_add_to_stack_pointer(16)}}decode_single_token_bytes(e){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.tiktoken_decode_single_token_bytes(r,this.ptr,e);var n=s()[r/4+0],_=s()[r/4+1],o=C(n,_).slice();return t.__wbindgen_export_2(n,_*1),o}finally{t.__wbindgen_add_to_stack_pointer(16)}}token_byte_values(){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const e=t.tiktoken_token_byte_values(this.ptr);return p(e)}},T=function(e){p(e)},z=function(e){return y(e)===void 0},q=function(){return D(function(e){const n=JSON.stringify(y(e));return w(n)},arguments)},O=function(e,n){if(t==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const _=y(n),o=typeof _=="string"?_:void 0;var r=V(o)?0:k(o,t.__wbindgen_export_0,t.__wbindgen_export_1),d=l;s()[e/4+1]=d,s()[e/4+0]=r},M=function(e,n){const _=new Error(A(e,n));return w(_)},S=function(){return D(function(e,n){const _=JSON.parse(A(e,n));return w(_)},arguments)},j=function(e,n){throw new Error(A(e,n))},URL=globalThis.URL;const a=await R({"./tiktoken_bg.js":{__wbindgen_object_drop_ref:T,__wbindgen_is_undefined:z,__wbg_stringify_029a979dfb73aa17:q,__wbindgen_string_get:O,__wbindgen_error_new:M,__wbg_parse_3ac95b51fc312db8:S,__wbindgen_throw:j}},I),K=a.memory,Q=a.__wbg_tiktoken_free,X=a.tiktoken_new,Y=a.tiktoken_name,Z=a.tiktoken_encode,$=a.tiktoken_encode_ordinary,ee=a.tiktoken_encode_with_unstable,ne=a.tiktoken_encode_single_token,te=a.tiktoken_decode,_e=a.tiktoken_decode_single_token_bytes,re=a.tiktoken_token_byte_values,oe=a.get_encoding,ie=a.encoding_for_model,de=a.__wbindgen_export_0,ae=a.__wbindgen_export_1,se=a.__wbindgen_add_to_stack_pointer,ce=a.__wbindgen_export_2,be=a.__wbindgen_export_3,le=Object.freeze(Object.defineProperty({__proto__:null,__wbg_tiktoken_free:Q,__wbindgen_add_to_stack_pointer:se,__wbindgen_export_0:de,__wbindgen_export_1:ae,__wbindgen_export_2:ce,__wbindgen_export_3:be,encoding_for_model:ie,get_encoding:oe,memory:K,tiktoken_decode:te,tiktoken_decode_single_token_bytes:_e,tiktoken_encode:Z,tiktoken_encode_ordinary:$,tiktoken_encode_single_token:ne,tiktoken_encode_with_unstable:ee,tiktoken_name:Y,tiktoken_new:X,tiktoken_token_byte_values:re},Symbol.toStringTag,{value:"Module"}));W(le)})();export{E as Tiktoken,ge as __tla,S as __wbg_parse_3ac95b51fc312db8,W as __wbg_set_wasm,q as __wbg_stringify_029a979dfb73aa17,M as __wbindgen_error_new,z as __wbindgen_is_undefined,T as __wbindgen_object_drop_ref,O as __wbindgen_string_get,j as __wbindgen_throw};
