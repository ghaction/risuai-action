var b0={};function La(E){return new Int8Array(E)}function q0(E){return new Int16Array(E)}function F0(E){return new Int32Array(E)}function Y0(E){return new Float32Array(E)}function Ca(E){return new Float64Array(E)}function j0(E){if(E.length==1)return Y0(E[0]);var z=E[0];E=E.slice(1);for(var C=[],Q=0;Q<z;Q++)C.push(j0(E));return C}function z0(E){if(E.length==1)return F0(E[0]);var z=E[0];E=E.slice(1);for(var C=[],Q=0;Q<z;Q++)C.push(z0(E));return C}function U0(E){if(E.length==1)return q0(E[0]);var z=E[0];E=E.slice(1);for(var C=[],Q=0;Q<z;Q++)C.push(U0(E));return C}function Z0(E){if(E.length==1)return new Array(E[0]);var z=E[0];E=E.slice(1);for(var C=[],Q=0;Q<z;Q++)C.push(Z0(E));return C}var K0={};K0.fill=function(E,z,C,Q){if(arguments.length==2)for(var c1=0;c1<E.length;c1++)E[c1]=arguments[1];else for(var c1=z;c1<C;c1++)E[c1]=Q};var ze={};ze.arraycopy=function(E,z,C,Q,c1){for(var G=z+c1;z<G;)C[Q++]=E[z++]},ze.out={},ze.out.println=function(E){console.log(E)},ze.out.printf=function(){console.log.apply(console,arguments)};var Je={};Je.SQRT2=1.4142135623730951,Je.FAST_LOG10=function(E){return Math.log10(E)},Je.FAST_LOG10_X=function(E,z){return Math.log10(E)*z};function Ae(E){this.ordinal=E}Ae.short_block_allowed=new Ae(0),Ae.short_block_coupled=new Ae(1),Ae.short_block_dispensed=new Ae(2),Ae.short_block_forced=new Ae(3);var G0={};G0.MAX_VALUE=34028235e31;function ue(E){this.ordinal=E}ue.vbr_off=new ue(0),ue.vbr_mt=new ue(1),ue.vbr_rh=new ue(2),ue.vbr_abr=new ue(3),ue.vbr_mtrh=new ue(4),ue.vbr_default=ue.vbr_mtrh;var Da=function(E){},Z1={System:ze,VbrMode:ue,Float:G0,ShortBlock:Ae,Util:Je,Arrays:K0,new_array_n:Z0,new_byte:La,new_double:Ca,new_float:Y0,new_float_n:j0,new_int:F0,new_int_n:z0,new_short:q0,new_short_n:U0,assert:Da},p0,W0;function Xa(){if(W0)return p0;W0=1;var E=Z1,z=E.System,C=E.Util,Q=E.Arrays,c1=E.new_float,G=te();function K(){var q=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*C.SQRT2*.5/2384e-9,.017876148*C.SQRT2*.5/2384e-9,.003134727*C.SQRT2*.5/2384e-9,.002457142*C.SQRT2*.5/2384e-9,971317e-9*C.SQRT2*.5/2384e-9,218868e-9*C.SQRT2*.5/2384e-9,101566e-9*C.SQRT2*.5/2384e-9,13828e-9*C.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],e1=12,h1=36,g=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],m=g[G.SHORT_TYPE],V=g[G.SHORT_TYPE],s1=g[G.SHORT_TYPE],U=g[G.SHORT_TYPE],r1=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function Z(c,d,e){for(var l=10,A=d+238-14-286,x=-15;x<0;x++){var I,w,y;I=q[l+-10],w=c[A+-224]*I,y=c[d+224]*I,I=q[l+-9],w+=c[A+-160]*I,y+=c[d+160]*I,I=q[l+-8],w+=c[A+-96]*I,y+=c[d+96]*I,I=q[l+-7],w+=c[A+-32]*I,y+=c[d+32]*I,I=q[l+-6],w+=c[A+32]*I,y+=c[d+-32]*I,I=q[l+-5],w+=c[A+96]*I,y+=c[d+-96]*I,I=q[l+-4],w+=c[A+160]*I,y+=c[d+-160]*I,I=q[l+-3],w+=c[A+224]*I,y+=c[d+-224]*I,I=q[l+-2],w+=c[d+-256]*I,y-=c[A+256]*I,I=q[l+-1],w+=c[d+-192]*I,y-=c[A+192]*I,I=q[l+0],w+=c[d+-128]*I,y-=c[A+128]*I,I=q[l+1],w+=c[d+-64]*I,y-=c[A+64]*I,I=q[l+2],w+=c[d+0]*I,y-=c[A+0]*I,I=q[l+3],w+=c[d+64]*I,y-=c[A+-64]*I,I=q[l+4],w+=c[d+128]*I,y-=c[A+-128]*I,I=q[l+5],w+=c[d+192]*I,y-=c[A+-192]*I,w*=q[l+6],I=y-w,e[30+x*2]=y+w,e[31+x*2]=q[l+7]*I,l+=18,d--,A++}{var w,y,_1,b;y=c[d+-16]*q[l+-10],w=c[d+-32]*q[l+-2],y+=(c[d+-48]-c[d+16])*q[l+-9],w+=c[d+-96]*q[l+-1],y+=(c[d+-80]+c[d+48])*q[l+-8],w+=c[d+-160]*q[l+0],y+=(c[d+-112]-c[d+80])*q[l+-7],w+=c[d+-224]*q[l+1],y+=(c[d+-144]+c[d+112])*q[l+-6],w-=c[d+32]*q[l+2],y+=(c[d+-176]-c[d+144])*q[l+-5],w-=c[d+96]*q[l+3],y+=(c[d+-208]+c[d+176])*q[l+-4],w-=c[d+160]*q[l+4],y+=(c[d+-240]-c[d+208])*q[l+-3],w-=c[d+224],_1=w-y,b=w+y,y=e[14],w=e[15]-y,e[31]=b+y,e[30]=_1+w,e[15]=_1-w,e[14]=b-y}{var t;t=e[28]-e[0],e[0]+=e[28],e[28]=t*q[l+-2*18+7],t=e[29]-e[1],e[1]+=e[29],e[29]=t*q[l+-2*18+7],t=e[26]-e[2],e[2]+=e[26],e[26]=t*q[l+-4*18+7],t=e[27]-e[3],e[3]+=e[27],e[27]=t*q[l+-4*18+7],t=e[24]-e[4],e[4]+=e[24],e[24]=t*q[l+-6*18+7],t=e[25]-e[5],e[5]+=e[25],e[25]=t*q[l+-6*18+7],t=e[22]-e[6],e[6]+=e[22],e[22]=t*C.SQRT2,t=e[23]-e[7],e[7]+=e[23],e[23]=t*C.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],t=e[6],e[6]=e[31]-t,e[31]=e[31]+t,t=e[7],e[7]=e[30]-t,e[30]=e[30]+t,t=e[22],e[22]=e[15]-t,e[15]=e[15]+t,t=e[23],e[23]=e[14]-t,e[14]=e[14]+t,t=e[20]-e[8],e[8]+=e[20],e[20]=t*q[l+-10*18+7],t=e[21]-e[9],e[9]+=e[21],e[21]=t*q[l+-10*18+7],t=e[18]-e[10],e[10]+=e[18],e[18]=t*q[l+-12*18+7],t=e[19]-e[11],e[11]+=e[19],e[19]=t*q[l+-12*18+7],t=e[16]-e[12],e[12]+=e[16],e[16]=t*q[l+-14*18+7],t=e[17]-e[13],e[13]+=e[17],e[17]=t*q[l+-14*18+7],t=-e[20]+e[24],e[20]+=e[24],e[24]=t*q[l+-12*18+7],t=-e[21]+e[25],e[21]+=e[25],e[25]=t*q[l+-12*18+7],t=e[4]-e[8],e[4]+=e[8],e[8]=t*q[l+-12*18+7],t=e[5]-e[9],e[5]+=e[9],e[9]=t*q[l+-12*18+7],t=e[0]-e[12],e[0]+=e[12],e[12]=t*q[l+-4*18+7],t=e[1]-e[13],e[1]+=e[13],e[13]=t*q[l+-4*18+7],t=e[16]-e[28],e[16]+=e[28],e[28]=t*q[l+-4*18+7],t=-e[17]+e[29],e[17]+=e[29],e[29]=t*q[l+-4*18+7],t=C.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=t,t=C.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=t,t=C.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=t-e[18],t=C.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=t-e[19],t=e[2],e[19]-=e[3],e[3]-=t,e[2]=e[31]-t,e[31]+=t,t=e[3],e[11]-=e[19],e[18]-=t,e[3]=e[30]-t,e[30]+=t,t=e[18],e[27]-=e[11],e[19]-=t,e[18]=e[15]-t,e[15]+=t,t=e[19],e[10]-=t,e[19]=e[14]-t,e[14]+=t,t=e[10],e[11]-=t,e[10]=e[23]-t,e[23]+=t,t=e[11],e[26]-=t,e[11]=e[22]-t,e[22]+=t,t=e[26],e[27]-=t,e[26]=e[7]-t,e[7]+=t,t=e[27],e[27]=e[6]-t,e[6]+=t,t=C.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=t,t=C.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=t,t=C.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=t,t=C.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=t,t=-C.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=t-e[8],t=-C.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=t-e[9],t=-C.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=t-e[25],t=-C.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=t-e[24],t=e[24]-e[16],e[24]=t,t=e[20]-t,e[20]=t,t=e[28]-t,e[28]=t,t=e[25]-e[17],e[25]=t,t=e[21]-t,e[21]=t,t=e[29]-t,e[29]=t,t=e[17]-e[1],e[17]=t,t=e[9]-t,e[9]=t,t=e[25]-t,e[25]=t,t=e[5]-t,e[5]=t,t=e[21]-t,e[21]=t,t=e[13]-t,e[13]=t,t=e[29]-t,e[29]=t,t=e[1]-e[0],e[1]=t,t=e[16]-t,e[16]=t,t=e[17]-t,e[17]=t,t=e[8]-t,e[8]=t,t=e[9]-t,e[9]=t,t=e[24]-t,e[24]=t,t=e[25]-t,e[25]=t,t=e[4]-t,e[4]=t,t=e[5]-t,e[5]=t,t=e[20]-t,e[20]=t,t=e[21]-t,e[21]=t,t=e[12]-t,e[12]=t,t=e[13]-t,e[13]=t,t=e[28]-t,e[28]=t,t=e[29]-t,e[29]=t,t=e[0],e[0]+=e[31],e[31]-=t,t=e[1],e[1]+=e[30],e[30]-=t,t=e[16],e[16]+=e[15],e[15]-=t,t=e[17],e[17]+=e[14],e[14]-=t,t=e[8],e[8]+=e[23],e[23]-=t,t=e[9],e[9]+=e[22],e[22]-=t,t=e[24],e[24]+=e[7],e[7]-=t,t=e[25],e[25]+=e[6],e[6]-=t,t=e[4],e[4]+=e[27],e[27]-=t,t=e[5],e[5]+=e[26],e[26]-=t,t=e[20],e[20]+=e[11],e[11]-=t,t=e[21],e[21]+=e[10],e[10]-=t,t=e[12],e[12]+=e[19],e[19]-=t,t=e[13],e[13]+=e[18],e[18]-=t,t=e[28],e[28]+=e[3],e[3]-=t,t=e[29],e[29]+=e[2],e[2]-=t}}function S(c,d){for(var e=0;e<3;e++){var l,A,x,I,w,y;I=c[d+2*3]*g[G.SHORT_TYPE][0]-c[d+5*3],l=c[d+0*3]*g[G.SHORT_TYPE][2]-c[d+3*3],A=I+l,x=I-l,I=c[d+5*3]*g[G.SHORT_TYPE][0]+c[d+2*3],l=c[d+3*3]*g[G.SHORT_TYPE][2]+c[d+0*3],w=I+l,y=-I+l,l=(c[d+1*3]*g[G.SHORT_TYPE][1]-c[d+4*3])*2069978111953089e-26,I=(c[d+4*3]*g[G.SHORT_TYPE][1]+c[d+1*3])*2069978111953089e-26,c[d+3*0]=A*190752519173728e-25+l,c[d+3*5]=-w*190752519173728e-25+I,x=x*.8660254037844387*1907525191737281e-26,w=w*.5*1907525191737281e-26+I,c[d+3*1]=x-w,c[d+3*2]=x+w,A=A*.5*1907525191737281e-26-l,y=y*.8660254037844387*1907525191737281e-26,c[d+3*3]=A+y,c[d+3*4]=A-y,d++}}function f(c,d,e){var l,A;{var x,I,w,y,_1,b,t,v;x=e[17]-e[9],w=e[15]-e[11],y=e[14]-e[12],_1=e[0]+e[8],b=e[1]+e[7],t=e[2]+e[6],v=e[3]+e[5],c[d+17]=_1+t-v-(b-e[4]),A=(_1+t-v)*V[19]+(b-e[4]),l=(x-w-y)*V[18],c[d+5]=l+A,c[d+6]=l-A,I=(e[16]-e[10])*V[18],b=b*V[19]+e[4],l=x*V[12]+I+w*V[13]+y*V[14],A=-_1*V[16]+b-t*V[17]+v*V[15],c[d+1]=l+A,c[d+2]=l-A,l=x*V[13]-I-w*V[14]+y*V[12],A=-_1*V[17]+b-t*V[15]+v*V[16],c[d+9]=l+A,c[d+10]=l-A,l=x*V[14]-I+w*V[12]-y*V[13],A=_1*V[15]-b+t*V[16]-v*V[17],c[d+13]=l+A,c[d+14]=l-A}{var T,P,H,Y,B,n,s,a;T=e[8]-e[0],H=e[6]-e[2],Y=e[5]-e[3],B=e[17]+e[9],n=e[16]+e[10],s=e[15]+e[11],a=e[14]+e[12],c[d+0]=B+s+a+(n+e[13]),l=(B+s+a)*V[19]-(n+e[13]),A=(T-H+Y)*V[18],c[d+11]=l+A,c[d+12]=l-A,P=(e[7]-e[1])*V[18],n=e[13]-n*V[19],l=B*V[15]-n+s*V[16]+a*V[17],A=T*V[14]+P+H*V[12]+Y*V[13],c[d+3]=l+A,c[d+4]=l-A,l=-B*V[17]+n-s*V[15]-a*V[16],A=T*V[13]+P-H*V[14]-Y*V[12],c[d+7]=l+A,c[d+8]=l-A,l=-B*V[16]+n-s*V[17]-a*V[15],A=T*V[12]-P+H*V[13]-Y*V[14],c[d+15]=l+A,c[d+16]=l-A}}this.mdct_sub48=function(c,d,e){for(var l=d,A=286,x=0;x<c.channels_out;x++){for(var I=0;I<c.mode_gr;I++){for(var w,y=c.l3_side.tt[I][x],_1=y.xr,b=0,t=c.sb_sample[x][1-I],v=0,T=0;T<18/2;T++)for(Z(l,A,t[v]),Z(l,A+32,t[v+1]),v+=2,A+=64,w=1;w<32;w+=2)t[v-1][w]*=-1;for(w=0;w<32;w++,b+=18){var P=y.block_type,H=c.sb_sample[x][I],Y=c.sb_sample[x][1-I];if(y.mixed_block_flag!=0&&w<2&&(P=0),c.amp_filter[w]<1e-12)Q.fill(_1,b+0,b+18,0);else{if(c.amp_filter[w]<1)for(var T=0;T<18;T++)Y[T][r1[w]]*=c.amp_filter[w];if(P==G.SHORT_TYPE){for(var T=-e1/4;T<0;T++){var B=g[G.SHORT_TYPE][T+3];_1[b+T*3+9]=H[9+T][r1[w]]*B-H[8-T][r1[w]],_1[b+T*3+18]=H[14-T][r1[w]]*B+H[15+T][r1[w]],_1[b+T*3+10]=H[15+T][r1[w]]*B-H[14-T][r1[w]],_1[b+T*3+19]=Y[2-T][r1[w]]*B+Y[3+T][r1[w]],_1[b+T*3+11]=Y[3+T][r1[w]]*B-Y[2-T][r1[w]],_1[b+T*3+20]=Y[8-T][r1[w]]*B+Y[9+T][r1[w]]}S(_1,b)}else{for(var n=c1(18),T=-h1/4;T<0;T++){var s,a;s=g[P][T+27]*Y[T+9][r1[w]]+g[P][T+36]*Y[8-T][r1[w]],a=g[P][T+9]*H[T+9][r1[w]]-g[P][T+18]*H[8-T][r1[w]],n[T+9]=s-a*m[3+T+9],n[T+18]=s*m[3+T+9]+a}f(_1,b,n)}}if(P!=G.SHORT_TYPE&&w!=0)for(var T=7;T>=0;--T){var _,h;_=_1[b+T]*s1[20+T]+_1[b+-1-T]*U[28+T],h=_1[b+T]*U[28+T]-_1[b+-1-T]*s1[20+T],_1[b+-1-T]=_,_1[b+T]=h}}}if(l=e,A=286,c.mode_gr==1)for(var D=0;D<18;D++)z.arraycopy(c.sb_sample[x][1][D],0,c.sb_sample[x][0][D],0,32)}}}return p0=K,p0}var v0,Q0;function J0(){if(Q0)return v0;Q0=1;var E=te(),z=Z1,C=z.System,Q=z.new_float,c1=z.new_float_n;function G(){this.l=Q(E.SBMAX_l),this.s=c1([E.SBMAX_s,3]);var K=this;this.assign=function(q){C.arraycopy(q.l,0,K.l,0,E.SBMAX_l);for(var e1=0;e1<E.SBMAX_s;e1++)for(var h1=0;h1<3;h1++)K.s[e1][h1]=q.s[e1][h1]}}return v0=G,v0}var d0,$0;function qa(){if($0)return d0;$0=1;var E=J0();function z(){this.thm=new E,this.en=new E}return d0=z,d0}function ve(E){var z=E;this.ordinal=function(){return z}}ve.STEREO=new ve(0),ve.JOINT_STEREO=new ve(1),ve.DUAL_CHANNEL=new ve(2),ve.MONO=new ve(3),ve.NOT_SET=new ve(4);var Ue=ve,g0,ea;function te(){if(ea)return g0;ea=1;var E=Z1,z=E.System,C=E.VbrMode,Q=E.new_array_n,c1=E.new_float,G=E.new_float_n,K=E.new_int,q=E.assert;e1.ENCDELAY=576,e1.POSTDELAY=1152,e1.MDCTDELAY=48,e1.FFTOFFSET=224+e1.MDCTDELAY,e1.DECDELAY=528,e1.SBLIMIT=32,e1.CBANDS=64,e1.SBPSY_l=21,e1.SBPSY_s=12,e1.SBMAX_l=22,e1.SBMAX_s=13,e1.PSFB21=6,e1.PSFB12=6,e1.BLKSIZE=1024,e1.HBLKSIZE=e1.BLKSIZE/2+1,e1.BLKSIZE_s=256,e1.HBLKSIZE_s=e1.BLKSIZE_s/2+1,e1.NORM_TYPE=0,e1.START_TYPE=1,e1.SHORT_TYPE=2,e1.STOP_TYPE=3,e1.MPG_MD_LR_LR=0,e1.MPG_MD_LR_I=1,e1.MPG_MD_MS_LR=2,e1.MPG_MD_MS_I=3,e1.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function e1(){var h1=Xa(),g=qa(),m=Ue,V=e1.FFTOFFSET,s1=e1.MPG_MD_MS_LR,U=null;this.psy=null;var r1=null,Z=null,S=null;this.setModules=function(l,A,x,I){U=l,this.psy=A,r1=A,Z=I,S=x};var f=new h1;function c(l){var A,x;if(l.ATH.useAdjust==0){l.ATH.adjust=1;return}if(x=l.loudness_sq[0][0],A=l.loudness_sq[1][0],l.channels_out==2?(x+=l.loudness_sq[0][1],A+=l.loudness_sq[1][1]):(x+=x,A+=A),l.mode_gr==2&&(x=Math.max(x,A)),x*=.5,x*=l.ATH.aaSensitivityP,x>.03125)l.ATH.adjust>=1?l.ATH.adjust=1:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=1;else{var I=31.98*x+625e-6;l.ATH.adjust>=I?(l.ATH.adjust*=I*.075+.925,l.ATH.adjust<I&&(l.ATH.adjust=I)):l.ATH.adjustLimit>=I?l.ATH.adjust=I:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=I}}function d(l){var A,x;for(q(0<=l.bitrate_index&&l.bitrate_index<16),q(0<=l.mode_ext&&l.mode_ext<4),l.bitrate_stereoMode_Hist[l.bitrate_index][4]++,l.bitrate_stereoMode_Hist[15][4]++,l.channels_out==2&&(l.bitrate_stereoMode_Hist[l.bitrate_index][l.mode_ext]++,l.bitrate_stereoMode_Hist[15][l.mode_ext]++),A=0;A<l.mode_gr;++A)for(x=0;x<l.channels_out;++x){var I=l.l3_side.tt[A][x].block_type|0;l.l3_side.tt[A][x].mixed_block_flag!=0&&(I=4),l.bitrate_blockType_Hist[l.bitrate_index][I]++,l.bitrate_blockType_Hist[l.bitrate_index][5]++,l.bitrate_blockType_Hist[15][I]++,l.bitrate_blockType_Hist[15][5]++}}function e(l,A){var x=l.internal_flags,I,w;if(x.lame_encode_frame_init==0){var y,_1,b=c1(2014),t=c1(2014);for(x.lame_encode_frame_init=1,y=0,_1=0;y<286+576*(1+x.mode_gr);++y)y<576*x.mode_gr?(b[y]=0,x.channels_out==2&&(t[y]=0)):(b[y]=A[0][_1],x.channels_out==2&&(t[y]=A[1][_1]),++_1);for(w=0;w<x.mode_gr;w++)for(I=0;I<x.channels_out;I++)x.l3_side.tt[w][I].block_type=e1.SHORT_TYPE;f.mdct_sub48(x,b,t),q(576>=e1.FFTOFFSET),q(x.mf_size>=e1.BLKSIZE+l.framesize-e1.FFTOFFSET),q(x.mf_size>=512+l.framesize-32)}}this.lame_encode_mp3_frame=function(l,A,x,I,w,y){var _1,b=Q([2,2]);b[0][0]=new g,b[0][1]=new g,b[1][0]=new g,b[1][1]=new g;var t=Q([2,2]);t[0][0]=new g,t[0][1]=new g,t[1][0]=new g,t[1][1]=new g;var v,T=[null,null],P=l.internal_flags,H=G([2,4]),Y=[.5,.5],B=[[0,0],[0,0]],n=[[0,0],[0,0]],s,a,_;if(T[0]=A,T[1]=x,P.lame_encode_frame_init==0&&e(l,T),P.padding=0,(P.slot_lag-=P.frac_SpF)<0&&(P.slot_lag+=l.out_samplerate,P.padding=1),P.psymodel!=0){var h,D=[null,null],J=0,M=K(2);for(_=0;_<P.mode_gr;_++){for(a=0;a<P.channels_out;a++)D[a]=T[a],J=576+_*576-e1.FFTOFFSET;if(l.VBR==C.vbr_mtrh||l.VBR==C.vbr_mt?h=r1.L3psycho_anal_vbr(l,D,J,_,b,t,B[_],n[_],H[_],M):h=r1.L3psycho_anal_ns(l,D,J,_,b,t,B[_],n[_],H[_],M),h!=0)return-4;for(l.mode==m.JOINT_STEREO&&(Y[_]=H[_][2]+H[_][3],Y[_]>0&&(Y[_]=H[_][3]/Y[_])),a=0;a<P.channels_out;a++){var X=P.l3_side.tt[_][a];X.block_type=M[a],X.mixed_block_flag=0}}}else for(_=0;_<P.mode_gr;_++)for(a=0;a<P.channels_out;a++)P.l3_side.tt[_][a].block_type=e1.NORM_TYPE,P.l3_side.tt[_][a].mixed_block_flag=0,n[_][a]=B[_][a]=700;if(c(P),f.mdct_sub48(P,T[0],T[1]),P.mode_ext=e1.MPG_MD_LR_LR,l.force_ms)P.mode_ext=e1.MPG_MD_MS_LR;else if(l.mode==m.JOINT_STEREO){var n1=0,u1=0;for(_=0;_<P.mode_gr;_++)for(a=0;a<P.channels_out;a++)n1+=n[_][a],u1+=B[_][a];if(n1<=1*u1){var d1=P.l3_side.tt[0],A1=P.l3_side.tt[P.mode_gr-1];d1[0].block_type==d1[1].block_type&&A1[0].block_type==A1[1].block_type&&(P.mode_ext=e1.MPG_MD_MS_LR)}}if(P.mode_ext==s1?(v=t,s=n):(v=b,s=B),l.analysis&&P.pinfo!=null)for(_=0;_<P.mode_gr;_++)for(a=0;a<P.channels_out;a++)P.pinfo.ms_ratio[_]=P.ms_ratio[_],P.pinfo.ms_ener_ratio[_]=Y[_],P.pinfo.blocktype[_][a]=P.l3_side.tt[_][a].block_type,P.pinfo.pe[_][a]=s[_][a],z.arraycopy(P.l3_side.tt[_][a].xr,0,P.pinfo.xr[_][a],0,576),P.mode_ext==s1&&(P.pinfo.ers[_][a]=P.pinfo.ers[_][a+2],z.arraycopy(P.pinfo.energy[_][a+2],0,P.pinfo.energy[_][a],0,P.pinfo.energy[_][a].length));if(l.VBR==C.vbr_off||l.VBR==C.vbr_abr){var g1,S1;for(g1=0;g1<18;g1++)P.nsPsy.pefirbuf[g1]=P.nsPsy.pefirbuf[g1+1];for(S1=0,_=0;_<P.mode_gr;_++)for(a=0;a<P.channels_out;a++)S1+=s[_][a];for(P.nsPsy.pefirbuf[18]=S1,S1=P.nsPsy.pefirbuf[9],g1=0;g1<9;g1++)S1+=(P.nsPsy.pefirbuf[g1]+P.nsPsy.pefirbuf[18-g1])*e1.fircoef[g1];for(S1=670*5*P.mode_gr*P.channels_out/S1,_=0;_<P.mode_gr;_++)for(a=0;a<P.channels_out;a++)s[_][a]*=S1}if(P.iteration_loop.iteration_loop(l,s,Y,v),U.format_bitstream(l),_1=U.copy_buffer(P,I,w,y,1),l.bWriteVbrTag&&Z.addVbrFrame(l),l.analysis&&P.pinfo!=null){for(a=0;a<P.channels_out;a++){var k1;for(k1=0;k1<V;k1++)P.pinfo.pcmdata[a][k1]=P.pinfo.pcmdata[a][k1+l.framesize];for(k1=V;k1<1600;k1++)P.pinfo.pcmdata[a][k1]=T[a][k1-V]}S.set_frame_pinfo(l,v)}return d(P),_1}}return g0=e1,g0}var aa=Z1,ta=aa.Util,ra=aa.new_float,J1=te();function Fa(){var E=ra(J1.BLKSIZE),z=ra(J1.BLKSIZE_s/2),C=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function Q(G,K,q){var e1=0,h1,g,m;q<<=1;var V=K+q;h1=4;do{var s1,U,r1,Z,S,f,c;c=h1>>1,Z=h1,S=h1<<1,f=S+Z,h1=S<<1,g=K,m=g+c;do{var d,e,l,A;e=G[g+0]-G[g+Z],d=G[g+0]+G[g+Z],A=G[g+S]-G[g+f],l=G[g+S]+G[g+f],G[g+S]=d-l,G[g+0]=d+l,G[g+f]=e-A,G[g+Z]=e+A,e=G[m+0]-G[m+Z],d=G[m+0]+G[m+Z],A=ta.SQRT2*G[m+f],l=ta.SQRT2*G[m+S],G[m+S]=d-l,G[m+0]=d+l,G[m+f]=e-A,G[m+Z]=e+A,m+=h1,g+=h1}while(g<V);for(U=C[e1+0],s1=C[e1+1],r1=1;r1<c;r1++){var x,I;x=1-2*s1*s1,I=2*s1*U,g=K+r1,m=K+Z-r1;do{var w,y,_1,d,e,b,l,t,A,v;y=I*G[g+Z]-x*G[m+Z],w=x*G[g+Z]+I*G[m+Z],e=G[g+0]-w,d=G[g+0]+w,b=G[m+0]-y,_1=G[m+0]+y,y=I*G[g+f]-x*G[m+f],w=x*G[g+f]+I*G[m+f],A=G[g+S]-w,l=G[g+S]+w,v=G[m+S]-y,t=G[m+S]+y,y=s1*l-U*v,w=U*l+s1*v,G[g+S]=d-w,G[g+0]=d+w,G[m+f]=b-y,G[m+Z]=b+y,y=U*t-s1*A,w=s1*t+U*A,G[m+S]=_1-w,G[m+0]=_1+w,G[g+f]=e-y,G[g+Z]=e+y,m+=h1,g+=h1}while(g<V);x=U,U=x*C[e1+0]-s1*C[e1+1],s1=x*C[e1+1]+s1*C[e1+0]}e1+=2}while(h1<q)}var c1=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(G,K,q,e1,h1){for(var g=0;g<3;g++){var m=J1.BLKSIZE_s/2,V=65535&576/3*(g+1),s1=J1.BLKSIZE_s/8-1;do{var U,r1,Z,S,f,c=c1[s1<<2]&255;U=z[c]*e1[q][h1+c+V],f=z[127-c]*e1[q][h1+c+V+128],r1=U-f,U=U+f,Z=z[c+64]*e1[q][h1+c+V+64],f=z[63-c]*e1[q][h1+c+V+192],S=Z-f,Z=Z+f,m-=4,K[g][m+0]=U+Z,K[g][m+2]=U-Z,K[g][m+1]=r1+S,K[g][m+3]=r1-S,U=z[c+1]*e1[q][h1+c+V+1],f=z[126-c]*e1[q][h1+c+V+129],r1=U-f,U=U+f,Z=z[c+65]*e1[q][h1+c+V+65],f=z[62-c]*e1[q][h1+c+V+193],S=Z-f,Z=Z+f,K[g][m+J1.BLKSIZE_s/2+0]=U+Z,K[g][m+J1.BLKSIZE_s/2+2]=U-Z,K[g][m+J1.BLKSIZE_s/2+1]=r1+S,K[g][m+J1.BLKSIZE_s/2+3]=r1-S}while(--s1>=0);Q(K[g],m,J1.BLKSIZE_s/2)}},this.fft_long=function(G,K,q,e1,h1){var g=J1.BLKSIZE/8-1,m=J1.BLKSIZE/2;do{var V,s1,U,r1,Z,S=c1[g]&255;V=E[S]*e1[q][h1+S],Z=E[S+512]*e1[q][h1+S+512],s1=V-Z,V=V+Z,U=E[S+256]*e1[q][h1+S+256],Z=E[S+768]*e1[q][h1+S+768],r1=U-Z,U=U+Z,m-=4,K[m+0]=V+U,K[m+2]=V-U,K[m+1]=s1+r1,K[m+3]=s1-r1,V=E[S+1]*e1[q][h1+S+1],Z=E[S+513]*e1[q][h1+S+513],s1=V-Z,V=V+Z,U=E[S+257]*e1[q][h1+S+257],Z=E[S+769]*e1[q][h1+S+769],r1=U-Z,U=U+Z,K[m+J1.BLKSIZE/2+0]=V+U,K[m+J1.BLKSIZE/2+2]=V-U,K[m+J1.BLKSIZE/2+1]=s1+r1,K[m+J1.BLKSIZE/2+3]=s1-r1}while(--g>=0);Q(K,m,J1.BLKSIZE/2)},this.init_fft=function(G){for(var K=0;K<J1.BLKSIZE;K++)E[K]=.42-.5*Math.cos(2*Math.PI*(K+.5)/J1.BLKSIZE)+.08*Math.cos(4*Math.PI*(K+.5)/J1.BLKSIZE);for(var K=0;K<J1.BLKSIZE_s/2;K++)z[K]=.5*(1-Math.cos(2*Math.PI*(K+.5)/J1.BLKSIZE_s))}}var Ya=Fa,Be=Z1,Ie=Be.VbrMode,sa=Be.Float,Ne=Be.ShortBlock,ne=Be.Util,ja=Be.Arrays,$1=Be.new_float,he=Be.new_float_n,ye=Be.new_int,V1=Be.assert,za=Ya,t1=te();function Ua(){var E=Ue,z=new za,C=2.302585092994046,Q=2,c1=16,G=2,K=16,q=.34,e1=1/(14752*14752)/(t1.BLKSIZE/2),h1=.01,g=.8,m=.6,V=.3,s1=3.5,U=21,r1=.2302585093;function Z(o,u){for(var R=0,k=0;k<t1.BLKSIZE/2;++k)R+=o[k]*u.ATH.eql_w[k];return R*=e1,R}function S(o,u,R,k,N,p,L,F,O,a1,j){var $=o.internal_flags;if(O<2)z.fft_long($,k[N],O,a1,j),z.fft_short($,p[L],O,a1,j);else if(O==2){for(var m1=t1.BLKSIZE-1;m1>=0;--m1){var T1=k[N+0][m1],i1=k[N+1][m1];k[N+0][m1]=(T1+i1)*ne.SQRT2*.5,k[N+1][m1]=(T1-i1)*ne.SQRT2*.5}for(var x1=2;x1>=0;--x1)for(var m1=t1.BLKSIZE_s-1;m1>=0;--m1){var T1=p[L+0][x1][m1],i1=p[L+1][x1][m1];p[L+0][x1][m1]=(T1+i1)*ne.SQRT2*.5,p[L+1][x1][m1]=(T1-i1)*ne.SQRT2*.5}}u[0]=k[N+0][0],u[0]*=u[0];for(var m1=t1.BLKSIZE/2-1;m1>=0;--m1){var W=k[N+0][t1.BLKSIZE/2-m1],R1=k[N+0][t1.BLKSIZE/2+m1];u[t1.BLKSIZE/2-m1]=(W*W+R1*R1)*.5}for(var x1=2;x1>=0;--x1){R[x1][0]=p[L+0][x1][0],R[x1][0]*=R[x1][0];for(var m1=t1.BLKSIZE_s/2-1;m1>=0;--m1){var W=p[L+0][x1][t1.BLKSIZE_s/2-m1],R1=p[L+0][x1][t1.BLKSIZE_s/2+m1];R[x1][t1.BLKSIZE_s/2-m1]=(W*W+R1*R1)*.5}}{for(var L1=0,m1=11;m1<t1.HBLKSIZE;m1++)L1+=u[m1];$.tot_ener[O]=L1}if(o.analysis){for(var m1=0;m1<t1.HBLKSIZE;m1++)$.pinfo.energy[F][O][m1]=$.pinfo.energy_save[O][m1],$.pinfo.energy_save[O][m1]=u[m1];$.pinfo.pe[F][O]=$.pe[O]}o.athaa_loudapprox==2&&O<2&&($.loudness_sq[F][O]=$.loudness_sq_save[O],$.loudness_sq_save[O]=Z(u,$))}var f=8,c=23,d=15,e,l,A,x=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function I(){e=Math.pow(10,(f+1)/16),l=Math.pow(10,(c+1)/16),A=Math.pow(10,d/10)}var w=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],y=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],_1=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function b(o,u,R,k,N,p){var L;if(u>o)if(u<o*l)L=u/o;else return o+u;else{if(o>=u*l)return o+u;L=o/u}if(o+=u,k+3<=6){if(L>=e)return o;var F=0|ne.FAST_LOG10_X(L,16);return o*y[F]}var F=0|ne.FAST_LOG10_X(L,16);if(u=N.ATH.cb_l[R]*N.ATH.adjust,o<A*u){if(o>u){var O,a1;return O=1,F<=13&&(O=_1[F]),a1=ne.FAST_LOG10_X(o/u,10/15),o*((w[F]-O)*a1+O)}return F>13?o:o*_1[F]}return o*w[F]}var t=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function v(o,u,R){var k;if(o<0&&(o=0),u<0&&(u=0),o<=0)return u;if(u<=0)return o;if(u>o?k=u/o:k=o/u,-2<=R&&R<=2){if(k>=e)return o+u;var N=0|ne.FAST_LOG10_X(k,16);return(o+u)*t[N]}return k<l?o+u:(o<u&&(o=u),o)}function T(o,u){var R=o.internal_flags;if(R.channels_out>1){for(var k=0;k<t1.SBMAX_l;k++){var N=R.thm[0].l[k],p=R.thm[1].l[k];R.thm[0].l[k]+=p*u,R.thm[1].l[k]+=N*u}for(var k=0;k<t1.SBMAX_s;k++)for(var L=0;L<3;L++){var N=R.thm[0].s[k][L],p=R.thm[1].s[k][L];R.thm[0].s[k][L]+=p*u,R.thm[1].s[k][L]+=N*u}}}function P(o){for(var u=0;u<t1.SBMAX_l;u++)if(!(o.thm[0].l[u]>1.58*o.thm[1].l[u]||o.thm[1].l[u]>1.58*o.thm[0].l[u])){var R=o.mld_l[u]*o.en[3].l[u],k=Math.max(o.thm[2].l[u],Math.min(o.thm[3].l[u],R));R=o.mld_l[u]*o.en[2].l[u];var N=Math.max(o.thm[3].l[u],Math.min(o.thm[2].l[u],R));o.thm[2].l[u]=k,o.thm[3].l[u]=N}for(var u=0;u<t1.SBMAX_s;u++)for(var p=0;p<3;p++)if(!(o.thm[0].s[u][p]>1.58*o.thm[1].s[u][p]||o.thm[1].s[u][p]>1.58*o.thm[0].s[u][p])){var R=o.mld_s[u]*o.en[3].s[u][p],k=Math.max(o.thm[2].s[u][p],Math.min(o.thm[3].s[u][p],R));R=o.mld_s[u]*o.en[2].s[u][p];var N=Math.max(o.thm[3].s[u][p],Math.min(o.thm[2].s[u][p],R));o.thm[2].s[u][p]=k,o.thm[3].s[u][p]=N}}function H(o,u,R){var k=u,N=Math.pow(10,R);u*=2,k*=2;for(var p=0;p<t1.SBMAX_l;p++){var L,F,O,a1;if(a1=o.ATH.cb_l[o.bm_l[p]]*N,L=Math.min(Math.max(o.thm[0].l[p],a1),Math.max(o.thm[1].l[p],a1)),F=Math.max(o.thm[2].l[p],a1),O=Math.max(o.thm[3].l[p],a1),L*u<F+O){var j=L*k/(F+O);F*=j,O*=j}o.thm[2].l[p]=Math.min(F,o.thm[2].l[p]),o.thm[3].l[p]=Math.min(O,o.thm[3].l[p])}N*=t1.BLKSIZE_s/t1.BLKSIZE;for(var p=0;p<t1.SBMAX_s;p++)for(var $=0;$<3;$++){var L,F,O,a1;if(a1=o.ATH.cb_s[o.bm_s[p]]*N,L=Math.min(Math.max(o.thm[0].s[p][$],a1),Math.max(o.thm[1].s[p][$],a1)),F=Math.max(o.thm[2].s[p][$],a1),O=Math.max(o.thm[3].s[p][$],a1),L*u<F+O){var j=L*u/(F+O);F*=j,O*=j}o.thm[2].s[p][$]=Math.min(o.thm[2].s[p][$],F),o.thm[3].s[p][$]=Math.min(o.thm[3].s[p][$],O)}}function Y(o,u,R,k,N){var p,L,F=0,O=0;for(p=L=0;p<t1.SBMAX_s;++L,++p){for(var a1=o.bo_s[p],j=o.npart_s,$=a1<j?a1:j;L<$;)V1(u[L]>=0),V1(R[L]>=0),F+=u[L],O+=R[L],L++;if(o.en[k].s[p][N]=F,o.thm[k].s[p][N]=O,L>=j){++p;break}V1(u[L]>=0),V1(R[L]>=0);{var m1=o.PSY.bo_s_weight[p],T1=1-m1;F=m1*u[L],O=m1*R[L],o.en[k].s[p][N]+=F,o.thm[k].s[p][N]+=O,F=T1*u[L],O=T1*R[L]}}for(;p<t1.SBMAX_s;++p)o.en[k].s[p][N]=0,o.thm[k].s[p][N]=0}function B(o,u,R,k){var N,p,L=0,F=0;for(N=p=0;N<t1.SBMAX_l;++p,++N){for(var O=o.bo_l[N],a1=o.npart_l,j=O<a1?O:a1;p<j;)V1(u[p]>=0),V1(R[p]>=0),L+=u[p],F+=R[p],p++;if(o.en[k].l[N]=L,o.thm[k].l[N]=F,p>=a1){++N;break}V1(u[p]>=0),V1(R[p]>=0);{var $=o.PSY.bo_l_weight[N],m1=1-$;L=$*u[p],F=$*R[p],o.en[k].l[N]+=L,o.thm[k].l[N]+=F,L=m1*u[p],F=m1*R[p]}}for(;N<t1.SBMAX_l;++N)o.en[k].l[N]=0,o.thm[k].l[N]=0}function n(o,u,R,k,N,p){var L=o.internal_flags,F,O;for(O=F=0;O<L.npart_s;++O){for(var a1=0,j=L.numlines_s[O],$=0;$<j;++$,++F){var m1=u[p][F];a1+=m1}R[O]=a1}for(V1(O==L.npart_s),F=O=0;O<L.npart_s;O++){var T1=L.s3ind_s[O][0],i1=L.s3_ss[F++]*R[T1];for(++T1;T1<=L.s3ind_s[O][1];)i1+=L.s3_ss[F]*R[T1],++F,++T1;{var x1=G*L.nb_s1[N][O];k[O]=Math.min(i1,x1)}if(L.blocktype_old[N&1]==t1.SHORT_TYPE){var x1=K*L.nb_s2[N][O],W=k[O];k[O]=Math.min(x1,W)}L.nb_s2[N][O]=L.nb_s1[N][O],L.nb_s1[N][O]=i1,V1(k[O]>=0)}for(;O<=t1.CBANDS;++O)R[O]=0,k[O]=0}function s(o,u,R,k){var N=o.internal_flags;o.short_blocks==Ne.short_block_coupled&&!(u[0]!=0&&u[1]!=0)&&(u[0]=u[1]=0);for(var p=0;p<N.channels_out;p++)k[p]=t1.NORM_TYPE,o.short_blocks==Ne.short_block_dispensed&&(u[p]=1),o.short_blocks==Ne.short_block_forced&&(u[p]=0),u[p]!=0?(V1(N.blocktype_old[p]!=t1.START_TYPE),N.blocktype_old[p]==t1.SHORT_TYPE&&(k[p]=t1.STOP_TYPE)):(k[p]=t1.SHORT_TYPE,N.blocktype_old[p]==t1.NORM_TYPE&&(N.blocktype_old[p]=t1.START_TYPE),N.blocktype_old[p]==t1.STOP_TYPE&&(N.blocktype_old[p]=t1.SHORT_TYPE)),R[p]=N.blocktype_old[p],N.blocktype_old[p]=k[p]}function a(o,u,R){return R>=1?o:R<=0?u:u>0?Math.pow(o/u,R)*u:0}var _=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function h(o,u){for(var R=309.07,k=0;k<t1.SBMAX_s-1;k++)for(var N=0;N<3;N++){var p=o.thm.s[k][N];if(p>0){var L=p*u,F=o.en.s[k][N];F>L&&(F>L*1e10?R+=_[k]*(10*C):R+=_[k]*ne.FAST_LOG10(F/L))}}return R}var D=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function J(o,u){for(var R=281.0575,k=0;k<t1.SBMAX_l-1;k++){var N=o.thm.l[k];if(N>0){var p=N*u,L=o.en.l[k];L>p&&(L>p*1e10?R+=D[k]*(10*C):R+=D[k]*ne.FAST_LOG10(L/p))}}return R}function M(o,u,R,k,N){var p,L;for(p=L=0;p<o.npart_l;++p){var F=0,O=0,a1;for(a1=0;a1<o.numlines_l[p];++a1,++L){var j=u[L];F+=j,O<j&&(O=j)}R[p]=F,k[p]=O,N[p]=F*o.rnumlines_l[p],V1(o.rnumlines_l[p]>=0),V1(R[p]>=0),V1(k[p]>=0),V1(N[p]>=0)}}function X(o,u,R,k){var N=x.length-1,p=0,L=R[p]+R[p+1];if(L>0){var F=u[p];F<u[p+1]&&(F=u[p+1]),V1(o.numlines_l[p]+o.numlines_l[p+1]-1>0),L=20*(F*2-L)/(L*(o.numlines_l[p]+o.numlines_l[p+1]-1));var O=0|L;O>N&&(O=N),k[p]=O}else k[p]=0;for(p=1;p<o.npart_l-1;p++)if(L=R[p-1]+R[p]+R[p+1],L>0){var F=u[p-1];F<u[p]&&(F=u[p]),F<u[p+1]&&(F=u[p+1]),V1(o.numlines_l[p-1]+o.numlines_l[p]+o.numlines_l[p+1]-1>0),L=20*(F*3-L)/(L*(o.numlines_l[p-1]+o.numlines_l[p]+o.numlines_l[p+1]-1));var O=0|L;O>N&&(O=N),k[p]=O}else k[p]=0;if(V1(p==o.npart_l-1),L=R[p-1]+R[p],L>0){var F=u[p-1];F<u[p]&&(F=u[p]),V1(o.numlines_l[p-1]+o.numlines_l[p]-1>0),L=20*(F*2-L)/(L*(o.numlines_l[p-1]+o.numlines_l[p]-1));var O=0|L;O>N&&(O=N),k[p]=O}else k[p]=0;V1(p==o.npart_l-1)}var n1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(o,u,R,k,N,p,L,F,O,a1){var j=o.internal_flags,$=he([2,t1.BLKSIZE]),m1=he([2,3,t1.BLKSIZE_s]),T1=$1(t1.CBANDS+1),i1=$1(t1.CBANDS+1),x1=$1(t1.CBANDS+2),W=ye(2),R1=ye(2),L1,o1,w1,l1,P1,Y1,p1,N1,C1=he([2,576]),j1,oe=ye(t1.CBANDS+2),Q1=ye(t1.CBANDS+2);for(ja.fill(Q1,0),L1=j.channels_out,o.mode==E.JOINT_STEREO&&(L1=4),o.VBR==Ie.vbr_off?j1=j.ResvMax==0?0:j.ResvSize/j.ResvMax*.5:o.VBR==Ie.vbr_rh||o.VBR==Ie.vbr_mtrh||o.VBR==Ie.vbr_mt?j1=.6:j1=1,o1=0;o1<j.channels_out;o1++){var z1=u[o1],re=R+576-350-U+192;for(l1=0;l1<576;l1++){var le,fe;for(le=z1[re+l1+10],fe=0,P1=0;P1<(U-1)/2-1;P1+=2)le+=n1[P1]*(z1[re+l1+P1]+z1[re+l1+U-P1]),fe+=n1[P1+1]*(z1[re+l1+P1+1]+z1[re+l1+U-P1-1]);C1[o1][l1]=le+fe}N[k][o1].en.assign(j.en[o1]),N[k][o1].thm.assign(j.thm[o1]),L1>2&&(p[k][o1].en.assign(j.en[o1+2]),p[k][o1].thm.assign(j.thm[o1+2]))}for(o1=0;o1<L1;o1++){var be,pe,ae=$1(12),Se=[0,0,0,0],Oe=$1(12),i0=1,N0,V0=$1(t1.CBANDS),L0=$1(t1.CBANDS),U1=[0,0,0,0],C0=$1(t1.HBLKSIZE),D0=he([3,t1.HBLKSIZE_s]);for(V1(j.npart_s<=t1.CBANDS),V1(j.npart_l<=t1.CBANDS),l1=0;l1<3;l1++)ae[l1]=j.nsPsy.last_en_subshort[o1][l1+6],V1(j.nsPsy.last_en_subshort[o1][l1+4]>0),Oe[l1]=ae[l1]/j.nsPsy.last_en_subshort[o1][l1+4],Se[0]+=ae[l1];if(o1==2)for(l1=0;l1<576;l1++){var o0,l0;o0=C1[0][l1],l0=C1[1][l1],C1[0][l1]=o0+l0,C1[1][l1]=o0-l0}{var X0=C1[o1&1],qe=0;for(l1=0;l1<9;l1++){for(var Va=qe+64,ee=1;qe<Va;qe++)ee<Math.abs(X0[qe])&&(ee=Math.abs(X0[qe]));j.nsPsy.last_en_subshort[o1][l1]=ae[l1+3]=ee,Se[1+l1/3]+=ee,ee>ae[l1+3-2]?(V1(ae[l1+3-2]>0),ee=ee/ae[l1+3-2]):ae[l1+3-2]>ee*10?ee=ae[l1+3-2]/(ee*10):ee=0,Oe[l1+3]=ee}}if(o.analysis){var f0=Oe[0];for(l1=1;l1<12;l1++)f0<Oe[l1]&&(f0=Oe[l1]);j.pinfo.ers[k][o1]=j.pinfo.ers_save[o1],j.pinfo.ers_save[o1]=f0}for(N0=o1==3?j.nsPsy.attackthre_s:j.nsPsy.attackthre,l1=0;l1<12;l1++)U1[l1/3]==0&&Oe[l1]>N0&&(U1[l1/3]=l1%3+1);for(l1=1;l1<4;l1++){var u0;Se[l1-1]>Se[l1]?(V1(Se[l1]>0),u0=Se[l1-1]/Se[l1]):(V1(Se[l1-1]>0),u0=Se[l1]/Se[l1-1]),u0<1.7&&(U1[l1]=0,l1==1&&(U1[0]=0))}for(U1[0]!=0&&j.nsPsy.lastAttacks[o1]!=0&&(U1[0]=0),(j.nsPsy.lastAttacks[o1]==3||U1[0]+U1[1]+U1[2]+U1[3]!=0)&&(i0=0,U1[1]!=0&&U1[0]!=0&&(U1[1]=0),U1[2]!=0&&U1[1]!=0&&(U1[2]=0),U1[3]!=0&&U1[2]!=0&&(U1[3]=0)),o1<2?R1[o1]=i0:i0==0&&(R1[0]=R1[1]=0),O[o1]=j.tot_ener[o1],pe=m1,be=$,S(o,C0,D0,be,o1&1,pe,o1&1,k,o1,u,R),M(j,C0,T1,V0,L0),X(j,V0,L0,oe),N1=0;N1<3;N1++){var c0,se;for(n(o,D0,i1,x1,o1,N1),Y(j,i1,x1,o1,N1),p1=0;p1<t1.SBMAX_s;p1++){if(se=j.thm[o1].s[p1][N1],se*=g,U1[N1]>=2||U1[N1+1]==1){var Fe=N1!=0?N1-1:2,ee=a(j.thm[o1].s[p1][Fe],se,m*j1);se=Math.min(se,ee)}if(U1[N1]==1){var Fe=N1!=0?N1-1:2,ee=a(j.thm[o1].s[p1][Fe],se,V*j1);se=Math.min(se,ee)}else if(N1!=0&&U1[N1-1]==3||N1==0&&j.nsPsy.lastAttacks[o1]==3){var Fe=N1!=2?N1+1:0,ee=a(j.thm[o1].s[p1][Fe],se,V*j1);se=Math.min(se,ee)}c0=ae[N1*3+3]+ae[N1*3+4]+ae[N1*3+5],ae[N1*3+5]*6<c0&&(se*=.5,ae[N1*3+4]*6<c0&&(se*=.5)),j.thm[o1].s[p1][N1]=se}}for(j.nsPsy.lastAttacks[o1]=U1[2],Y1=0,w1=0;w1<j.npart_l;w1++){for(var ke=j.s3ind[w1][0],h0=T1[ke]*x[oe[ke]],Ee=j.s3_ll[Y1++]*h0;++ke<=j.s3ind[w1][1];)h0=T1[ke]*x[oe[ke]],Ee=b(Ee,j.s3_ll[Y1++]*h0,ke,ke-w1,j);Ee*=.158489319246111,j.blocktype_old[o1&1]==t1.SHORT_TYPE?x1[w1]=Ee:x1[w1]=a(Math.min(Ee,Math.min(Q*j.nb_1[o1][w1],c1*j.nb_2[o1][w1])),Ee,j1),j.nb_2[o1][w1]=j.nb_1[o1][w1],j.nb_1[o1][w1]=Ee}for(;w1<=t1.CBANDS;++w1)T1[w1]=0,x1[w1]=0;B(j,T1,x1,o1)}if((o.mode==E.STEREO||o.mode==E.JOINT_STEREO)&&o.interChRatio>0&&T(o,o.interChRatio),o.mode==E.JOINT_STEREO){var m0;P(j),m0=o.msfix,Math.abs(m0)>0&&H(j,m0,o.ATHlower*j.ATH.adjust)}for(s(o,R1,a1,W),o1=0;o1<L1;o1++){var Ye,je=0,We,Qe;o1>1?(Ye=F,je=-2,We=t1.NORM_TYPE,(a1[0]==t1.SHORT_TYPE||a1[1]==t1.SHORT_TYPE)&&(We=t1.SHORT_TYPE),Qe=p[k][o1-2]):(Ye=L,je=0,We=a1[o1],Qe=N[k][o1]),We==t1.SHORT_TYPE?Ye[je+o1]=h(Qe,j.masking_lower):Ye[je+o1]=J(Qe,j.masking_lower),o.analysis&&(j.pinfo.pe[k][o1]=Ye[je+o1])}return 0};function u1(o,u,R,k,N,p,L,F){var O=o.internal_flags;if(k<2)z.fft_long(O,L[F],k,u,R);else if(k==2)for(var a1=t1.BLKSIZE-1;a1>=0;--a1){var j=L[F+0][a1],$=L[F+1][a1];L[F+0][a1]=(j+$)*ne.SQRT2*.5,L[F+1][a1]=(j-$)*ne.SQRT2*.5}p[0]=L[F+0][0],p[0]*=p[0];for(var a1=t1.BLKSIZE/2-1;a1>=0;--a1){var m1=L[F+0][t1.BLKSIZE/2-a1],T1=L[F+0][t1.BLKSIZE/2+a1];p[t1.BLKSIZE/2-a1]=(m1*m1+T1*T1)*.5}{for(var i1=0,a1=11;a1<t1.HBLKSIZE;a1++)i1+=p[a1];O.tot_ener[k]=i1}if(o.analysis){for(var a1=0;a1<t1.HBLKSIZE;a1++)O.pinfo.energy[N][k][a1]=O.pinfo.energy_save[k][a1],O.pinfo.energy_save[k][a1]=p[a1];O.pinfo.pe[N][k]=O.pe[k]}}function d1(o,u,R,k,N,p,L,F){var O=o.internal_flags;if(N==0&&k<2&&z.fft_short(O,L[F],k,u,R),k==2)for(var a1=t1.BLKSIZE_s-1;a1>=0;--a1){var j=L[F+0][N][a1],$=L[F+1][N][a1];L[F+0][N][a1]=(j+$)*ne.SQRT2*.5,L[F+1][N][a1]=(j-$)*ne.SQRT2*.5}p[N][0]=L[F+0][N][0],p[N][0]*=p[N][0];for(var a1=t1.BLKSIZE_s/2-1;a1>=0;--a1){var m1=L[F+0][N][t1.BLKSIZE_s/2-a1],T1=L[F+0][N][t1.BLKSIZE_s/2+a1];p[N][t1.BLKSIZE_s/2-a1]=(m1*m1+T1*T1)*.5}}function A1(o,u,R,k){var N=o.internal_flags;o.athaa_loudapprox==2&&R<2&&(N.loudness_sq[u][R]=N.loudness_sq_save[R],N.loudness_sq_save[R]=Z(k,N))}var g1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function S1(o,u,R,k,N,p,L,F,O,a1){for(var j=he([2,576]),$=o.internal_flags,m1=$.channels_out,T1=o.mode==E.JOINT_STEREO?4:m1,i1=0;i1<m1;i1++){firbuf=u[i1];for(var x1=R+576-350-U+192,W=0;W<576;W++){var R1,L1;R1=firbuf[x1+W+10],L1=0;for(var o1=0;o1<(U-1)/2-1;o1+=2)R1+=g1[o1]*(firbuf[x1+W+o1]+firbuf[x1+W+U-o1]),L1+=g1[o1+1]*(firbuf[x1+W+o1+1]+firbuf[x1+W+U-o1-1]);j[i1][W]=R1+L1}N[k][i1].en.assign($.en[i1]),N[k][i1].thm.assign($.thm[i1]),T1>2&&(p[k][i1].en.assign($.en[i1+2]),p[k][i1].thm.assign($.thm[i1+2]))}for(var i1=0;i1<T1;i1++){var w1=$1(12),l1=$1(12),P1=[0,0,0,0],Y1=j[i1&1],p1=0,N1=i1==3?$.nsPsy.attackthre_s:$.nsPsy.attackthre,C1=1;if(i1==2)for(var W=0,o1=576;o1>0;++W,--o1){var j1=j[0][W],oe=j[1][W];j[0][W]=j1+oe,j[1][W]=j1-oe}for(var W=0;W<3;W++)l1[W]=$.nsPsy.last_en_subshort[i1][W+6],V1($.nsPsy.last_en_subshort[i1][W+4]>0),w1[W]=l1[W]/$.nsPsy.last_en_subshort[i1][W+4],P1[0]+=l1[W];for(var W=0;W<9;W++){for(var Q1=p1+64,z1=1;p1<Q1;p1++)z1<Math.abs(Y1[p1])&&(z1=Math.abs(Y1[p1]));$.nsPsy.last_en_subshort[i1][W]=l1[W+3]=z1,P1[1+W/3]+=z1,z1>l1[W+3-2]?(V1(l1[W+3-2]>0),z1=z1/l1[W+3-2]):l1[W+3-2]>z1*10?z1=l1[W+3-2]/(z1*10):z1=0,w1[W+3]=z1}for(var W=0;W<3;++W){var re=l1[W*3+3]+l1[W*3+4]+l1[W*3+5],le=1;l1[W*3+5]*6<re&&(le*=.5,l1[W*3+4]*6<re&&(le*=.5)),F[i1][W]=le}if(o.analysis){for(var fe=w1[0],W=1;W<12;W++)fe<w1[W]&&(fe=w1[W]);$.pinfo.ers[k][i1]=$.pinfo.ers_save[i1],$.pinfo.ers_save[i1]=fe}for(var W=0;W<12;W++)O[i1][W/3]==0&&w1[W]>N1&&(O[i1][W/3]=W%3+1);for(var W=1;W<4;W++){var be=P1[W-1],pe=P1[W],ae=Math.max(be,pe);ae<4e4&&be<1.7*pe&&pe<1.7*be&&(W==1&&O[i1][0]<=O[i1][W]&&(O[i1][0]=0),O[i1][W]=0)}O[i1][0]<=$.nsPsy.lastAttacks[i1]&&(O[i1][0]=0),($.nsPsy.lastAttacks[i1]==3||O[i1][0]+O[i1][1]+O[i1][2]+O[i1][3]!=0)&&(C1=0,O[i1][1]!=0&&O[i1][0]!=0&&(O[i1][1]=0),O[i1][2]!=0&&O[i1][1]!=0&&(O[i1][2]=0),O[i1][3]!=0&&O[i1][2]!=0&&(O[i1][3]=0)),i1<2?a1[i1]=C1:C1==0&&(a1[0]=a1[1]=0),L[i1]=$.tot_ener[i1]}}function k1(o,u,R){if(R==0)for(var k=0;k<o.npart_s;k++)o.nb_s2[u][k]=o.nb_s1[u][k],o.nb_s1[u][k]=0}function F1(o,u){for(var R=0;R<o.npart_l;R++)o.nb_2[u][R]=o.nb_1[u][R],o.nb_1[u][R]=0}function ce(o,u,R,k){var N=x.length-1,p=0,L=R[p]+R[p+1];if(L>0){var F=u[p];F<u[p+1]&&(F=u[p+1]),V1(o.numlines_s[p]+o.numlines_s[p+1]-1>0),L=20*(F*2-L)/(L*(o.numlines_s[p]+o.numlines_s[p+1]-1));var O=0|L;O>N&&(O=N),k[p]=O}else k[p]=0;for(p=1;p<o.npart_s-1;p++)if(L=R[p-1]+R[p]+R[p+1],V1(p+1<o.npart_s),L>0){var F=u[p-1];F<u[p]&&(F=u[p]),F<u[p+1]&&(F=u[p+1]),V1(o.numlines_s[p-1]+o.numlines_s[p]+o.numlines_s[p+1]-1>0),L=20*(F*3-L)/(L*(o.numlines_s[p-1]+o.numlines_s[p]+o.numlines_s[p+1]-1));var O=0|L;O>N&&(O=N),k[p]=O}else k[p]=0;if(V1(p==o.npart_s-1),L=R[p-1]+R[p],L>0){var F=u[p-1];F<u[p]&&(F=u[p]),V1(o.numlines_s[p-1]+o.numlines_s[p]-1>0),L=20*(F*2-L)/(L*(o.numlines_s[p-1]+o.numlines_s[p]-1));var O=0|L;O>N&&(O=N),k[p]=O}else k[p]=0;V1(p==o.npart_s-1)}function r(o,u,R,k,N,p){var L=o.internal_flags,F=new float[t1.CBANDS],O=$1(t1.CBANDS),a1,j,$,m1=new int[t1.CBANDS];for($=j=0;$<L.npart_s;++$){var T1=0,i1=0,x1=L.numlines_s[$];for(a1=0;a1<x1;++a1,++j){var W=u[p][j];T1+=W,i1<W&&(i1=W)}R[$]=T1,F[$]=i1,O[$]=T1/x1,V1(O[$]>=0)}for(V1($==L.npart_s);$<t1.CBANDS;++$)F[$]=0,O[$]=0;for(ce(L,F,O,m1),j=$=0;$<L.npart_s;$++){var R1=L.s3ind_s[$][0],L1=L.s3ind_s[$][1],o1,w1,l1,P1,Y1;for(o1=m1[R1],w1=1,P1=L.s3_ss[j]*R[R1]*x[m1[R1]],++j,++R1;R1<=L1;)o1+=m1[R1],w1+=1,l1=L.s3_ss[j]*R[R1]*x[m1[R1]],P1=v(P1,l1,R1-$),++j,++R1;o1=(1+2*o1)/(2*w1),Y1=x[o1]*.5,P1*=Y1,k[$]=P1,L.nb_s2[N][$]=L.nb_s1[N][$],L.nb_s1[N][$]=P1,l1=F[$],l1*=L.minval_s[$],l1*=Y1,k[$]>l1&&(k[$]=l1),L.masking_lower>1&&(k[$]*=L.masking_lower),k[$]>R[$]&&(k[$]=R[$]),L.masking_lower<1&&(k[$]*=L.masking_lower),V1(k[$]>=0)}for(;$<t1.CBANDS;++$)R[$]=0,k[$]=0}function i(o,u,R,k,N){var p=$1(t1.CBANDS),L=$1(t1.CBANDS),F=ye(t1.CBANDS+2),O;M(o,u,R,p,L),X(o,p,L,F);var a1=0;for(O=0;O<o.npart_l;O++){var j,$,m1,T1,i1=o.s3ind[O][0],x1=o.s3ind[O][1],W=0,R1=0;for(W=F[i1],R1+=1,$=o.s3_ll[a1]*R[i1]*x[F[i1]],++a1,++i1;i1<=x1;)W+=F[i1],R1+=1,j=o.s3_ll[a1]*R[i1]*x[F[i1]],T1=v($,j,i1-O),$=T1,++a1,++i1;if(W=(1+2*W)/(2*R1),m1=x[W]*.5,$*=m1,o.blocktype_old[N&1]==t1.SHORT_TYPE){var L1=Q*o.nb_1[N][O];L1>0?k[O]=Math.min($,L1):k[O]=Math.min($,R[O]*V)}else{var o1=c1*o.nb_2[N][O],w1=Q*o.nb_1[N][O],L1;o1<=0&&(o1=$),w1<=0&&(w1=$),o.blocktype_old[N&1]==t1.NORM_TYPE?L1=Math.min(w1,o1):L1=w1,k[O]=Math.min($,L1)}o.nb_2[N][O]=o.nb_1[N][O],o.nb_1[N][O]=$,j=p[O],j*=o.minval_l[O],j*=m1,k[O]>j&&(k[O]=j),o.masking_lower>1&&(k[O]*=o.masking_lower),k[O]>R[O]&&(k[O]=R[O]),o.masking_lower<1&&(k[O]*=o.masking_lower),V1(k[O]>=0)}for(;O<t1.CBANDS;++O)R[O]=0,k[O]=0}function v1(o,u){var R=o.internal_flags;o.short_blocks==Ne.short_block_coupled&&!(u[0]!=0&&u[1]!=0)&&(u[0]=u[1]=0);for(var k=0;k<R.channels_out;k++)o.short_blocks==Ne.short_block_dispensed&&(u[k]=1),o.short_blocks==Ne.short_block_forced&&(u[k]=0)}function B1(o,u,R){for(var k=o.internal_flags,N=0;N<k.channels_out;N++){var p=t1.NORM_TYPE;u[N]!=0?(V1(k.blocktype_old[N]!=t1.START_TYPE),k.blocktype_old[N]==t1.SHORT_TYPE&&(p=t1.STOP_TYPE)):(p=t1.SHORT_TYPE,k.blocktype_old[N]==t1.NORM_TYPE&&(k.blocktype_old[N]=t1.START_TYPE),k.blocktype_old[N]==t1.STOP_TYPE&&(k.blocktype_old[N]=t1.SHORT_TYPE)),R[N]=k.blocktype_old[N],k.blocktype_old[N]=p}}function O1(o,u,R,k,N,p,L){for(var F=p*2,O=p>0?Math.pow(10,N):1,a1,j,$=0;$<L;++$){var m1=o[2][$],T1=o[3][$],i1=u[0][$],x1=u[1][$],W=u[2][$],R1=u[3][$];if(i1<=1.58*x1&&x1<=1.58*i1){var L1=R[$]*T1,o1=R[$]*m1;j=Math.max(W,Math.min(R1,L1)),a1=Math.max(R1,Math.min(W,o1))}else j=W,a1=R1;if(p>0){var w1,l1,P1=k[$]*O;if(w1=Math.min(Math.max(i1,P1),Math.max(x1,P1)),W=Math.max(j,P1),R1=Math.max(a1,P1),l1=W+R1,l1>0&&w1*F<l1){var Y1=w1*F/l1;W*=Y1,R1*=Y1}j=Math.min(W,j),a1=Math.min(R1,a1)}j>m1&&(j=m1),a1>T1&&(a1=T1),u[2][$]=j,u[3][$]=a1}}this.L3psycho_anal_vbr=function(o,u,R,k,N,p,L,F,O,a1){var j=o.internal_flags,$,m1,T1=$1(t1.HBLKSIZE),i1=he([3,t1.HBLKSIZE_s]),x1=he([2,t1.BLKSIZE]),W=he([2,3,t1.BLKSIZE_s]),R1=he([4,t1.CBANDS]),L1=he([4,t1.CBANDS]),o1=he([4,3]),w1=.6,l1=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],P1=ye(2),Y1=o.mode==E.JOINT_STEREO?4:j.channels_out;S1(o,u,R,k,N,p,O,o1,l1,P1),v1(o,P1);{for(var p1=0;p1<Y1;p1++){var N1=p1&1;$=x1,u1(o,u,R,p1,k,T1,$,N1),A1(o,k,p1,T1),P1[N1]!=0?i(j,T1,R1[p1],L1[p1],p1):F1(j,p1)}P1[0]+P1[1]==2&&o.mode==E.JOINT_STEREO&&O1(R1,L1,j.mld_cb_l,j.ATH.cb_l,o.ATHlower*j.ATH.adjust,o.msfix,j.npart_l);for(var p1=0;p1<Y1;p1++){var N1=p1&1;P1[N1]!=0&&B(j,R1[p1],L1[p1],p1)}}{for(var C1=0;C1<3;C1++){for(var p1=0;p1<Y1;++p1){var N1=p1&1;P1[N1]!=0?k1(j,p1,C1):(m1=W,d1(o,u,R,p1,C1,i1,m1,N1),r(o,i1,R1[p1],L1[p1],p1,C1))}P1[0]+P1[1]==0&&o.mode==E.JOINT_STEREO&&O1(R1,L1,j.mld_cb_s,j.ATH.cb_s,o.ATHlower*j.ATH.adjust,o.msfix,j.npart_s);for(var p1=0;p1<Y1;++p1){var N1=p1&1;P1[N1]==0&&Y(j,R1[p1],L1[p1],p1,C1)}}for(var p1=0;p1<Y1;p1++){var N1=p1&1;if(P1[N1]==0)for(var j1=0;j1<t1.SBMAX_s;j1++){for(var oe=$1(3),C1=0;C1<3;C1++){var Q1=j.thm[p1].s[j1][C1];if(Q1*=g,l1[p1][C1]>=2||l1[p1][C1+1]==1){var z1=C1!=0?C1-1:2,re=a(j.thm[p1].s[j1][z1],Q1,m*w1);Q1=Math.min(Q1,re)}else if(l1[p1][C1]==1){var z1=C1!=0?C1-1:2,re=a(j.thm[p1].s[j1][z1],Q1,V*w1);Q1=Math.min(Q1,re)}else if(C1!=0&&l1[p1][C1-1]==3||C1==0&&j.nsPsy.lastAttacks[p1]==3){var z1=C1!=2?C1+1:0,re=a(j.thm[p1].s[j1][z1],Q1,V*w1);Q1=Math.min(Q1,re)}Q1*=o1[p1][C1],oe[C1]=Q1}for(var C1=0;C1<3;C1++)j.thm[p1].s[j1][C1]=oe[C1]}}}for(var p1=0;p1<Y1;p1++)j.nsPsy.lastAttacks[p1]=l1[p1][2];B1(o,P1,a1);for(var p1=0;p1<Y1;p1++){var le,fe,be,pe;p1>1?(le=F,fe=-2,be=t1.NORM_TYPE,(a1[0]==t1.SHORT_TYPE||a1[1]==t1.SHORT_TYPE)&&(be=t1.SHORT_TYPE),pe=p[k][p1-2]):(le=L,fe=0,be=a1[p1],pe=N[k][p1]),be==t1.SHORT_TYPE?le[fe+p1]=h(pe,j.masking_lower):le[fe+p1]=J(pe,j.masking_lower),o.analysis&&(j.pinfo.pe[k][p1]=le[fe+p1])}return 0};function y1(o,u){var R=o,k;return R>=0?k=-R*27:k=R*u,k<=-72?0:Math.exp(k*r1)}function E1(o){var u=0,R=0;{var k=0,N,p;for(k=0;y1(k,o)>1e-20;k-=1);for(N=k,p=0;Math.abs(p-N)>1e-12;)k=(p+N)/2,y1(k,o)>0?p=k:N=k;u=N}{var k=0,N,p;for(k=0;y1(k,o)>1e-20;k+=1);for(N=0,p=k;Math.abs(p-N)>1e-12;)k=(p+N)/2,y1(k,o)>0?N=k:p=k;R=p}{var L=0,F=1e3,O;for(O=0;O<=F;++O){var k=u+O*(R-u)/F,a1=y1(k,o);L+=a1}{var j=(F+1)/(L*(R-u));return j}}}function M1(o){var u,R,k,N;return u=o,u>=0?u*=3:u*=1.5,u>=.5&&u<=2.5?(N=u-.5,R=8*(N*N-2*N)):R=0,u+=.474,k=15.811389+7.5*u-17.5*Math.sqrt(1+u*u),k<=-60?0:(u=Math.exp((R+k)*r1),u/=.6609193,u)}function I1(o){return o<0&&(o=0),o=o*.001,13*Math.atan(.76*o)+3.5*Math.atan(o*o/(7.5*7.5))}function H1(o,u,R,k,N,p,L,F,O,a1,j,$){var m1=$1(t1.CBANDS+1),T1=F/($>15?2*576:2*192),i1=ye(t1.HBLKSIZE),x1;F/=O;var W=0,R1=0;for(x1=0;x1<t1.CBANDS;x1++){var L1,o1;for(L1=I1(F*W),m1[x1]=F*W,o1=W;I1(F*o1)-L1<q&&o1<=O/2;o1++);for(o[x1]=o1-W,R1=x1+1;W<o1;)V1(W<t1.HBLKSIZE),i1[W++]=x1;if(W>O/2){W=O/2,++x1;break}}V1(x1<t1.CBANDS),m1[x1]=F*W;for(var w1=0;w1<$;w1++){var l1,P1,Y1,p1,N1;Y1=a1[w1],p1=a1[w1+1],l1=0|Math.floor(.5+j*(Y1-.5)),l1<0&&(l1=0),P1=0|Math.floor(.5+j*(p1-.5)),P1>O/2&&(P1=O/2),R[w1]=(i1[l1]+i1[P1])/2,u[w1]=i1[P1];var C1=T1*p1;L[w1]=(C1-m1[u[w1]])/(m1[u[w1]+1]-m1[u[w1]]),L[w1]<0?L[w1]=0:L[w1]>1&&(L[w1]=1),N1=I1(F*a1[w1]*j),N1=Math.min(N1,15.5)/15.5,p[w1]=Math.pow(10,1.25*(1-Math.cos(Math.PI*N1))-2.5)}W=0;for(var j1=0;j1<R1;j1++){var oe=o[j1],L1,Q1;L1=I1(F*W),Q1=I1(F*(W+oe-1)),k[j1]=.5*(L1+Q1),L1=I1(F*(W-.5)),Q1=I1(F*(W+oe-.5)),N[j1]=Q1-L1,W+=oe}return R1}function b1(o,u,R,k,N,p){var L=he([t1.CBANDS,t1.CBANDS]),F,O=0;if(p)for(var a1=0;a1<u;a1++)for(F=0;F<u;F++){var j=M1(R[a1]-R[F])*k[F];L[a1][F]=j*N[a1]}else for(F=0;F<u;F++)for(var $=15+Math.min(21/R[F],12),m1=E1($),a1=0;a1<u;a1++){var j=m1*y1(R[a1]-R[F],$)*k[F];L[a1][F]=j*N[a1]}for(var a1=0;a1<u;a1++){for(F=0;F<u&&!(L[a1][F]>0);F++);for(o[a1][0]=F,F=u-1;F>0&&!(L[a1][F]>0);F--);o[a1][1]=F,O+=o[a1][1]-o[a1][0]+1}for(var T1=$1(O),i1=0,a1=0;a1<u;a1++)for(F=o[a1][0];F<=o[a1][1];F++)T1[i1++]=L[a1][F];return T1}function q1(o){var u=I1(o);return u=Math.min(u,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*u))-2.5)}this.psymodel_init=function(o){var u=o.internal_flags,R,k=!0,N=13,p=24,L=0,F=0,O=-8.25,a1=-4.5,j=$1(t1.CBANDS),$=$1(t1.CBANDS),m1=$1(t1.CBANDS),T1=o.out_samplerate;switch(o.experimentalZ){default:case 0:k=!0;break;case 1:k=!(o.VBR==Ie.vbr_mtrh||o.VBR==Ie.vbr_mt);break;case 2:k=!1;break;case 3:N=8,L=-1.75,F=-.0125,O=-8.25,a1=-2.25;break}for(u.ms_ener_ratio_old=.25,u.blocktype_old[0]=u.blocktype_old[1]=t1.NORM_TYPE,R=0;R<4;++R){for(var W=0;W<t1.CBANDS;++W)u.nb_1[R][W]=1e20,u.nb_2[R][W]=1e20,u.nb_s1[R][W]=u.nb_s2[R][W]=1;for(var i1=0;i1<t1.SBMAX_l;i1++)u.en[R].l[i1]=1e20,u.thm[R].l[i1]=1e20;for(var W=0;W<3;++W){for(var i1=0;i1<t1.SBMAX_s;i1++)u.en[R].s[i1][W]=1e20,u.thm[R].s[i1][W]=1e20;u.nsPsy.lastAttacks[R]=0}for(var W=0;W<9;W++)u.nsPsy.last_en_subshort[R][W]=10}for(u.loudness_sq_save[0]=u.loudness_sq_save[1]=0,u.npart_l=H1(u.numlines_l,u.bo_l,u.bm_l,j,$,u.mld_l,u.PSY.bo_l_weight,T1,t1.BLKSIZE,u.scalefac_band.l,t1.BLKSIZE/(2*576),t1.SBMAX_l),V1(u.npart_l<t1.CBANDS),R=0;R<u.npart_l;R++){var x1=L;j[R]>=N&&(x1=F*(j[R]-N)/(p-N)+L*(p-j[R])/(p-N)),m1[R]=Math.pow(10,x1/10),u.numlines_l[R]>0?u.rnumlines_l[R]=1/u.numlines_l[R]:u.rnumlines_l[R]=0}u.s3_ll=b1(u.s3ind,u.npart_l,j,$,m1,k);var W=0;for(R=0;R<u.npart_l;R++){var R1;R1=sa.MAX_VALUE;for(var L1=0;L1<u.numlines_l[R];L1++,W++){var o1=T1*W/(1e3*t1.BLKSIZE),w1;w1=this.ATHformula(o1*1e3,o)-20,w1=Math.pow(10,.1*w1),w1*=u.numlines_l[R],R1>w1&&(R1=w1)}u.ATH.cb_l[R]=R1,R1=-20+j[R]*20/10,R1>6&&(R1=100),R1<-15&&(R1=-15),R1-=8,u.minval_l[R]=Math.pow(10,R1/10)*u.numlines_l[R]}for(u.npart_s=H1(u.numlines_s,u.bo_s,u.bm_s,j,$,u.mld_s,u.PSY.bo_s_weight,T1,t1.BLKSIZE_s,u.scalefac_band.s,t1.BLKSIZE_s/(2*192),t1.SBMAX_s),V1(u.npart_s<t1.CBANDS),W=0,R=0;R<u.npart_s;R++){var R1,x1=O;j[R]>=N&&(x1=a1*(j[R]-N)/(p-N)+O*(p-j[R])/(p-N)),m1[R]=Math.pow(10,x1/10),R1=sa.MAX_VALUE;for(var L1=0;L1<u.numlines_s[R];L1++,W++){var o1=T1*W/(1e3*t1.BLKSIZE_s),w1;w1=this.ATHformula(o1*1e3,o)-20,w1=Math.pow(10,.1*w1),w1*=u.numlines_s[R],R1>w1&&(R1=w1)}u.ATH.cb_s[R]=R1,R1=-7+j[R]*7/12,j[R]>12&&(R1*=1+Math.log(1+R1)*3.1),j[R]<12&&(R1*=1+Math.log(1-R1)*2.3),R1<-15&&(R1=-15),R1-=8,u.minval_s[R]=Math.pow(10,R1/10)*u.numlines_s[R]}u.s3_ss=b1(u.s3ind_s,u.npart_s,j,$,m1,k),I(),z.init_fft(u),u.decay=Math.exp(-1*C/(h1*T1/192));{var l1;l1=s1,o.exp_nspsytune&2&&(l1=1),Math.abs(o.msfix)>0&&(l1=o.msfix),o.msfix=l1;for(var P1=0;P1<u.npart_l;P1++)u.s3ind[P1][1]>u.npart_l-1&&(u.s3ind[P1][1]=u.npart_l-1)}var Y1=576*u.mode_gr/T1;if(u.ATH.decay=Math.pow(10,-12/10*Y1),u.ATH.adjust=.01,u.ATH.adjustLimit=1,V1(u.bo_l[t1.SBMAX_l-1]<=u.npart_l),V1(u.bo_s[t1.SBMAX_s-1]<=u.npart_s),o.ATHtype!=-1){var o1,p1=o.out_samplerate/t1.BLKSIZE,N1=0;for(o1=0,R=0;R<t1.BLKSIZE/2;++R)o1+=p1,u.ATH.eql_w[R]=1/Math.pow(10,this.ATHformula(o1,o)/10),N1+=u.ATH.eql_w[R];for(N1=1/N1,R=t1.BLKSIZE/2;--R>=0;)u.ATH.eql_w[R]*=N1}{for(var P1=W=0;P1<u.npart_s;++P1)for(R=0;R<u.numlines_s[P1];++R)++W;for(var P1=W=0;P1<u.npart_l;++P1)for(R=0;R<u.numlines_l[P1];++R)++W}for(W=0,R=0;R<u.npart_l;R++){var o1=T1*(W+u.numlines_l[R]/2)/(1*t1.BLKSIZE);u.mld_cb_l[R]=q1(o1),W+=u.numlines_l[R]}for(;R<t1.CBANDS;++R)u.mld_cb_l[R]=1;for(W=0,R=0;R<u.npart_s;R++){var o1=T1*(W+u.numlines_s[R]/2)/(1*t1.BLKSIZE_s);u.mld_cb_s[R]=q1(o1),W+=u.numlines_s[R]}for(;R<t1.CBANDS;++R)u.mld_cb_s[R]=1;return 0};function K1(o,u){o<-.3&&(o=3410),o/=1e3,o=Math.max(.1,o);var R=3.64*Math.pow(o,-.8)-6.8*Math.exp(-.6*Math.pow(o-3.4,2))+6*Math.exp(-.15*Math.pow(o-8.7,2))+(.6+.04*u)*.001*Math.pow(o,4);return R}this.ATHformula=function(o,u){var R;switch(u.ATHtype){case 0:R=K1(o,9);break;case 1:R=K1(o,-1);break;case 2:R=K1(o,0);break;case 3:R=K1(o,1)+6;break;case 4:R=K1(o,u.ATHcurve);break;default:R=K1(o,0);break}return R}}var Za=Ua,Ka=Ue;function Ga(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ka.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Wa=Ga,Qa=te(),na={};na.SFBMAX=Qa.SBMAX_s*3;var $e=na,_a=Z1,Ja=_a.new_float,xe=_a.new_int,S0=$e;function $a(){this.xr=Ja(576),this.l3_enc=xe(576),this.scalefac=xe(S0.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=xe(3),this.subblock_gain=xe(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=xe(S0.SFBMAX),this.window=xe(S0.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=xe(4),this.max_nonzero_coeff=0;var E=this;function z(Q){return new Int32Array(Q)}function C(Q){return new Float32Array(Q)}this.assign=function(Q){E.xr=C(Q.xr),E.l3_enc=z(Q.l3_enc),E.scalefac=z(Q.scalefac),E.xrpow_max=Q.xrpow_max,E.part2_3_length=Q.part2_3_length,E.big_values=Q.big_values,E.count1=Q.count1,E.global_gain=Q.global_gain,E.scalefac_compress=Q.scalefac_compress,E.block_type=Q.block_type,E.mixed_block_flag=Q.mixed_block_flag,E.table_select=z(Q.table_select),E.subblock_gain=z(Q.subblock_gain),E.region0_count=Q.region0_count,E.region1_count=Q.region1_count,E.preflag=Q.preflag,E.scalefac_scale=Q.scalefac_scale,E.count1table_select=Q.count1table_select,E.part2_length=Q.part2_length,E.sfb_lmax=Q.sfb_lmax,E.sfb_smin=Q.sfb_smin,E.psy_lmax=Q.psy_lmax,E.sfbmax=Q.sfbmax,E.psymax=Q.psymax,E.sfbdivide=Q.sfbdivide,E.width=z(Q.width),E.window=z(Q.window),E.count1bits=Q.count1bits,E.sfb_partition_table=Q.sfb_partition_table.slice(0),E.slen=z(Q.slen),E.max_nonzero_coeff=Q.max_nonzero_coeff}}var R0=$a,et=Z1,ia=et.new_int,at=R0;function tt(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[ia(4),ia(4)];for(var E=0;E<2;E++)for(var z=0;z<2;z++)this.tt[E][z]=new at}var rt=tt,oa=Z1,e0=oa.System,a0=oa.new_int,t0=te();function st(E,z,C,Q){this.l=a0(1+t0.SBMAX_l),this.s=a0(1+t0.SBMAX_s),this.psfb21=a0(1+t0.PSFB21),this.psfb12=a0(1+t0.PSFB12);var c1=this.l,G=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],e0.arraycopy(this.arrL,0,c1,0,Math.min(this.arrL.length,this.l.length)),e0.arraycopy(this.arrS,0,G,0,Math.min(this.arrS.length,this.s.length)),e0.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),e0.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var la=st,A0=Z1,B0=A0.new_float,nt=A0.new_float_n,_t=A0.new_int,fa=te();function it(){this.last_en_subshort=nt([4,9]),this.lastAttacks=_t(4),this.pefirbuf=B0(19),this.longfact=B0(fa.SBMAX_l),this.shortfact=B0(fa.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var ot=it;function lt(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var ft=lt,Ve=Z1,ut=Ve.new_byte,ct=Ve.new_double,me=Ve.new_float,Te=Ve.new_float_n,de=Ve.new_int,r0=Ve.new_int_n,ht=rt,mt=la,bt=ot,pt=ft,ua=J0(),G1=te(),vt=$e;we.MFSIZE=3*1152+G1.ENCDELAY-G1.MDCTDELAY,we.MAX_HEADER_BUF=256,we.MAX_BITS_PER_CHANNEL=4095,we.MAX_BITS_PER_GRANULE=7680,we.BPC=320;function we(){var E=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Te([2,we.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new ht,this.ms_ratio=me(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=de(2),this.CurrentStep=de(2),this.masking_lower=0,this.bv_scf=de(576),this.pseudohalf=de(vt.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*we.BPC+1),this.itime=ct(2),this.sideinfo_len=0,this.sb_sample=Te([2,2,18,G1.SBLIMIT]),this.amp_filter=me(32);function z(){this.write_timing=0,this.ptr=0,this.buf=ut(E)}this.header=new Array(we.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new mt,this.minval_l=me(G1.CBANDS),this.minval_s=me(G1.CBANDS),this.nb_1=Te([4,G1.CBANDS]),this.nb_2=Te([4,G1.CBANDS]),this.nb_s1=Te([4,G1.CBANDS]),this.nb_s2=Te([4,G1.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=me(4),this.loudness_sq=Te([2,2]),this.loudness_sq_save=me(2),this.mld_l=me(G1.SBMAX_l),this.mld_s=me(G1.SBMAX_s),this.bm_l=de(G1.SBMAX_l),this.bo_l=de(G1.SBMAX_l),this.bm_s=de(G1.SBMAX_s),this.bo_s=de(G1.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=r0([G1.CBANDS,2]),this.s3ind_s=r0([G1.CBANDS,2]),this.numlines_s=de(G1.CBANDS),this.numlines_l=de(G1.CBANDS),this.rnumlines_l=me(G1.CBANDS),this.mld_cb_l=me(G1.CBANDS),this.mld_cb_s=me(G1.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=me(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=de(2),this.nsPsy=new bt,this.VBR_seek_table=new pt,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=r0([16,5]),this.bitrate_blockType_Hist=r0([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var C=0;C<this.en.length;C++)this.en[C]=new ua;for(var C=0;C<this.thm.length;C++)this.thm[C]=new ua;for(var C=0;C<this.header.length;C++)this.header[C]=new z}var s0=we,dt=Z1,He=dt.new_float,Pe=te();function gt(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=He(Pe.SBMAX_l),this.s=He(Pe.SBMAX_s),this.psfb21=He(Pe.PSFB21),this.psfb12=He(Pe.PSFB12),this.cb_l=He(Pe.CBANDS),this.cb_s=He(Pe.CBANDS),this.eql_w=He(Pe.BLKSIZE/2)}var St=gt,ca=Z1,_e=ca.System,ha=ca.Arrays;W1.STEPS_per_dB=100,W1.MAX_dB=120,W1.GAIN_NOT_ENOUGH_SAMPLES=-24601,W1.GAIN_ANALYSIS_ERROR=0,W1.GAIN_ANALYSIS_OK=1,W1.INIT_GAIN_ANALYSIS_ERROR=0,W1.INIT_GAIN_ANALYSIS_OK=1,W1.YULE_ORDER=10,W1.MAX_ORDER=W1.YULE_ORDER,W1.MAX_SAMP_FREQ=48e3,W1.RMS_WINDOW_TIME_NUMERATOR=1,W1.RMS_WINDOW_TIME_DENOMINATOR=20,W1.MAX_SAMPLES_PER_WINDOW=W1.MAX_SAMP_FREQ*W1.RMS_WINDOW_TIME_NUMERATOR/W1.RMS_WINDOW_TIME_DENOMINATOR+1;function W1(){var E=64.82,z=.95,C=W1.RMS_WINDOW_TIME_NUMERATOR,Q=W1.RMS_WINDOW_TIME_DENOMINATOR,c1=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],G=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function K(m,V,s1,U,r1,Z){for(;r1--!=0;)s1[U]=1e-10+m[V+0]*Z[0]-s1[U-1]*Z[1]+m[V-1]*Z[2]-s1[U-2]*Z[3]+m[V-2]*Z[4]-s1[U-3]*Z[5]+m[V-3]*Z[6]-s1[U-4]*Z[7]+m[V-4]*Z[8]-s1[U-5]*Z[9]+m[V-5]*Z[10]-s1[U-6]*Z[11]+m[V-6]*Z[12]-s1[U-7]*Z[13]+m[V-7]*Z[14]-s1[U-8]*Z[15]+m[V-8]*Z[16]-s1[U-9]*Z[17]+m[V-9]*Z[18]-s1[U-10]*Z[19]+m[V-10]*Z[20],++U,++V}function q(m,V,s1,U,r1,Z){for(;r1--!=0;)s1[U]=m[V+0]*Z[0]-s1[U-1]*Z[1]+m[V-1]*Z[2]-s1[U-2]*Z[3]+m[V-2]*Z[4],++U,++V}function e1(m,V){for(var s1=0;s1<MAX_ORDER;s1++)m.linprebuf[s1]=m.lstepbuf[s1]=m.loutbuf[s1]=m.rinprebuf[s1]=m.rstepbuf[s1]=m.routbuf[s1]=0;switch(0|V){case 48e3:m.reqindex=0;break;case 44100:m.reqindex=1;break;case 32e3:m.reqindex=2;break;case 24e3:m.reqindex=3;break;case 22050:m.reqindex=4;break;case 16e3:m.reqindex=5;break;case 12e3:m.reqindex=6;break;case 11025:m.reqindex=7;break;case 8e3:m.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return m.sampleWindow=0|(V*C+Q-1)/Q,m.lsum=0,m.rsum=0,m.totsamp=0,ha.ill(m.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(m,V){return e1(m,V)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(m.linpre=MAX_ORDER,m.rinpre=MAX_ORDER,m.lstep=MAX_ORDER,m.rstep=MAX_ORDER,m.lout=MAX_ORDER,m.rout=MAX_ORDER,ha.fill(m.B,0),INIT_GAIN_ANALYSIS_OK)};function h1(m){return m*m}this.AnalyzeSamples=function(m,V,s1,U,r1,Z,S){var f,c,d,e,l,A,x;if(Z==0)return GAIN_ANALYSIS_OK;switch(x=0,l=Z,S){case 1:U=V,r1=s1;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(Z<MAX_ORDER?(_e.arraycopy(V,s1,m.linprebuf,MAX_ORDER,Z),_e.arraycopy(U,r1,m.rinprebuf,MAX_ORDER,Z)):(_e.arraycopy(V,s1,m.linprebuf,MAX_ORDER,MAX_ORDER),_e.arraycopy(U,r1,m.rinprebuf,MAX_ORDER,MAX_ORDER));l>0;){A=l>m.sampleWindow-m.totsamp?m.sampleWindow-m.totsamp:l,x<MAX_ORDER?(f=m.linpre+x,c=m.linprebuf,d=m.rinpre+x,e=m.rinprebuf,A>MAX_ORDER-x&&(A=MAX_ORDER-x)):(f=s1+x,c=V,d=r1+x,e=U),K(c,f,m.lstepbuf,m.lstep+m.totsamp,A,c1[m.reqindex]),K(e,d,m.rstepbuf,m.rstep+m.totsamp,A,c1[m.reqindex]),q(m.lstepbuf,m.lstep+m.totsamp,m.loutbuf,m.lout+m.totsamp,A,G[m.reqindex]),q(m.rstepbuf,m.rstep+m.totsamp,m.routbuf,m.rout+m.totsamp,A,G[m.reqindex]),f=m.lout+m.totsamp,c=m.loutbuf,d=m.rout+m.totsamp,e=m.routbuf;for(var I=A%8;I--!=0;)m.lsum+=h1(c[f++]),m.rsum+=h1(e[d++]);for(I=A/8;I--!=0;)m.lsum+=h1(c[f+0])+h1(c[f+1])+h1(c[f+2])+h1(c[f+3])+h1(c[f+4])+h1(c[f+5])+h1(c[f+6])+h1(c[f+7]),f+=8,m.rsum+=h1(e[d+0])+h1(e[d+1])+h1(e[d+2])+h1(e[d+3])+h1(e[d+4])+h1(e[d+5])+h1(e[d+6])+h1(e[d+7]),d+=8;if(l-=A,x+=A,m.totsamp+=A,m.totsamp==m.sampleWindow){var w=W1.STEPS_per_dB*10*Math.log10((m.lsum+m.rsum)/m.totsamp*.5+1e-37),y=w<=0?0:0|w;y>=m.A.length&&(y=m.A.length-1),m.A[y]++,m.lsum=m.rsum=0,_e.arraycopy(m.loutbuf,m.totsamp,m.loutbuf,0,MAX_ORDER),_e.arraycopy(m.routbuf,m.totsamp,m.routbuf,0,MAX_ORDER),_e.arraycopy(m.lstepbuf,m.totsamp,m.lstepbuf,0,MAX_ORDER),_e.arraycopy(m.rstepbuf,m.totsamp,m.rstepbuf,0,MAX_ORDER),m.totsamp=0}if(m.totsamp>m.sampleWindow)return GAIN_ANALYSIS_ERROR}return Z<MAX_ORDER?(_e.arraycopy(m.linprebuf,Z,m.linprebuf,0,MAX_ORDER-Z),_e.arraycopy(m.rinprebuf,Z,m.rinprebuf,0,MAX_ORDER-Z),_e.arraycopy(V,s1,m.linprebuf,MAX_ORDER-Z,Z),_e.arraycopy(U,r1,m.rinprebuf,MAX_ORDER-Z,Z)):(_e.arraycopy(V,s1+Z-MAX_ORDER,m.linprebuf,0,MAX_ORDER),_e.arraycopy(U,r1+Z-MAX_ORDER,m.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function g(m,V){var s1,U=0;for(s1=0;s1<V;s1++)U+=m[s1];if(U==0)return GAIN_NOT_ENOUGH_SAMPLES;var r1=0|Math.ceil(U*(1-z));for(s1=V;s1-- >0&&!((r1-=m[s1])<=0););return E-s1/W1.STEPS_per_dB}this.GetTitleGain=function(m){for(var V=g(m.A,m.A.length),s1=0;s1<m.A.length;s1++)m.B[s1]+=m.A[s1],m.A[s1]=0;for(var s1=0;s1<MAX_ORDER;s1++)m.linprebuf[s1]=m.lstepbuf[s1]=m.loutbuf[s1]=m.rinprebuf[s1]=m.rstepbuf[s1]=m.routbuf[s1]=0;return m.totsamp=0,m.lsum=m.rsum=0,V}}var ma=W1,ba=Z1,Le=ba.new_float,pa=ba.new_int,ie=ma;function Rt(){this.linprebuf=Le(ie.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Le(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.lstep=0,this.loutbuf=Le(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.lout=0,this.rinprebuf=Le(ie.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Le(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.rstep=0,this.routbuf=Le(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=pa(0|ie.STEPS_per_dB*ie.MAX_dB),this.B=pa(0|ie.STEPS_per_dB*ie.MAX_dB)}var At=Rt;function Bt(E){this.bits=E}var va=Bt,w0=Z1,da=w0.new_float,wt=w0.new_int,ga=w0.assert,Mt=va,Sa=te(),kt=$e,Et=s0;function yt(E){var z=E;this.quantize=z,this.iteration_loop=function(C,Q,c1,G){var K=C.internal_flags,q=da(kt.SFBMAX),e1=da(576),h1=wt(2),g=0,m,V=K.l3_side,s1=new Mt(g);this.quantize.rv.ResvFrameBegin(C,s1),g=s1.bits;for(var U=0;U<K.mode_gr;U++){m=this.quantize.qupvt.on_pe(C,Q,h1,g,U,U),K.mode_ext==Sa.MPG_MD_MS_LR&&(this.quantize.ms_convert(K.l3_side,U),this.quantize.qupvt.reduce_side(h1,c1[U],g,m));for(var r1=0;r1<K.channels_out;r1++){var Z,S,f=V.tt[U][r1];f.block_type!=Sa.SHORT_TYPE?(Z=0,S=K.PSY.mask_adjust-Z):(Z=0,S=K.PSY.mask_adjust_short-Z),K.masking_lower=Math.pow(10,S*.1),this.quantize.init_outer_loop(K,f),this.quantize.init_xrpow(K,f,e1)&&(this.quantize.qupvt.calc_xmin(C,G[U][r1],f,q),this.quantize.outer_loop(C,f,q,e1,r1,h1[r1])),this.quantize.iteration_finish_one(K,U,r1),ga(f.part2_3_length<=Et.MAX_BITS_PER_CHANNEL),ga(f.part2_3_length<=h1[r1])}}this.quantize.rv.ResvFrameEnd(K,g)}}var xt=yt;function D1(E,z,C,Q){this.xlen=E,this.linmax=z,this.table=C,this.hlen=Q}var f1={};f1.t1HB=[1,1,1,0],f1.t2HB=[1,2,1,3,1,1,3,2,0],f1.t3HB=[3,2,1,1,1,1,3,2,0],f1.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],f1.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],f1.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],f1.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],f1.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],f1.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],f1.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],f1.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],f1.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],f1.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],f1.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],f1.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],f1.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],f1.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],f1.t1l=[1,4,3,5],f1.t2l=[1,4,7,4,5,7,6,7,8],f1.t3l=[2,3,7,4,4,7,6,7,8],f1.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],f1.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],f1.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],f1.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],f1.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],f1.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],f1.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],f1.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],f1.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],f1.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],f1.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],f1.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],f1.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],f1.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],f1.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],f1.ht=[new D1(0,0,null,null),new D1(2,0,f1.t1HB,f1.t1l),new D1(3,0,f1.t2HB,f1.t2l),new D1(3,0,f1.t3HB,f1.t3l),new D1(0,0,null,null),new D1(4,0,f1.t5HB,f1.t5l),new D1(4,0,f1.t6HB,f1.t6l),new D1(6,0,f1.t7HB,f1.t7l),new D1(6,0,f1.t8HB,f1.t8l),new D1(6,0,f1.t9HB,f1.t9l),new D1(8,0,f1.t10HB,f1.t10l),new D1(8,0,f1.t11HB,f1.t11l),new D1(8,0,f1.t12HB,f1.t12l),new D1(16,0,f1.t13HB,f1.t13l),new D1(0,0,null,f1.t16_5l),new D1(16,0,f1.t15HB,f1.t15l),new D1(1,1,f1.t16HB,f1.t16l),new D1(2,3,f1.t16HB,f1.t16l),new D1(3,7,f1.t16HB,f1.t16l),new D1(4,15,f1.t16HB,f1.t16l),new D1(6,63,f1.t16HB,f1.t16l),new D1(8,255,f1.t16HB,f1.t16l),new D1(10,1023,f1.t16HB,f1.t16l),new D1(13,8191,f1.t16HB,f1.t16l),new D1(4,15,f1.t24HB,f1.t24l),new D1(5,31,f1.t24HB,f1.t24l),new D1(6,63,f1.t24HB,f1.t24l),new D1(7,127,f1.t24HB,f1.t24l),new D1(8,255,f1.t24HB,f1.t24l),new D1(9,511,f1.t24HB,f1.t24l),new D1(11,2047,f1.t24HB,f1.t24l),new D1(13,8191,f1.t24HB,f1.t24l),new D1(0,0,f1.t32HB,f1.t32l),new D1(0,0,f1.t33HB,f1.t33l)],f1.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],f1.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],f1.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],f1.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],f1.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],f1.scfsi_band=[0,6,11,16,21];var M0=f1,k0,Ra;function Aa(){if(Ra)return k0;Ra=1;var E=la,z=Z1,C=z.VbrMode,Q=z.Float,c1=z.Util,G=z.new_float,K=z.new_int,q=z.assert,e1=te(),h1=va,g=s0;m.Q_MAX=257,m.Q_MAX2=116,m.LARGE_BITS=1e5,m.IXMAX_VAL=8206;function m(){var V=x0(),s1=null,U=null,r1=null;this.setModules=function(v,T,P){s1=v,U=T,r1=P};function Z(v){return q(0<=v+m.Q_MAX2&&v<m.Q_MAX),x[v+m.Q_MAX2]}this.IPOW20=function(v){return q(0<=v&&v<m.Q_MAX),I[v]};var S=2220446049250313e-31,f=m.IXMAX_VAL,c=f+2,d=m.Q_MAX,e=m.Q_MAX2;m.LARGE_BITS;var l=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var A=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=A,this.sfBandIndex=[new E([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new E([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var x=G(d+e+1),I=G(d),w=G(c),y=G(c);this.adj43=y;function _1(v,T){var P=r1.ATHformula(T,v);return P-=l,P=Math.pow(10,P/10+v.ATHlower),P}function b(v){for(var T=v.internal_flags.ATH.l,P=v.internal_flags.ATH.psfb21,H=v.internal_flags.ATH.s,Y=v.internal_flags.ATH.psfb12,B=v.internal_flags,n=v.out_samplerate,s=0;s<e1.SBMAX_l;s++){var a=B.scalefac_band.l[s],_=B.scalefac_band.l[s+1];T[s]=Q.MAX_VALUE;for(var h=a;h<_;h++){var D=h*n/1152,J=_1(v,D);T[s]=Math.min(T[s],J)}}for(var s=0;s<e1.PSFB21;s++){var a=B.scalefac_band.psfb21[s],_=B.scalefac_band.psfb21[s+1];P[s]=Q.MAX_VALUE;for(var h=a;h<_;h++){var D=h*n/1152,J=_1(v,D);P[s]=Math.min(P[s],J)}}for(var s=0;s<e1.SBMAX_s;s++){var a=B.scalefac_band.s[s],_=B.scalefac_band.s[s+1];H[s]=Q.MAX_VALUE;for(var h=a;h<_;h++){var D=h*n/384,J=_1(v,D);H[s]=Math.min(H[s],J)}H[s]*=B.scalefac_band.s[s+1]-B.scalefac_band.s[s]}for(var s=0;s<e1.PSFB12;s++){var a=B.scalefac_band.psfb12[s],_=B.scalefac_band.psfb12[s+1];Y[s]=Q.MAX_VALUE;for(var h=a;h<_;h++){var D=h*n/384,J=_1(v,D);Y[s]=Math.min(Y[s],J)}Y[s]*=B.scalefac_band.s[13]-B.scalefac_band.s[12]}if(v.noATH){for(var s=0;s<e1.SBMAX_l;s++)T[s]=1e-20;for(var s=0;s<e1.PSFB21;s++)P[s]=1e-20;for(var s=0;s<e1.SBMAX_s;s++)H[s]=1e-20;for(var s=0;s<e1.PSFB12;s++)Y[s]=1e-20}B.ATH.floor=10*Math.log10(_1(v,-1))}this.iteration_init=function(v){var T=v.internal_flags,P=T.l3_side,H;if(T.iteration_init_init==0){for(T.iteration_init_init=1,P.main_data_begin=0,b(v),w[0]=0,H=1;H<c;H++)w[H]=Math.pow(H,4/3);for(H=0;H<c-1;H++)y[H]=H+1-Math.pow(.5*(w[H]+w[H+1]),.75);for(y[H]=.5,H=0;H<d;H++)I[H]=Math.pow(2,(H-210)*-.1875);for(H=0;H<=d+e;H++)x[H]=Math.pow(2,(H-210-e)*.25);s1.huffman_init(T);{var Y,B,n,s;for(H=v.exp_nspsytune>>2&63,H>=32&&(H-=64),Y=Math.pow(10,H/4/10),H=v.exp_nspsytune>>8&63,H>=32&&(H-=64),B=Math.pow(10,H/4/10),H=v.exp_nspsytune>>14&63,H>=32&&(H-=64),n=Math.pow(10,H/4/10),H=v.exp_nspsytune>>20&63,H>=32&&(H-=64),s=n*Math.pow(10,H/4/10),H=0;H<e1.SBMAX_l;H++){var a;H<=6?a=Y:H<=13?a=B:H<=20?a=n:a=s,T.nsPsy.longfact[H]=a}for(H=0;H<e1.SBMAX_s;H++){var a;H<=5?a=Y:H<=10?a=B:H<=11?a=n:a=s,T.nsPsy.shortfact[H]=a}}}},this.on_pe=function(v,T,P,H,Y,B){var n=v.internal_flags,s=0,a,_=K(2),h,D=new h1(s),J=U.ResvMaxBits(v,H,D,B);s=D.bits;var M=s+J;for(M>g.MAX_BITS_PER_GRANULE&&(M=g.MAX_BITS_PER_GRANULE),a=0,h=0;h<n.channels_out;++h)P[h]=Math.min(g.MAX_BITS_PER_CHANNEL,s/n.channels_out),_[h]=0|P[h]*T[Y][h]/700-P[h],_[h]>H*3/4&&(_[h]=H*3/4),_[h]<0&&(_[h]=0),_[h]+P[h]>g.MAX_BITS_PER_CHANNEL&&(_[h]=Math.max(0,g.MAX_BITS_PER_CHANNEL-P[h])),a+=_[h];if(a>J)for(h=0;h<n.channels_out;++h)_[h]=J*_[h]/a;for(h=0;h<n.channels_out;++h)P[h]+=_[h],J-=_[h];for(a=0,h=0;h<n.channels_out;++h)a+=P[h];if(a>g.MAX_BITS_PER_GRANULE){var X=0;for(h=0;h<n.channels_out;++h)P[h]*=g.MAX_BITS_PER_GRANULE,P[h]/=a,X+=P[h]}return M},this.reduce_side=function(v,T,P,H){q(v[0]+v[1]<=g.MAX_BITS_PER_GRANULE);var Y=.33*(.5-T)/.5;Y<0&&(Y=0),Y>.5&&(Y=.5);var B=0|Y*.5*(v[0]+v[1]);B>g.MAX_BITS_PER_CHANNEL-v[0]&&(B=g.MAX_BITS_PER_CHANNEL-v[0]),B<0&&(B=0),v[1]>=125&&(v[1]-B>125?(v[0]<P&&(v[0]+=B),v[1]-=B):(v[0]+=v[1]-125,v[1]=125)),B=v[0]+v[1],B>H&&(v[0]=H*v[0]/B,v[1]=H*v[1]/B),q(v[0]<=g.MAX_BITS_PER_CHANNEL),q(v[1]<=g.MAX_BITS_PER_CHANNEL),q(v[0]+v[1]<=g.MAX_BITS_PER_GRANULE)},this.athAdjust=function(v,T,P){var H=90.30873362,Y=94.82444863,B=c1.FAST_LOG10_X(T,10),n=v*v,s=0;return B-=P,n>1e-20&&(s=1+c1.FAST_LOG10_X(n,10/H)),s<0&&(s=0),B*=s,B+=P+H-Y,Math.pow(10,.1*B)},this.calc_xmin=function(v,T,P,H){var Y=0,B=v.internal_flags,n,s=0,a=0,_=B.ATH,h=P.xr,D=v.VBR==C.vbr_mtrh?1:0,J=B.masking_lower;for((v.VBR==C.vbr_mtrh||v.VBR==C.vbr_mt)&&(J=1),n=0;n<P.psy_lmax;n++){var M,X,n1,u1,d1,A1;v.VBR==C.vbr_rh||v.VBR==C.vbr_mtrh?X=athAdjust(_.adjust,_.l[n],_.floor):X=_.adjust*_.l[n],d1=P.width[n],n1=X/d1,u1=S,A1=d1>>1,M=0;do{var g1,S1;g1=h[s]*h[s],M+=g1,u1+=g1<n1?g1:n1,s++,S1=h[s]*h[s],M+=S1,u1+=S1<n1?S1:n1,s++}while(--A1>0);if(M>X&&a++,n==e1.SBPSY_l){var k1=X*B.nsPsy.longfact[n];u1<k1&&(u1=k1)}if(D!=0&&(X=u1),!v.ATHonly){var F1=T.en.l[n];if(F1>0){var k1;k1=M*T.thm.l[n]*J/F1,D!=0&&(k1*=B.nsPsy.longfact[n]),X<k1&&(X=k1)}}D!=0?H[Y++]=X:H[Y++]=X*B.nsPsy.longfact[n]}var ce=575;if(P.block_type!=e1.SHORT_TYPE)for(var r=576;r--!=0&&V.EQ(h[r],0);)ce=r;P.max_nonzero_coeff=ce;for(var i=P.sfb_smin;n<P.psymax;i++,n+=3){var d1,v1,B1;for(v.VBR==C.vbr_rh||v.VBR==C.vbr_mtrh?B1=athAdjust(_.adjust,_.s[i],_.floor):B1=_.adjust*_.s[i],d1=P.width[n],v1=0;v1<3;v1++){var M=0,X,n1,u1,A1=d1>>1;n1=B1/d1,u1=S;do{var g1,S1;g1=h[s]*h[s],M+=g1,u1+=g1<n1?g1:n1,s++,S1=h[s]*h[s],M+=S1,u1+=S1<n1?S1:n1,s++}while(--A1>0);if(M>B1&&a++,i==e1.SBPSY_s){var k1=B1*B.nsPsy.shortfact[i];u1<k1&&(u1=k1)}if(D!=0?X=u1:X=B1,!v.ATHonly&&!v.ATHshort){var F1=T.en.s[i][v1];if(F1>0){var k1;k1=M*T.thm.s[i][v1]*J/F1,D!=0&&(k1*=B.nsPsy.shortfact[i]),X<k1&&(X=k1)}}D!=0?H[Y++]=X:H[Y++]=X*B.nsPsy.shortfact[i]}v.useTemporal&&(H[Y-3]>H[Y-3+1]&&(H[Y-3+1]+=(H[Y-3]-H[Y-3+1])*B.decay),H[Y-3+1]>H[Y-3+2]&&(H[Y-3+2]+=(H[Y-3+1]-H[Y-3+2])*B.decay))}return a};function t(v){this.s=v}this.calc_noise_core=function(v,T,P,H){var Y=0,B=T.s,n=v.l3_enc;if(B>v.count1)for(;P--!=0;){var s;s=v.xr[B],B++,Y+=s*s,s=v.xr[B],B++,Y+=s*s}else if(B>v.big_values){var a=G(2);for(a[0]=0,a[1]=H;P--!=0;){var s;s=Math.abs(v.xr[B])-a[n[B]],B++,Y+=s*s,s=Math.abs(v.xr[B])-a[n[B]],B++,Y+=s*s}}else for(;P--!=0;){var s;s=Math.abs(v.xr[B])-w[n[B]]*H,B++,Y+=s*s,s=Math.abs(v.xr[B])-w[n[B]]*H,B++,Y+=s*s}return T.s=B,Y},this.calc_noise=function(v,T,P,H,Y){var B=0,n=0,s,a,_=0,h=0,D=0,J=-20,M=0,X=v.scalefac,n1=0;for(H.over_SSD=0,s=0;s<v.psymax;s++){var u1=v.global_gain-(X[n1++]+(v.preflag!=0?A[s]:0)<<v.scalefac_scale+1)-v.subblock_gain[v.window[s]]*8,d1=0;if(Y!=null&&Y.step[s]==u1)d1=Y.noise[s],M+=v.width[s],P[B++]=d1/T[n++],d1=Y.noise_log[s];else{var A1=Z(u1);if(a=v.width[s]>>1,M+v.width[s]>v.max_nonzero_coeff){var g1;g1=v.max_nonzero_coeff-M+1,g1>0?a=g1>>1:a=0}var S1=new t(M);d1=this.calc_noise_core(v,S1,a,A1),M=S1.s,Y!=null&&(Y.step[s]=u1,Y.noise[s]=d1),d1=P[B++]=d1/T[n++],d1=c1.FAST_LOG10(Math.max(d1,1e-20)),Y!=null&&(Y.noise_log[s]=d1)}if(Y!=null&&(Y.global_gain=v.global_gain),D+=d1,d1>0){var k1;k1=Math.max(0|d1*10+.5,1),H.over_SSD+=k1*k1,_++,h+=d1}J=Math.max(J,d1)}return H.over_count=_,H.tot_noise=D,H.over_noise=h,H.max_noise=J,_},this.set_pinfo=function(v,T,P,H,Y){var B=v.internal_flags,n,s,a,_,h,D=T.scalefac_scale==0?.5:1,J=T.scalefac,M=G(L3Side.SFBMAX),X=G(L3Side.SFBMAX),n1=new CalcNoiseResult;calc_xmin(v,P,T,M),calc_noise(T,M,X,n1,null);var u1=0;for(s=T.sfb_lmax,T.block_type!=e1.SHORT_TYPE&&T.mixed_block_flag==0&&(s=22),n=0;n<s;n++){var d1=B.scalefac_band.l[n],A1=B.scalefac_band.l[n+1],g1=A1-d1;for(_=0;u1<A1;u1++)_+=T.xr[u1]*T.xr[u1];_/=g1,h=1e15,B.pinfo.en[H][Y][n]=h*_,B.pinfo.xfsf[H][Y][n]=h*M[n]*X[n]/g1,P.en.l[n]>0&&!v.ATHonly?_=_/P.en.l[n]:_=0,B.pinfo.thr[H][Y][n]=h*Math.max(_*P.thm.l[n],B.ATH.l[n]),B.pinfo.LAMEsfb[H][Y][n]=0,T.preflag!=0&&n>=11&&(B.pinfo.LAMEsfb[H][Y][n]=-D*A[n]),n<e1.SBPSY_l&&(q(J[n]>=0),B.pinfo.LAMEsfb[H][Y][n]-=D*J[n])}if(T.block_type==e1.SHORT_TYPE)for(s=n,n=T.sfb_smin;n<e1.SBMAX_s;n++)for(var d1=B.scalefac_band.s[n],A1=B.scalefac_band.s[n+1],g1=A1-d1,S1=0;S1<3;S1++){for(_=0,a=d1;a<A1;a++)_+=T.xr[u1]*T.xr[u1],u1++;_=Math.max(_/g1,1e-20),h=1e15,B.pinfo.en_s[H][Y][3*n+S1]=h*_,B.pinfo.xfsf_s[H][Y][3*n+S1]=h*M[s]*X[s]/g1,P.en.s[n][S1]>0?_=_/P.en.s[n][S1]:_=0,(v.ATHonly||v.ATHshort)&&(_=0),B.pinfo.thr_s[H][Y][3*n+S1]=h*Math.max(_*P.thm.s[n][S1],B.ATH.s[n]),B.pinfo.LAMEsfb_s[H][Y][3*n+S1]=-2*T.subblock_gain[S1],n<e1.SBPSY_s&&(B.pinfo.LAMEsfb_s[H][Y][3*n+S1]-=D*J[s]),s++}B.pinfo.LAMEqss[H][Y]=T.global_gain,B.pinfo.LAMEmainbits[H][Y]=T.part2_3_length+T.part2_length,B.pinfo.LAMEsfbits[H][Y]=T.part2_length,B.pinfo.over[H][Y]=n1.over_count,B.pinfo.max_noise[H][Y]=n1.max_noise*10,B.pinfo.over_noise[H][Y]=n1.over_noise*10,B.pinfo.tot_noise[H][Y]=n1.tot_noise*10,B.pinfo.over_SSD[H][Y]=n1.over_SSD}}return k0=m,k0}var E0,Ba;function wa(){if(Ba)return E0;Ba=1;var E=Z1,z=E.System,C=E.Arrays,Q=E.new_int,c1=E.assert,G=te(),K=M0,q=R0,e1=Aa();function h1(){var g=null;this.qupvt=null,this.setModules=function(B){this.qupvt=B,g=B};function m(B){this.bits=0|B}var V=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function s1(B,n,s,a,_,h){var D=.5946/n;for(B=B>>1;B--!=0;)_[h++]=D>s[a++]?0:1,_[h++]=D>s[a++]?0:1}function U(B,n,s,a,_,h){B=B>>1;var D=B%2;for(B=B>>1;B--!=0;){var J,M,X,n1,u1,d1,A1,g1;J=s[a++]*n,M=s[a++]*n,u1=0|J,X=s[a++]*n,d1=0|M,n1=s[a++]*n,A1=0|X,J+=g.adj43[u1],g1=0|n1,M+=g.adj43[d1],_[h++]=0|J,X+=g.adj43[A1],_[h++]=0|M,n1+=g.adj43[g1],_[h++]=0|X,_[h++]=0|n1}if(D!=0){var J,M,u1,d1;J=s[a++]*n,M=s[a++]*n,u1=0|J,d1=0|M,J+=g.adj43[u1],M+=g.adj43[d1],_[h++]=0|J,_[h++]=0|M}}function r1(B,n,s,a,_){var h,D,J=0,M,X=0,n1=0,u1=0,d1=n,A1=0,g1=d1,S1=0,k1=B,F1=0;for(M=_!=null&&a.global_gain==_.global_gain,a.block_type==G.SHORT_TYPE?D=38:D=21,h=0;h<=D;h++){var ce=-1;if((M||a.block_type==G.NORM_TYPE)&&(ce=a.global_gain-(a.scalefac[h]+(a.preflag!=0?g.pretab[h]:0)<<a.scalefac_scale+1)-a.subblock_gain[a.window[h]]*8),c1(a.width[h]>=0),M&&_.step[h]==ce)X!=0&&(U(X,s,k1,F1,g1,S1),X=0),n1!=0&&(s1(n1,s,k1,F1,g1,S1),n1=0);else{var r=a.width[h];if(J+a.width[h]>a.max_nonzero_coeff){var i;i=a.max_nonzero_coeff-J+1,C.fill(n,a.max_nonzero_coeff,576,0),r=i,r<0&&(r=0),h=D+1}if(X==0&&n1==0&&(g1=d1,S1=A1,k1=B,F1=u1),_!=null&&_.sfb_count1>0&&h>=_.sfb_count1&&_.step[h]>0&&ce>=_.step[h]?(X!=0&&(U(X,s,k1,F1,g1,S1),X=0,g1=d1,S1=A1,k1=B,F1=u1),n1+=r):(n1!=0&&(s1(n1,s,k1,F1,g1,S1),n1=0,g1=d1,S1=A1,k1=B,F1=u1),X+=r),r<=0){n1!=0&&(s1(n1,s,k1,F1,g1,S1),n1=0),X!=0&&(U(X,s,k1,F1,g1,S1),X=0);break}}h<=D&&(A1+=a.width[h],u1+=a.width[h],J+=a.width[h])}X!=0&&(U(X,s,k1,F1,g1,S1),X=0),n1!=0&&(s1(n1,s,k1,F1,g1,S1),n1=0)}function Z(B,n,s){var a=0,_=0;do{var h=B[n++],D=B[n++];a<h&&(a=h),_<D&&(_=D)}while(n<s);return a<_&&(a=_),a}function S(B,n,s,a,_,h){var D=K.ht[a].xlen*65536+K.ht[_].xlen,J=0,M;do{var X=B[n++],n1=B[n++];X!=0&&(X>14&&(X=15,J+=D),X*=16),n1!=0&&(n1>14&&(n1=15,J+=D),X+=n1),J+=K.largetbl[X]}while(n<s);return M=J&65535,J>>=16,J>M&&(J=M,a=_),h.bits+=J,a}function f(B,n,s,a){var _=0,h=K.ht[1].hlen;do{var D=B[n+0]*2+B[n+1];n+=2,_+=h[D]}while(n<s);return a.bits+=_,1}function c(B,n,s,a,_){var h=0,D,J=K.ht[a].xlen,M;a==2?M=K.table23:M=K.table56;do{var X=B[n+0]*J+B[n+1];n+=2,h+=M[X]}while(n<s);return D=h&65535,h>>=16,h>D&&(h=D,a++),_.bits+=h,a}function d(B,n,s,a,_){var h=0,D=0,J=0,M=K.ht[a].xlen,X=K.ht[a].hlen,n1=K.ht[a+1].hlen,u1=K.ht[a+2].hlen;do{var d1=B[n+0]*M+B[n+1];n+=2,h+=X[d1],D+=n1[d1],J+=u1[d1]}while(n<s);var A1=a;return h>D&&(h=D,A1++),h>J&&(h=J,A1=a+2),_.bits+=h,A1}var e=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function l(B,n,s,a){var _=Z(B,n,s);switch(_){case 0:return _;case 1:return f(B,n,s,a);case 2:case 3:return c(B,n,s,e[_-1],a);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return d(B,n,s,e[_-1],a);default:if(_>e1.IXMAX_VAL)return a.bits=e1.LARGE_BITS,-1;_-=15;var h;for(h=24;h<32&&!(K.ht[h].linmax>=_);h++);var D;for(D=h-8;D<24&&!(K.ht[D].linmax>=_);D++);return S(B,n,s,D,h,a)}}this.noquant_count_bits=function(B,n,s){var a=n.l3_enc,_=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(s!=null&&(s.sfb_count1=0);_>1&&!(a[_-1]|a[_-2]);_-=2);n.count1=_;for(var h=0,D=0;_>3;_-=4){var J;if(((a[_-1]|a[_-2]|a[_-3]|a[_-4])&2147483647)>1)break;J=((a[_-4]*2+a[_-3])*2+a[_-2])*2+a[_-1],h+=K.t32l[J],D+=K.t33l[J]}var M=h;if(n.count1table_select=0,h>D&&(M=D,n.count1table_select=1),n.count1bits=M,n.big_values=_,_==0)return M;if(n.block_type==G.SHORT_TYPE)h=3*B.scalefac_band.s[3],h>n.big_values&&(h=n.big_values),D=n.big_values;else if(n.block_type==G.NORM_TYPE){if(h=n.region0_count=B.bv_scf[_-2],D=n.region1_count=B.bv_scf[_-1],c1(h+D+2<G.SBPSY_l),D=B.scalefac_band.l[h+D+2],h=B.scalefac_band.l[h+1],D<_){var X=new m(M);n.table_select[2]=l(a,D,_,X),M=X.bits}}else n.region0_count=7,n.region1_count=G.SBMAX_l-1-7-1,h=B.scalefac_band.l[8],D=_,h>D&&(h=D);if(h=Math.min(h,_),D=Math.min(D,_),0<h){var X=new m(M);n.table_select[0]=l(a,0,h,X),M=X.bits}if(h<D){var X=new m(M);n.table_select[1]=l(a,h,D,X),M=X.bits}if(B.use_best_huffman==2&&(n.part2_3_length=M,best_huffman_divide(B,n),M=n.part2_3_length),s!=null&&n.block_type==G.NORM_TYPE){for(var n1=0;B.scalefac_band.l[n1]<n.big_values;)n1++;s.sfb_count1=n1}return M},this.count_bits=function(B,n,s,a){var _=s.l3_enc,h=e1.IXMAX_VAL/g.IPOW20(s.global_gain);if(s.xrpow_max>h)return e1.LARGE_BITS;if(r1(n,_,g.IPOW20(s.global_gain),s,a),B.substep_shaping&2)for(var D=0,J=s.global_gain+s.scalefac_scale,M=.634521682242439/g.IPOW20(J),X=0;X<s.sfbmax;X++){var n1=s.width[X];if(B.pseudohalf[X]==0)D+=n1;else{var u1;for(u1=D,D+=n1;u1<D;++u1)_[u1]=n[u1]>=M?_[u1]:0}}return this.noquant_count_bits(B,s,a)};function A(B,n,s,a,_,h,D){for(var J=n.big_values,M=0;M<=22;M++)a[M]=e1.LARGE_BITS;for(var M=0;M<16;M++){var X=B.scalefac_band.l[M+1];if(X>=J)break;var n1=0,u1=new m(n1),d1=l(s,0,X,u1);n1=u1.bits;for(var A1=0;A1<8;A1++){var g1=B.scalefac_band.l[M+A1+2];if(g1>=J)break;var S1=n1;u1=new m(S1);var k1=l(s,X,g1,u1);S1=u1.bits,a[M+A1]>S1&&(a[M+A1]=S1,_[M+A1]=M,h[M+A1]=d1,D[M+A1]=k1)}}}function x(B,n,s,a,_,h,D,J){for(var M=n.big_values,X=2;X<G.SBMAX_l+1;X++){var n1=B.scalefac_band.l[X];if(n1>=M)break;var u1=_[X-2]+n.count1bits;if(s.part2_3_length<=u1)break;var d1=new m(u1),A1=l(a,n1,M,d1);u1=d1.bits,!(s.part2_3_length<=u1)&&(s.assign(n),s.part2_3_length=u1,s.region0_count=h[X-2],s.region1_count=X-2-h[X-2],s.table_select[0]=D[X-2],s.table_select[1]=J[X-2],s.table_select[2]=A1)}}this.best_huffman_divide=function(B,n){var s=new q,a=n.l3_enc,_=Q(23),h=Q(23),D=Q(23),J=Q(23);if(!(n.block_type==G.SHORT_TYPE&&B.mode_gr==1)){s.assign(n),n.block_type==G.NORM_TYPE&&(A(B,n,a,_,h,D,J),x(B,s,n,a,_,h,D,J));var M=s.big_values;if(!(M==0||(a[M-2]|a[M-1])>1)&&(M=n.count1+2,!(M>576))){s.assign(n),s.count1=M;for(var X=0,n1=0;M>s.big_values;M-=4){var u1=((a[M-4]*2+a[M-3])*2+a[M-2])*2+a[M-1];X+=K.t32l[u1],n1+=K.t33l[u1]}if(s.big_values=M,s.count1table_select=0,X>n1&&(X=n1,s.count1table_select=1),s.count1bits=X,s.block_type==G.NORM_TYPE)x(B,s,n,a,_,h,D,J);else{if(s.part2_3_length=X,X=B.scalefac_band.l[8],X>M&&(X=M),X>0){var d1=new m(s.part2_3_length);s.table_select[0]=l(a,0,X,d1),s.part2_3_length=d1.bits}if(M>X){var d1=new m(s.part2_3_length);s.table_select[1]=l(a,X,M,d1),s.part2_3_length=d1.bits}n.part2_3_length>s.part2_3_length&&n.assign(s)}}}};var I=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],w=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],y=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],_1=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];h1.slen1_tab=y,h1.slen2_tab=_1;function b(B,n){for(var s,a=n.tt[1][B],_=n.tt[0][B],h=0;h<K.scfsi_band.length-1;h++){for(s=K.scfsi_band[h];s<K.scfsi_band[h+1]&&!(_.scalefac[s]!=a.scalefac[s]&&a.scalefac[s]>=0);s++);if(s==K.scfsi_band[h+1]){for(s=K.scfsi_band[h];s<K.scfsi_band[h+1];s++)a.scalefac[s]=-1;n.scfsi[B][h]=1}}var D=0,J=0;for(s=0;s<11;s++)a.scalefac[s]!=-1&&(J++,D<a.scalefac[s]&&(D=a.scalefac[s]));for(var M=0,X=0;s<G.SBPSY_l;s++)a.scalefac[s]!=-1&&(X++,M<a.scalefac[s]&&(M=a.scalefac[s]));for(var h=0;h<16;h++)if(D<I[h]&&M<w[h]){var n1=y[h]*J+_1[h]*X;a.part2_length>n1&&(a.part2_length=n1,a.scalefac_compress=h)}}this.best_scalefac_store=function(B,n,s,a){var _=a.tt[n][s],h,D,J,M,X=0;for(J=0,h=0;h<_.sfbmax;h++){var n1=_.width[h];for(J+=n1,M=-n1;M<0&&_.l3_enc[M+J]==0;M++);M==0&&(_.scalefac[h]=X=-2)}if(_.scalefac_scale==0&&_.preflag==0){var u1=0;for(h=0;h<_.sfbmax;h++)_.scalefac[h]>0&&(u1|=_.scalefac[h]);if(!(u1&1)&&u1!=0){for(h=0;h<_.sfbmax;h++)_.scalefac[h]>0&&(_.scalefac[h]>>=1);_.scalefac_scale=X=1}}if(_.preflag==0&&_.block_type!=G.SHORT_TYPE&&B.mode_gr==2){for(h=11;h<G.SBPSY_l&&!(_.scalefac[h]<g.pretab[h]&&_.scalefac[h]!=-2);h++);if(h==G.SBPSY_l){for(h=11;h<G.SBPSY_l;h++)_.scalefac[h]>0&&(_.scalefac[h]-=g.pretab[h]);_.preflag=X=1}}for(D=0;D<4;D++)a.scfsi[s][D]=0;for(B.mode_gr==2&&n==1&&a.tt[0][s].block_type!=G.SHORT_TYPE&&a.tt[1][s].block_type!=G.SHORT_TYPE&&(b(s,a),X=0),h=0;h<_.sfbmax;h++)_.scalefac[h]==-2&&(_.scalefac[h]=0);X!=0&&(B.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(B,_))};function t(B,n){for(var s=0;s<n;++s)if(B[s]<0)return!1;return!0}var v=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],T=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],P=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(B){var n,s,a=0,_=0,h,D=B.scalefac;if(c1(t(D,B.sfbmax)),B.block_type==G.SHORT_TYPE)h=v,B.mixed_block_flag!=0&&(h=T);else if(h=P,B.preflag==0){for(s=11;s<G.SBPSY_l&&!(D[s]<g.pretab[s]);s++);if(s==G.SBPSY_l)for(B.preflag=1,s=11;s<G.SBPSY_l;s++)D[s]-=g.pretab[s]}for(s=0;s<B.sfbdivide;s++)a<D[s]&&(a=D[s]);for(;s<B.sfbmax;s++)_<D[s]&&(_=D[s]);for(B.part2_length=e1.LARGE_BITS,n=0;n<16;n++)a<I[n]&&_<w[n]&&B.part2_length>h[n]&&(B.part2_length=h[n],B.scalefac_compress=n);return B.part2_length==e1.LARGE_BITS};var H=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(B,n){var s,a,_,h,D,J,M,X,n1=Q(4),u1=n.scalefac;for(n.preflag!=0?s=2:s=0,M=0;M<4;M++)n1[M]=0;if(n.block_type==G.SHORT_TYPE){a=1;var d1=g.nr_of_sfb_block[s][a];for(X=0,_=0;_<4;_++)for(h=d1[_]/3,M=0;M<h;M++,X++)for(D=0;D<3;D++)u1[X*3+D]>n1[_]&&(n1[_]=u1[X*3+D])}else{a=0;var d1=g.nr_of_sfb_block[s][a];for(X=0,_=0;_<4;_++)for(h=d1[_],M=0;M<h;M++,X++)u1[X]>n1[_]&&(n1[_]=u1[X])}for(J=!1,_=0;_<4;_++)n1[_]>H[s][_]&&(J=!0);if(!J){var A1,g1,S1,k1;for(n.sfb_partition_table=g.nr_of_sfb_block[s][a],_=0;_<4;_++)n.slen[_]=Y[n1[_]];switch(A1=n.slen[0],g1=n.slen[1],S1=n.slen[2],k1=n.slen[3],s){case 0:n.scalefac_compress=(A1*5+g1<<4)+(S1<<2)+k1;break;case 1:n.scalefac_compress=400+(A1*5+g1<<2)+S1;break;case 2:n.scalefac_compress=500+A1*3+g1;break;default:z.err.printf(`intensity stereo not implemented yet
`);break}}if(!J)for(c1(n.sfb_partition_table!=null),n.part2_length=0,_=0;_<4;_++)n.part2_length+=n.slen[_]*n.sfb_partition_table[_];return J};var Y=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(B){for(var n=2;n<=576;n+=2){for(var s=0,a;B.scalefac_band.l[++s]<n;);for(a=V[s][0];B.scalefac_band.l[a+1]>n;)a--;for(a<0&&(a=V[s][0]),B.bv_scf[n-2]=a,a=V[s][1];B.scalefac_band.l[a+B.bv_scf[n-2]+2]>n;)a--;a<0&&(a=V[s][1]),B.bv_scf[n-1]=a}}}return E0=h1,E0}var y0,Ma;function x0(){if(Ma)return y0;Ma=1;var E=Z1,z=E.System,C=E.Arrays,Q=E.new_byte,c1=E.new_float_n,G=E.new_int,K=E.assert,q=wa(),e1=M0,h1=te(),g=s0;m.EQ=function(V,s1){return Math.abs(V)>Math.abs(s1)?Math.abs(V-s1)<=Math.abs(V)*1e-6:Math.abs(V-s1)<=Math.abs(s1)*1e-6},m.NEQ=function(V,s1){return!m.EQ(V,s1)};function m(){var V=H0(),s1=this,U=32773,r1=null,Z=null,S=null,f=null;this.setModules=function(n,s,a,_){r1=n,Z=s,S=a,f=_};var c=null,d=0,e=0,l=0;this.getframebits=function(n){var s=n.internal_flags,a;s.bitrate_index!=0?a=e1.bitrate_table[n.version][s.bitrate_index]:a=n.brate;var _=0|(n.version+1)*72e3*a/n.out_samplerate+s.padding;return 8*_};function A(n){z.arraycopy(n.header[n.w_ptr].buf,0,c,e,n.sideinfo_len),e+=n.sideinfo_len,d+=n.sideinfo_len*8,n.w_ptr=n.w_ptr+1&g.MAX_HEADER_BUF-1}function x(n,s,a){for(;a>0;){var _;l==0&&(l=8,e++,K(e<V.LAME_MAXMP3BUFFER),K(n.header[n.w_ptr].write_timing>=d),n.header[n.w_ptr].write_timing==d&&A(n),c[e]=0),_=Math.min(a,l),a-=_,l-=_,c[e]|=s>>a<<l,d+=_}}function I(n,s,a){for(;a>0;){var _;l==0&&(l=8,e++,K(e<V.LAME_MAXMP3BUFFER),c[e]=0),_=Math.min(a,l),a-=_,l-=_,c[e]|=s>>a<<l,d+=_}}function w(n,s){var a=n.internal_flags,_;if(s>=8&&(x(a,76,8),s-=8),s>=8&&(x(a,65,8),s-=8),s>=8&&(x(a,77,8),s-=8),s>=8&&(x(a,69,8),s-=8),s>=32){var h=S.getLameShortVersion();if(s>=32)for(_=0;_<h.length&&s>=8;++_)s-=8,x(a,h.charAt(_),8)}for(;s>=1;s-=1)x(a,a.ancillary_flag,1),a.ancillary_flag^=n.disable_reservoir?0:1}function y(n,s,a){for(var _=n.header[n.h_ptr].ptr;a>0;){var h=Math.min(a,8-(_&7));a-=h,n.header[n.h_ptr].buf[_>>3]|=s>>a<<8-(_&7)-h,_+=h}n.header[n.h_ptr].ptr=_}function _1(n,s){n<<=8;for(var a=0;a<8;a++)n<<=1,s<<=1,(s^n)&65536&&(s^=U);return s}this.CRC_writeheader=function(n,s){var a=65535;a=_1(s[2]&255,a),a=_1(s[3]&255,a);for(var _=6;_<n.sideinfo_len;_++)a=_1(s[_]&255,a);s[4]=byte(a>>8),s[5]=byte(a&255)};function b(n,s){var a=n.internal_flags,_,h,D;if(_=a.l3_side,a.header[a.h_ptr].ptr=0,C.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),n.out_samplerate<16e3?y(a,4094,12):y(a,4095,12),y(a,n.version,1),y(a,1,2),y(a,n.error_protection?0:1,1),y(a,a.bitrate_index,4),y(a,a.samplerate_index,2),y(a,a.padding,1),y(a,n.extension,1),y(a,n.mode.ordinal(),2),y(a,a.mode_ext,2),y(a,n.copyright,1),y(a,n.original,1),y(a,n.emphasis,2),n.error_protection&&y(a,0,16),n.version==1){for(K(_.main_data_begin>=0),y(a,_.main_data_begin,9),a.channels_out==2?y(a,_.private_bits,3):y(a,_.private_bits,5),D=0;D<a.channels_out;D++){var J;for(J=0;J<4;J++)y(a,_.scfsi[D][J],1)}for(h=0;h<2;h++)for(D=0;D<a.channels_out;D++){var M=_.tt[h][D];y(a,M.part2_3_length+M.part2_length,12),y(a,M.big_values/2,9),y(a,M.global_gain,8),y(a,M.scalefac_compress,4),M.block_type!=h1.NORM_TYPE?(y(a,1,1),y(a,M.block_type,2),y(a,M.mixed_block_flag,1),M.table_select[0]==14&&(M.table_select[0]=16),y(a,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),y(a,M.table_select[1],5),y(a,M.subblock_gain[0],3),y(a,M.subblock_gain[1],3),y(a,M.subblock_gain[2],3)):(y(a,0,1),M.table_select[0]==14&&(M.table_select[0]=16),y(a,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),y(a,M.table_select[1],5),M.table_select[2]==14&&(M.table_select[2]=16),y(a,M.table_select[2],5),K(0<=M.region0_count&&M.region0_count<16),K(0<=M.region1_count&&M.region1_count<8),y(a,M.region0_count,4),y(a,M.region1_count,3)),y(a,M.preflag,1),y(a,M.scalefac_scale,1),y(a,M.count1table_select,1)}}else for(K(_.main_data_begin>=0),y(a,_.main_data_begin,8),y(a,_.private_bits,a.channels_out),h=0,D=0;D<a.channels_out;D++){var M=_.tt[h][D];y(a,M.part2_3_length+M.part2_length,12),y(a,M.big_values/2,9),y(a,M.global_gain,8),y(a,M.scalefac_compress,9),M.block_type!=h1.NORM_TYPE?(y(a,1,1),y(a,M.block_type,2),y(a,M.mixed_block_flag,1),M.table_select[0]==14&&(M.table_select[0]=16),y(a,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),y(a,M.table_select[1],5),y(a,M.subblock_gain[0],3),y(a,M.subblock_gain[1],3),y(a,M.subblock_gain[2],3)):(y(a,0,1),M.table_select[0]==14&&(M.table_select[0]=16),y(a,M.table_select[0],5),M.table_select[1]==14&&(M.table_select[1]=16),y(a,M.table_select[1],5),M.table_select[2]==14&&(M.table_select[2]=16),y(a,M.table_select[2],5),K(0<=M.region0_count&&M.region0_count<16),K(0<=M.region1_count&&M.region1_count<8),y(a,M.region0_count,4),y(a,M.region1_count,3)),y(a,M.scalefac_scale,1),y(a,M.count1table_select,1)}n.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);{var X=a.h_ptr;K(a.header[X].ptr==a.sideinfo_len*8),a.h_ptr=X+1&g.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[X].write_timing+s,a.h_ptr==a.w_ptr&&z.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function t(n,s){var a=e1.ht[s.count1table_select+32],_,h=0,D=s.big_values,J=s.big_values;for(K(s.count1table_select<2),_=(s.count1-s.big_values)/4;_>0;--_){var M=0,X=0,n1;n1=s.l3_enc[D+0],n1!=0&&(X+=8,s.xr[J+0]<0&&M++),n1=s.l3_enc[D+1],n1!=0&&(X+=4,M*=2,s.xr[J+1]<0&&M++),n1=s.l3_enc[D+2],n1!=0&&(X+=2,M*=2,s.xr[J+2]<0&&M++),n1=s.l3_enc[D+3],n1!=0&&(X++,M*=2,s.xr[J+3]<0&&M++),D+=4,J+=4,x(n,M+a.table[X],a.hlen[X]),h+=a.hlen[X]}return h}function v(n,s,a,_,h){var D=e1.ht[s],J=0;if(s==0)return J;for(var M=a;M<_;M+=2){var X=0,n1=0,u1=D.xlen,d1=D.xlen,A1=0,g1=h.l3_enc[M],S1=h.l3_enc[M+1];if(g1!=0&&(h.xr[M]<0&&A1++,X--),s>15){if(g1>14){var k1=g1-15;K(k1<=D.linmax),A1|=k1<<1,n1=u1,g1=15}if(S1>14){var F1=S1-15;K(F1<=D.linmax),A1<<=u1,A1|=F1,n1+=u1,S1=15}d1=16}S1!=0&&(A1<<=1,h.xr[M+1]<0&&A1++,X--),g1=g1*d1+S1,n1-=X,X+=D.hlen[g1],x(n,D.table[g1],X),x(n,A1,n1),J+=X+n1}return J}function T(n,s){var a=3*n.scalefac_band.s[3];a>s.big_values&&(a=s.big_values);var _=v(n,s.table_select[0],0,a,s);return _+=v(n,s.table_select[1],a,s.big_values,s),_}function P(n,s){var a,_,h,D;a=s.big_values;var J=s.region0_count+1;return K(J<n.scalefac_band.l.length),h=n.scalefac_band.l[J],J+=s.region1_count+1,K(J<n.scalefac_band.l.length),D=n.scalefac_band.l[J],h>a&&(h=a),D>a&&(D=a),_=v(n,s.table_select[0],0,h,s),_+=v(n,s.table_select[1],h,D,s),_+=v(n,s.table_select[2],D,a,s),_}function H(n){var s,a,_,h,D=0,J=n.internal_flags,M=J.l3_side;if(n.version==1)for(s=0;s<2;s++)for(a=0;a<J.channels_out;a++){var X=M.tt[s][a],n1=q.slen1_tab[X.scalefac_compress],u1=q.slen2_tab[X.scalefac_compress];for(h=0,_=0;_<X.sfbdivide;_++)X.scalefac[_]!=-1&&(x(J,X.scalefac[_],n1),h+=n1);for(;_<X.sfbmax;_++)X.scalefac[_]!=-1&&(x(J,X.scalefac[_],u1),h+=u1);K(h==X.part2_length),X.block_type==h1.SHORT_TYPE?h+=T(J,X):h+=P(J,X),h+=t(J,X),K(h==X.part2_3_length+X.part2_length),D+=h}else for(s=0,a=0;a<J.channels_out;a++){var X=M.tt[s][a],d1,A1,g1=0;if(K(X.sfb_partition_table!=null),h=0,_=0,A1=0,X.block_type==h1.SHORT_TYPE){for(;A1<4;A1++){var S1=X.sfb_partition_table[A1]/3,k1=X.slen[A1];for(d1=0;d1<S1;d1++,_++)x(J,Math.max(X.scalefac[_*3+0],0),k1),x(J,Math.max(X.scalefac[_*3+1],0),k1),x(J,Math.max(X.scalefac[_*3+2],0),k1),g1+=3*k1}h+=T(J,X)}else{for(;A1<4;A1++){var S1=X.sfb_partition_table[A1],k1=X.slen[A1];for(d1=0;d1<S1;d1++,_++)x(J,Math.max(X.scalefac[_],0),k1),g1+=k1}h+=P(J,X)}h+=t(J,X),K(h==X.part2_3_length),K(g1==X.part2_length),D+=g1+h}return D}function Y(){this.total=0}function B(n,s){var a=n.internal_flags,_,h,D,J,M;return M=a.w_ptr,J=a.h_ptr-1,J==-1&&(J=g.MAX_HEADER_BUF-1),_=a.header[J].write_timing-d,s.total=_,_>=0&&(h=1+J-M,J<M&&(h=1+J-M+g.MAX_HEADER_BUF),_-=h*8*a.sideinfo_len),D=s1.getframebits(n),_+=D,s.total+=D,s.total%8!=0?s.total=1+s.total/8:s.total=s.total/8,s.total+=e+1,_<0&&z.err.println(`strange error flushing buffer ... 
`),_}this.flush_bitstream=function(n){var s=n.internal_flags,a,_,h=s.h_ptr-1;if(h==-1&&(h=g.MAX_HEADER_BUF-1),a=s.l3_side,!((_=B(n,new Y))<0)){if(w(n,_),K(s.header[h].write_timing+this.getframebits(n)==d),s.ResvSize=0,a.main_data_begin=0,s.findReplayGain){var D=r1.GetTitleGain(s.rgdata);K(NEQ(D,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),s.RadioGain=Math.floor(D*10+.5)|0}s.findPeakSample&&(s.noclipGainChange=Math.ceil(Math.log10(s.PeakSample/32767)*20*10)|0,s.noclipGainChange>0&&(EQ(n.scale,1)||EQ(n.scale,0))?s.noclipScale=Math.floor(32767/s.PeakSample*100)/100:s.noclipScale=-1)}},this.add_dummy_byte=function(n,s,a){for(var _=n.internal_flags,h;a-- >0;)for(I(_,s,8),h=0;h<g.MAX_HEADER_BUF;++h)_.header[h].write_timing+=8},this.format_bitstream=function(n){var s=n.internal_flags,a;a=s.l3_side;var _=this.getframebits(n);w(n,a.resvDrain_pre),b(n,_);var h=8*s.sideinfo_len;if(h+=H(n),w(n,a.resvDrain_post),h+=a.resvDrain_post,a.main_data_begin+=(_-h)/8,B(n,new Y)!=s.ResvSize&&z.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),a.main_data_begin*8!=s.ResvSize&&(z.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*a.main_data_begin,s.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*s.sideinfo_len,h-a.resvDrain_post-8*s.sideinfo_len,h,h%8,_),z.err.println("This is a fatal error.  It has several possible causes:"),z.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),z.err.println(" 9%%  Your system is overclocked"),z.err.println(" 1%%  bug in LAME encoding library"),s.ResvSize=a.main_data_begin*8),d>1e9){var D;for(D=0;D<g.MAX_HEADER_BUF;++D)s.header[D].write_timing-=d;d=0}return 0},this.copy_buffer=function(n,s,a,_,h){var D=e+1;if(D<=0)return 0;if(_!=0&&D>_)return-1;if(z.arraycopy(c,0,s,a,D),e=-1,l=0,h!=0){var J=G(1);if(J[0]=n.nMusicCRC,f.updateMusicCRC(J,s,a,D),n.nMusicCRC=J[0],D>0&&(n.VBR_seek_table.nBytesWritten+=D),n.decode_on_the_fly){for(var M=c1([2,1152]),X=D,n1=-1,u1;n1!=0;)if(n1=Z.hip_decode1_unclipped(n.hip,s,a,X,M[0],M[1]),X=0,n1==-1&&(n1=0),n1>0){if(n.findPeakSample){for(u1=0;u1<n1;u1++)M[0][u1]>n.PeakSample?n.PeakSample=M[0][u1]:-M[0][u1]>n.PeakSample&&(n.PeakSample=-M[0][u1]);if(n.channels_out>1)for(u1=0;u1<n1;u1++)M[1][u1]>n.PeakSample?n.PeakSample=M[1][u1]:-M[1][u1]>n.PeakSample&&(n.PeakSample=-M[1][u1])}if(n.findReplayGain&&r1.AnalyzeSamples(n.rgdata,M[0],0,M[1],0,n1,n.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return D},this.init_bit_stream_w=function(n){c=Q(V.LAME_MAXMP3BUFFER),n.h_ptr=n.w_ptr=0,n.header[n.h_ptr].write_timing=0,e=-1,l=0,d=0}}return y0=m,y0}var T0,ka;function H0(){if(ka)return T0;ka=1;var E=Z1,z=E.System,C=E.VbrMode,Q=E.ShortBlock,c1=E.new_float,G=E.new_int_n,K=E.new_short_n,q=E.assert,e1=Za,h1=Wa,g=s0,m=St,V=At,s1=xt,U=x0(),r1=M0,Z=te();function S(){var f=Ue,c=this,d=128*1024;S.V9=410,S.V8=420,S.V7=430,S.V6=440,S.V5=450,S.V4=460,S.V3=470,S.V2=480,S.V1=490,S.V0=500,S.R3MIX=1e3,S.STANDARD=1001,S.EXTREME=1002,S.INSANE=1003,S.STANDARD_FAST=1004,S.EXTREME_FAST=1005,S.MEDIUM=1006,S.MEDIUM_FAST=1007;var e=16384+d;S.LAME_MAXMP3BUFFER=e;var l,A,x,I,w,y=new e1,_1,b,t;this.enc=new Z,this.setModules=function(r,i,v1,B1,O1,y1,E1,M1,I1){l=r,A=i,x=v1,I=B1,w=O1,_1=y1,b=M1,t=I1,this.enc.setModules(A,y,I,_1)};function v(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=c1(Z.SBMAX_l),this.bo_s_weight=c1(Z.SBMAX_s)}function T(){this.lowerlimit=0}function P(r,i){this.lowpass=i}var H=4294479419;function Y(r){var i;return r.class_id=H,i=r.internal_flags=new g,r.mode=f.NOT_SET,r.original=1,r.in_samplerate=44100,r.num_channels=2,r.num_samples=-1,r.bWriteVbrTag=!0,r.quality=-1,r.short_blocks=null,i.subblock_gain=-1,r.lowpassfreq=0,r.highpassfreq=0,r.lowpasswidth=-1,r.highpasswidth=-1,r.VBR=C.vbr_off,r.VBR_q=4,r.ATHcurve=-1,r.VBR_mean_bitrate_kbps=128,r.VBR_min_bitrate_kbps=0,r.VBR_max_bitrate_kbps=0,r.VBR_hard_min=0,i.VBR_min_bitrate=1,i.VBR_max_bitrate=13,r.quant_comp=-1,r.quant_comp_short=-1,r.msfix=-1,i.resample_ratio=1,i.OldValue[0]=180,i.OldValue[1]=180,i.CurrentStep[0]=4,i.CurrentStep[1]=4,i.masking_lower=1,i.nsPsy.attackthre=-1,i.nsPsy.attackthre_s=-1,r.scale=-1,r.athaa_type=-1,r.ATHtype=-1,r.athaa_loudapprox=-1,r.athaa_sensitivity=0,r.useTemporal=null,r.interChRatio=-1,i.mf_samples_to_encode=Z.ENCDELAY+Z.POSTDELAY,r.encoder_padding=0,i.mf_size=Z.ENCDELAY-Z.MDCTDELAY,r.findReplayGain=!1,r.decode_on_the_fly=!1,i.decode_on_the_fly=!1,i.findReplayGain=!1,i.findPeakSample=!1,i.RadioGain=0,i.AudiophileGain=0,i.noclipGainChange=0,i.noclipScale=-1,r.preset=0,r.write_id3tag_automatic=!0,0}this.lame_init=function(){var r=new h1;return Y(r),r.lame_allocated_gfp=1,r};function B(r){return r>1?0:r<=0?1:Math.cos(Math.PI/2*r)}this.nearestBitrateFullIndex=function(r){var i=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],v1=0,B1=0,O1=0,y1=0;y1=i[16],O1=16,B1=i[16],v1=16;for(var E1=0;E1<16;E1++)if(Math.max(r,i[E1+1])!=r){y1=i[E1+1],O1=E1+1,B1=i[E1],v1=E1;break}return y1-r>r-B1?v1:O1};function n(r,i){var v1=44100;return i>=48e3?v1=48e3:i>=44100?v1=44100:i>=32e3?v1=32e3:i>=24e3?v1=24e3:i>=22050?v1=22050:i>=16e3?v1=16e3:i>=12e3?v1=12e3:i>=11025?v1=11025:i>=8e3&&(v1=8e3),r==-1?v1:(r<=15960&&(v1=44100),r<=15250&&(v1=32e3),r<=11220&&(v1=24e3),r<=9970&&(v1=22050),r<=7230&&(v1=16e3),r<=5420&&(v1=12e3),r<=4510&&(v1=11025),r<=3970&&(v1=8e3),i<v1?i>44100?48e3:i>32e3?44100:i>24e3?32e3:i>22050?24e3:i>16e3?22050:i>12e3?16e3:i>11025?12e3:i>8e3?11025:8e3:v1)}function s(r,i){switch(r){case 44100:return i.version=1,0;case 48e3:return i.version=1,1;case 32e3:return i.version=1,2;case 22050:return i.version=0,0;case 24e3:return i.version=0,1;case 16e3:return i.version=0,2;case 11025:return i.version=0,0;case 12e3:return i.version=0,1;case 8e3:return i.version=0,2;default:return i.version=0,-1}}function a(r,i,v1){v1<16e3&&(i=2);for(var B1=r1.bitrate_table[i][1],O1=2;O1<=14;O1++)r1.bitrate_table[i][O1]>0&&Math.abs(r1.bitrate_table[i][O1]-r)<Math.abs(B1-r)&&(B1=r1.bitrate_table[i][O1]);return B1}function _(r,i,v1){v1<16e3&&(i=2);for(var B1=0;B1<=14;B1++)if(r1.bitrate_table[i][B1]>0&&r1.bitrate_table[i][B1]==r)return B1;return-1}function h(r,i){var v1=[new P(8,2e3),new P(16,3700),new P(24,3900),new P(32,5500),new P(40,7e3),new P(48,7500),new P(56,1e4),new P(64,11e3),new P(80,13500),new P(96,15100),new P(112,15600),new P(128,17e3),new P(160,17500),new P(192,18600),new P(224,19400),new P(256,19700),new P(320,20500)],B1=c.nearestBitrateFullIndex(i);r.lowerlimit=v1[B1].lowpass}function D(r){var i=r.internal_flags,v1=32,B1=-1;if(i.lowpass1>0){for(var O1=999,y1=0;y1<=31;y1++){var E1=y1/31;E1>=i.lowpass2&&(v1=Math.min(v1,y1)),i.lowpass1<E1&&E1<i.lowpass2&&(O1=Math.min(O1,y1))}O1==999?i.lowpass1=(v1-.75)/31:i.lowpass1=(O1-.75)/31,i.lowpass2=v1/31}if(i.highpass2>0&&i.highpass2<.9*(.75/31)&&(i.highpass1=0,i.highpass2=0,z.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),i.highpass2>0){for(var M1=-1,y1=0;y1<=31;y1++){var E1=y1/31;E1<=i.highpass1&&(B1=Math.max(B1,y1)),i.highpass1<E1&&E1<i.highpass2&&(M1=Math.max(M1,y1))}i.highpass1=B1/31,M1==-1?i.highpass2=(B1+.75)/31:i.highpass2=(M1+.75)/31}for(var y1=0;y1<32;y1++){var I1,H1,E1=y1/31;i.highpass2>i.highpass1?I1=B((i.highpass2-E1)/(i.highpass2-i.highpass1+1e-20)):I1=1,i.lowpass2>i.lowpass1?H1=B((E1-i.lowpass1)/(i.lowpass2-i.lowpass1+1e-20)):H1=1,i.amp_filter[y1]=I1*H1}}function J(r){var i=r.internal_flags;switch(r.quality){default:case 9:i.psymodel=0,i.noise_shaping=0,i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.use_best_huffman=0,i.full_outer_loop=0;break;case 8:r.quality=7;case 7:i.psymodel=1,i.noise_shaping=0,i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.use_best_huffman=0,i.full_outer_loop=0;break;case 6:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=0,i.full_outer_loop=0;break;case 5:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=0,i.full_outer_loop=0;break;case 4:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 3:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=1,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 2:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=1,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 1:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=2,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 0:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=2,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break}}function M(r){var i=r.internal_flags;r.frameNum=0,r.write_id3tag_automatic&&b.id3tag_write_v2(r),i.bitrate_stereoMode_Hist=G([16,5]),i.bitrate_blockType_Hist=G([16,6]),i.PeakSample=0,r.bWriteVbrTag&&_1.InitVbrTag(r)}this.lame_init_params=function(r){var i=r.internal_flags;if(i.Class_ID=0,i.ATH==null&&(i.ATH=new m),i.PSY==null&&(i.PSY=new v),i.rgdata==null&&(i.rgdata=new V),i.channels_in=r.num_channels,i.channels_in==1&&(r.mode=f.MONO),i.channels_out=r.mode==f.MONO?1:2,i.mode_ext=Z.MPG_MD_MS_LR,r.mode==f.MONO&&(r.force_ms=!1),r.VBR==C.vbr_off&&r.VBR_mean_bitrate_kbps!=128&&r.brate==0&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==C.vbr_off||r.VBR==C.vbr_mtrh||r.VBR==C.vbr_mt||(r.free_format=!1),r.VBR==C.vbr_off&&r.brate==0&&U.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==C.vbr_off&&r.compression_ratio>0&&(r.out_samplerate==0&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|r.out_samplerate*16*i.channels_out/(1e3*r.compression_ratio),i.samplerate_index=s(r.out_samplerate,r),r.free_format||(r.brate=a(r.brate,r.version,r.out_samplerate))),r.out_samplerate!=0&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),r.lowpassfreq==0){var v1=16e3;switch(r.VBR){case C.vbr_off:{var B1=new T;h(B1,r.brate),v1=B1.lowerlimit;break}case C.vbr_abr:{var B1=new T;h(B1,r.VBR_mean_bitrate_kbps),v1=B1.lowerlimit;break}case C.vbr_rh:{var O1=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var y1=O1[r.VBR_q],E1=O1[r.VBR_q+1],M1=r.VBR_q_frac;v1=linear_int(y1,E1,M1)}else v1=19500;break}default:{var O1=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var y1=O1[r.VBR_q],E1=O1[r.VBR_q+1],M1=r.VBR_q_frac;v1=linear_int(y1,E1,M1)}else v1=19500}}r.mode==f.MONO&&(r.VBR==C.vbr_off||r.VBR==C.vbr_abr)&&(v1*=1.5),r.lowpassfreq=v1|0}if(r.out_samplerate==0&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=n(r.lowpassfreq|0,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==C.vbr_off&&(r.compression_ratio=r.out_samplerate*16*i.channels_out/(1e3*r.brate)),r.VBR==C.vbr_abr&&(r.compression_ratio=r.out_samplerate*16*i.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,i.findPeakSample=!1),i.findReplayGain=r.findReplayGain,i.decode_on_the_fly=r.decode_on_the_fly,i.decode_on_the_fly&&(i.findPeakSample=!0),i.findReplayGain&&l.InitGainAnalysis(i.rgdata,r.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(i.decode_on_the_fly&&!r.decode_only&&(i.hip!=null&&t.hip_decode_exit(i.hip),i.hip=t.hip_decode_init()),i.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*i.mode_gr,r.encoder_delay=Z.ENCDELAY,i.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case C.vbr_mt:case C.vbr_rh:case C.vbr_mtrh:{var I1=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=I1[r.VBR_q]}break;case C.vbr_abr:r.compression_ratio=r.out_samplerate*16*i.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=r.out_samplerate*16*i.channels_out/(1e3*r.brate);break}if(r.mode==f.NOT_SET&&(r.mode=f.JOINT_STEREO),r.highpassfreq>0?(i.highpass1=2*r.highpassfreq,r.highpasswidth>=0?i.highpass2=2*(r.highpassfreq+r.highpasswidth):i.highpass2=1*2*r.highpassfreq,i.highpass1/=r.out_samplerate,i.highpass2/=r.out_samplerate):(i.highpass1=0,i.highpass2=0),r.lowpassfreq>0?(i.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(i.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),i.lowpass1<0&&(i.lowpass1=0)):i.lowpass1=1*2*r.lowpassfreq,i.lowpass1/=r.out_samplerate,i.lowpass2/=r.out_samplerate):(i.lowpass1=0,i.lowpass2=0),D(r),i.samplerate_index=s(r.out_samplerate,r),i.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==C.vbr_off){if(r.free_format)i.bitrate_index=0;else if(r.brate=a(r.brate,r.version,r.out_samplerate),i.bitrate_index=_(r.brate,r.version,r.out_samplerate),i.bitrate_index<=0)return r.internal_flags=null,-1}else i.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),i.pinfo!=null&&(r.bWriteVbrTag=!1),A.init_bit_stream_w(i);for(var H1=i.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),b1=0;b1<Z.SBMAX_l+1;b1++)i.scalefac_band.l[b1]=I.sfBandIndex[H1].l[b1];for(var b1=0;b1<Z.PSFB21+1;b1++){var q1=(i.scalefac_band.l[22]-i.scalefac_band.l[21])/Z.PSFB21,K1=i.scalefac_band.l[21]+b1*q1;i.scalefac_band.psfb21[b1]=K1}i.scalefac_band.psfb21[Z.PSFB21]=576;for(var b1=0;b1<Z.SBMAX_s+1;b1++)i.scalefac_band.s[b1]=I.sfBandIndex[H1].s[b1];for(var b1=0;b1<Z.PSFB12+1;b1++){var q1=(i.scalefac_band.s[13]-i.scalefac_band.s[12])/Z.PSFB12,K1=i.scalefac_band.s[12]+b1*q1;i.scalefac_band.psfb12[b1]=K1}i.scalefac_band.psfb12[Z.PSFB12]=192,r.version==1?i.sideinfo_len=i.channels_out==1?21:36:i.sideinfo_len=i.channels_out==1?13:21,r.error_protection&&(i.sideinfo_len+=2),M(r),i.Class_ID=H;{var o;for(o=0;o<19;o++)i.nsPsy.pefirbuf[o]=700*i.mode_gr*i.channels_out;r.ATHtype==-1&&(r.ATHtype=4)}switch(q(r.VBR_q<=9),q(r.VBR_q>=0),r.VBR){case C.vbr_mt:r.VBR=C.vbr_mtrh;case C.vbr_mtrh:{r.useTemporal==null&&(r.useTemporal=!1),x.apply_preset(r,500-r.VBR_q*10,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),i.PSY.mask_adjust=r.maskingadjust,i.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?i.sfb21_extra=!1:i.sfb21_extra=r.out_samplerate>44e3,i.iteration_loop=new VBRNewIterationLoop(w);break}case C.vbr_rh:{x.apply_preset(r,500-r.VBR_q*10,0),i.PSY.mask_adjust=r.maskingadjust,i.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?i.sfb21_extra=!1:i.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),i.iteration_loop=new VBROldIterationLoop(w);break}default:{var u;i.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),u=r.VBR,u==C.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),x.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=u,i.PSY.mask_adjust=r.maskingadjust,i.PSY.mask_adjust_short=r.maskingadjust_short,u==C.vbr_off?i.iteration_loop=new s1(w):i.iteration_loop=new ABRIterationLoop(w);break}}if(q(r.scale>=0),r.VBR!=C.vbr_off){if(i.VBR_min_bitrate=1,i.VBR_max_bitrate=14,r.out_samplerate<16e3&&(i.VBR_max_bitrate=8),r.VBR_min_bitrate_kbps!=0&&(r.VBR_min_bitrate_kbps=a(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),i.VBR_min_bitrate=_(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),i.VBR_min_bitrate<0)||r.VBR_max_bitrate_kbps!=0&&(r.VBR_max_bitrate_kbps=a(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),i.VBR_max_bitrate=_(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),i.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=r1.bitrate_table[r.version][i.VBR_min_bitrate],r.VBR_max_bitrate_kbps=r1.bitrate_table[r.version][i.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(r1.bitrate_table[r.version][i.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(r1.bitrate_table[r.version][i.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(i.PSY.mask_adjust+=r.tune_value_a,i.PSY.mask_adjust_short+=r.tune_value_a),J(r),q(r.scale>=0),r.athaa_type<0?i.ATH.useAdjust=3:i.ATH.useAdjust=r.athaa_type,i.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),r.short_blocks==null&&(r.short_blocks=Q.short_block_allowed),r.short_blocks==Q.short_block_allowed&&(r.mode==f.JOINT_STEREO||r.mode==f.STEREO)&&(r.short_blocks=Q.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=r.exp_nspsytune|1,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=e1.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=e1.NSATTACKTHRE_S),q(r.scale>=0),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),r.useTemporal==null&&(r.useTemporal=!0),i.slot_lag=i.frac_SpF=0,r.VBR==C.vbr_off&&(i.slot_lag=i.frac_SpF=(r.version+1)*72e3*r.brate%r.out_samplerate|0),I.iteration_init(r),y.psymodel_init(r),q(r.scale>=0),0};function X(r,i){(r.in_buffer_0==null||r.in_buffer_nsamples<i)&&(r.in_buffer_0=c1(i),r.in_buffer_1=c1(i),r.in_buffer_nsamples=i)}this.lame_encode_flush=function(r,i,v1,B1){var O1=r.internal_flags,y1=K([2,1152]),E1=0,M1,I1,H1,b1,q1=O1.mf_samples_to_encode-Z.POSTDELAY,K1=n1(r);if(O1.mf_samples_to_encode<1)return 0;for(M1=0,r.in_samplerate!=r.out_samplerate&&(q1+=16*r.out_samplerate/r.in_samplerate),H1=r.framesize-q1%r.framesize,H1<576&&(H1+=r.framesize),r.encoder_padding=H1,b1=(q1+H1)/r.framesize;b1>0&&E1>=0;){var o=K1-O1.mf_size,u=r.frameNum;o*=r.in_samplerate,o/=r.out_samplerate,o>1152&&(o=1152),o<1&&(o=1),I1=B1-M1,B1==0&&(I1=0),E1=this.lame_encode_buffer(r,y1[0],y1[1],o,i,v1,I1),v1+=E1,M1+=E1,b1-=u!=r.frameNum?1:0}if(O1.mf_samples_to_encode=0,E1<0||(I1=B1-M1,B1==0&&(I1=0),A.flush_bitstream(r),E1=A.copy_buffer(O1,i,v1,I1,1),E1<0))return E1;if(v1+=E1,M1+=E1,I1=B1-M1,B1==0&&(I1=0),r.write_id3tag_automatic){if(b.id3tag_write_v1(r),E1=A.copy_buffer(O1,i,v1,I1,0),E1<0)return E1;M1+=E1}return M1},this.lame_encode_buffer=function(r,i,v1,B1,O1,y1,E1){var M1=r.internal_flags,I1=[null,null];if(M1.Class_ID!=H)return-3;if(B1==0)return 0;X(M1,B1),I1[0]=M1.in_buffer_0,I1[1]=M1.in_buffer_1;for(var H1=0;H1<B1;H1++)I1[0][H1]=i[H1],M1.channels_in>1&&(I1[1][H1]=v1[H1]);return u1(r,I1[0],I1[1],B1,O1,y1,E1)};function n1(r){var i=Z.BLKSIZE+r.framesize-Z.FFTOFFSET;return i=Math.max(i,512+r.framesize-32),i}function u1(r,i,v1,B1,O1,y1,E1){var M1=r.internal_flags,I1=0,H1,b1,q1,K1,o,u=[null,null],R=[null,null];if(M1.Class_ID!=H)return-3;if(B1==0)return 0;if(o=A.copy_buffer(M1,O1,y1,E1,0),o<0)return o;if(y1+=o,I1+=o,R[0]=i,R[1]=v1,U.NEQ(r.scale,0)&&U.NEQ(r.scale,1))for(b1=0;b1<B1;++b1)R[0][b1]*=r.scale,M1.channels_out==2&&(R[1][b1]*=r.scale);if(U.NEQ(r.scale_left,0)&&U.NEQ(r.scale_left,1))for(b1=0;b1<B1;++b1)R[0][b1]*=r.scale_left;if(U.NEQ(r.scale_right,0)&&U.NEQ(r.scale_right,1))for(b1=0;b1<B1;++b1)R[1][b1]*=r.scale_right;if(r.num_channels==2&&M1.channels_out==1)for(b1=0;b1<B1;++b1)R[0][b1]=.5*(R[0][b1]+R[1][b1]),R[1][b1]=0;K1=n1(r),u[0]=M1.mfbuf[0],u[1]=M1.mfbuf[1];for(var k=0;B1>0;){var N=[null,null],p=0,L=0;N[0]=R[0],N[1]=R[1];var F=new A1;if(ce(r,u,N,k,B1,F),p=F.n_in,L=F.n_out,M1.findReplayGain&&!M1.decode_on_the_fly&&l.AnalyzeSamples(M1.rgdata,u[0],M1.mf_size,u[1],M1.mf_size,L,M1.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(B1-=p,k+=p,M1.channels_out==2,M1.mf_size+=L,q(M1.mf_size<=g.MFSIZE),M1.mf_samples_to_encode<1&&(M1.mf_samples_to_encode=Z.ENCDELAY+Z.POSTDELAY),M1.mf_samples_to_encode+=L,M1.mf_size>=K1){var O=E1-I1;if(E1==0&&(O=0),H1=d1(r,u[0],u[1],O1,y1,O),H1<0)return H1;for(y1+=H1,I1+=H1,M1.mf_size-=r.framesize,M1.mf_samples_to_encode-=r.framesize,q1=0;q1<M1.channels_out;q1++)for(b1=0;b1<M1.mf_size;b1++)u[q1][b1]=u[q1][b1+r.framesize]}}return I1}function d1(r,i,v1,B1,O1,y1){var E1=c.enc.lame_encode_mp3_frame(r,i,v1,B1,O1,y1);return r.frameNum++,E1}function A1(){this.n_in=0,this.n_out=0}function g1(){this.num_used=0}function S1(r,i){return i!=0?S1(i,r%i):r}function k1(r,i,v1){var B1=Math.PI*i;r/=v1,r<0&&(r=0),r>1&&(r=1);var O1=r-.5,y1=.42-.5*Math.cos(2*r*Math.PI)+.08*Math.cos(4*r*Math.PI);return Math.abs(O1)<1e-9?B1/Math.PI:y1*Math.sin(v1*B1*O1)/(Math.PI*v1*O1)}function F1(r,i,v1,B1,O1,y1,E1,M1,I1){var H1=r.internal_flags,b1,q1=0,K1,o=r.out_samplerate/S1(r.out_samplerate,r.in_samplerate);o>g.BPC&&(o=g.BPC);var u=Math.abs(H1.resample_ratio-Math.floor(.5+H1.resample_ratio))<1e-4?1:0,R=1/H1.resample_ratio;R>1&&(R=1);var k=31;k%2==0&&--k,k+=u;var N=k+1;if(H1.fill_buffer_resample_init==0){for(H1.inbuf_old[0]=c1(N),H1.inbuf_old[1]=c1(N),b1=0;b1<=2*o;++b1)H1.blackfilt[b1]=c1(N);for(H1.itime[0]=0,H1.itime[1]=0,q1=0;q1<=2*o;q1++){var p=0,L=(q1-o)/(2*o);for(b1=0;b1<=k;b1++)p+=H1.blackfilt[q1][b1]=k1(b1-L,R,k);for(b1=0;b1<=k;b1++)H1.blackfilt[q1][b1]/=p}H1.fill_buffer_resample_init=1}var F=H1.inbuf_old[I1];for(K1=0;K1<B1;K1++){var O,a1;if(O=K1*H1.resample_ratio,q1=0|Math.floor(O-H1.itime[I1]),k+q1-k/2>=E1)break;var L=O-H1.itime[I1]-(q1+.5*(k%2));a1=0|Math.floor(L*2*o+o+.5);var j=0;for(b1=0;b1<=k;++b1){var $=0|b1+q1-k/2,m1;m1=$<0?F[N+$]:O1[y1+$],j+=m1*H1.blackfilt[a1][b1]}i[v1+K1]=j}if(M1.num_used=Math.min(E1,k+q1-k/2),H1.itime[I1]+=M1.num_used-K1*H1.resample_ratio,M1.num_used>=N)for(b1=0;b1<N;b1++)F[b1]=O1[y1+M1.num_used+b1-N];else{var T1=N-M1.num_used;for(b1=0;b1<T1;++b1)F[b1]=F[b1+M1.num_used];for(q1=0;b1<N;++b1,++q1)F[b1]=O1[y1+q1];q(q1==M1.num_used)}return K1}function ce(r,i,v1,B1,O1,y1){var E1=r.internal_flags;if(E1.resample_ratio<.9999||E1.resample_ratio>1.0001)for(var M1=0;M1<E1.channels_out;M1++){var I1=new g1;y1.n_out=F1(r,i[M1],E1.mf_size,r.framesize,v1[M1],B1,O1,I1,M1),y1.n_in=I1.num_used}else{y1.n_out=Math.min(r.framesize,O1),y1.n_in=y1.n_out;for(var H1=0;H1<y1.n_out;++H1)i[0][E1.mf_size+H1]=v1[0][B1+H1],E1.channels_out==2&&(i[1][E1.mf_size+H1]=v1[1][B1+H1])}}}return T0=S,T0}var Tt=Z1,Re=Tt.VbrMode;function Ht(){var E=H0();function z(g,m,V,s1,U,r1,Z,S,f,c,d,e,l,A,x){this.vbr_q=g,this.quant_comp=m,this.quant_comp_s=V,this.expY=s1,this.st_lrm=U,this.st_s=r1,this.masking_adj=Z,this.masking_adj_short=S,this.ath_lower=f,this.ath_curve=c,this.ath_sensitivity=d,this.interch=e,this.safejoint=l,this.sfb21mod=A,this.msfix=x}function C(g,m,V,s1,U,r1,Z,S,f,c,d,e,l,A){this.quant_comp=m,this.quant_comp_s=V,this.safejoint=s1,this.nsmsfix=U,this.st_lrm=r1,this.st_s=Z,this.nsbass=S,this.scale=f,this.masking_adj=c,this.ath_lower=d,this.ath_curve=e,this.interch=l,this.sfscale=A}var Q;this.setModules=function(g){Q=g};var c1=[new z(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new z(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new z(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new z(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new z(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new z(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new z(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new z(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new z(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new z(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new z(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],G=[new z(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new z(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new z(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new z(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new z(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new z(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new z(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new z(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new z(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new z(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new z(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function K(g,m,V){var s1=g.VBR==Re.vbr_rh?c1:G,U=g.VBR_q_frac,r1=s1[m],Z=s1[m+1],S=r1;r1.st_lrm=r1.st_lrm+U*(Z.st_lrm-r1.st_lrm),r1.st_s=r1.st_s+U*(Z.st_s-r1.st_s),r1.masking_adj=r1.masking_adj+U*(Z.masking_adj-r1.masking_adj),r1.masking_adj_short=r1.masking_adj_short+U*(Z.masking_adj_short-r1.masking_adj_short),r1.ath_lower=r1.ath_lower+U*(Z.ath_lower-r1.ath_lower),r1.ath_curve=r1.ath_curve+U*(Z.ath_curve-r1.ath_curve),r1.ath_sensitivity=r1.ath_sensitivity+U*(Z.ath_sensitivity-r1.ath_sensitivity),r1.interch=r1.interch+U*(Z.interch-r1.interch),r1.msfix=r1.msfix+U*(Z.msfix-r1.msfix),h1(g,S.vbr_q),V!=0?g.quant_comp=S.quant_comp:Math.abs(g.quant_comp- -1)>0||(g.quant_comp=S.quant_comp),V!=0?g.quant_comp_short=S.quant_comp_s:Math.abs(g.quant_comp_short- -1)>0||(g.quant_comp_short=S.quant_comp_s),S.expY!=0&&(g.experimentalY=S.expY!=0),V!=0?g.internal_flags.nsPsy.attackthre=S.st_lrm:Math.abs(g.internal_flags.nsPsy.attackthre- -1)>0||(g.internal_flags.nsPsy.attackthre=S.st_lrm),V!=0?g.internal_flags.nsPsy.attackthre_s=S.st_s:Math.abs(g.internal_flags.nsPsy.attackthre_s- -1)>0||(g.internal_flags.nsPsy.attackthre_s=S.st_s),V!=0?g.maskingadjust=S.masking_adj:Math.abs(g.maskingadjust-0)>0||(g.maskingadjust=S.masking_adj),V!=0?g.maskingadjust_short=S.masking_adj_short:Math.abs(g.maskingadjust_short-0)>0||(g.maskingadjust_short=S.masking_adj_short),V!=0?g.ATHlower=-S.ath_lower/10:Math.abs(-g.ATHlower*10-0)>0||(g.ATHlower=-S.ath_lower/10),V!=0?g.ATHcurve=S.ath_curve:Math.abs(g.ATHcurve- -1)>0||(g.ATHcurve=S.ath_curve),V!=0?g.athaa_sensitivity=S.ath_sensitivity:Math.abs(g.athaa_sensitivity- -1)>0||(g.athaa_sensitivity=S.ath_sensitivity),S.interch>0&&(V!=0?g.interChRatio=S.interch:Math.abs(g.interChRatio- -1)>0||(g.interChRatio=S.interch)),S.safejoint>0&&(g.exp_nspsytune=g.exp_nspsytune|S.safejoint),S.sfb21mod>0&&(g.exp_nspsytune=g.exp_nspsytune|S.sfb21mod<<20),V!=0?g.msfix=S.msfix:Math.abs(g.msfix- -1)>0||(g.msfix=S.msfix),V==0&&(g.VBR_q=m,g.VBR_q_frac=U)}var q=[new C(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new C(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new C(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new C(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new C(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new C(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new C(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new C(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new C(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new C(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new C(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new C(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new C(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new C(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new C(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new C(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new C(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function e1(g,m,V){var s1=m,U=Q.nearestBitrateFullIndex(m);if(g.VBR=Re.vbr_abr,g.VBR_mean_bitrate_kbps=s1,g.VBR_mean_bitrate_kbps=Math.min(g.VBR_mean_bitrate_kbps,320),g.VBR_mean_bitrate_kbps=Math.max(g.VBR_mean_bitrate_kbps,8),g.brate=g.VBR_mean_bitrate_kbps,g.VBR_mean_bitrate_kbps>320&&(g.disable_reservoir=!0),q[U].safejoint>0&&(g.exp_nspsytune=g.exp_nspsytune|2),q[U].sfscale>0&&(g.internal_flags.noise_shaping=2),Math.abs(q[U].nsbass)>0){var r1=int(q[U].nsbass*4);r1<0&&(r1+=64),g.exp_nspsytune=g.exp_nspsytune|r1<<2}return V!=0?g.quant_comp=q[U].quant_comp:Math.abs(g.quant_comp- -1)>0||(g.quant_comp=q[U].quant_comp),V!=0?g.quant_comp_short=q[U].quant_comp_s:Math.abs(g.quant_comp_short- -1)>0||(g.quant_comp_short=q[U].quant_comp_s),V!=0?g.msfix=q[U].nsmsfix:Math.abs(g.msfix- -1)>0||(g.msfix=q[U].nsmsfix),V!=0?g.internal_flags.nsPsy.attackthre=q[U].st_lrm:Math.abs(g.internal_flags.nsPsy.attackthre- -1)>0||(g.internal_flags.nsPsy.attackthre=q[U].st_lrm),V!=0?g.internal_flags.nsPsy.attackthre_s=q[U].st_s:Math.abs(g.internal_flags.nsPsy.attackthre_s- -1)>0||(g.internal_flags.nsPsy.attackthre_s=q[U].st_s),V!=0?g.scale=q[U].scale:Math.abs(g.scale- -1)>0||(g.scale=q[U].scale),V!=0?g.maskingadjust=q[U].masking_adj:Math.abs(g.maskingadjust-0)>0||(g.maskingadjust=q[U].masking_adj),q[U].masking_adj>0?V!=0?g.maskingadjust_short=q[U].masking_adj*.9:Math.abs(g.maskingadjust_short-0)>0||(g.maskingadjust_short=q[U].masking_adj*.9):V!=0?g.maskingadjust_short=q[U].masking_adj*1.1:Math.abs(g.maskingadjust_short-0)>0||(g.maskingadjust_short=q[U].masking_adj*1.1),V!=0?g.ATHlower=-q[U].ath_lower/10:Math.abs(-g.ATHlower*10-0)>0||(g.ATHlower=-q[U].ath_lower/10),V!=0?g.ATHcurve=q[U].ath_curve:Math.abs(g.ATHcurve- -1)>0||(g.ATHcurve=q[U].ath_curve),V!=0?g.interChRatio=q[U].interch:Math.abs(g.interChRatio- -1)>0||(g.interChRatio=q[U].interch),m}this.apply_preset=function(g,m,V){switch(m){case E.R3MIX:{m=E.V3,g.VBR=Re.vbr_mtrh;break}case E.MEDIUM:{m=E.V4,g.VBR=Re.vbr_rh;break}case E.MEDIUM_FAST:{m=E.V4,g.VBR=Re.vbr_mtrh;break}case E.STANDARD:{m=E.V2,g.VBR=Re.vbr_rh;break}case E.STANDARD_FAST:{m=E.V2,g.VBR=Re.vbr_mtrh;break}case E.EXTREME:{m=E.V0,g.VBR=Re.vbr_rh;break}case E.EXTREME_FAST:{m=E.V0,g.VBR=Re.vbr_mtrh;break}case E.INSANE:return m=320,g.preset=m,e1(g,m,V),g.VBR=Re.vbr_off,m}switch(g.preset=m,m){case E.V9:return K(g,9,V),m;case E.V8:return K(g,8,V),m;case E.V7:return K(g,7,V),m;case E.V6:return K(g,6,V),m;case E.V5:return K(g,5,V),m;case E.V4:return K(g,4,V),m;case E.V3:return K(g,3,V),m;case E.V2:return K(g,2,V),m;case E.V1:return K(g,1,V),m;case E.V0:return K(g,0,V),m}return 8<=m&&m<=320?e1(g,m,V):(g.preset=0,m)};function h1(g,m){var V=0;return 0>m&&(V=-1,m=0),9<m&&(V=-1,m=9),g.VBR_q=m,g.VBR_q_frac=0,V}}var Pt=Ht;function Ot(){this.setModules=function(E,z){}}var It=Ot;function Nt(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Vt=Nt,Ea=Z1,ya=Ea.new_float,Lt=Ea.new_int;function Ct(){this.global_gain=0,this.sfb_count1=0,this.step=Lt(39),this.noise=ya(39),this.noise_log=ya(39)}var Dt=Ct,Ce=Z1,Me=Ce.System,xa=Ce.VbrMode,P0=Ce.Util,De=Ce.Arrays,Ze=Ce.new_float,Ke=Ce.assert,Xt=It,O0=Vt,qt=Dt,X1=te(),Ta=R0,Ha=$e;function Ft(){var E;this.rv=null;var z;this.qupvt=null;var C,Q=new Xt,c1;this.setModules=function(S,f,c,d){E=S,z=f,this.rv=f,C=c,this.qupvt=c,c1=d,Q.setModules(C,c1)},this.ms_convert=function(S,f){for(var c=0;c<576;++c){var d=S.tt[f][0].xr[c],e=S.tt[f][1].xr[c];S.tt[f][0].xr[c]=(d+e)*(P0.SQRT2*.5),S.tt[f][1].xr[c]=(d-e)*(P0.SQRT2*.5)}};function G(S,f,c,d){d=0;for(var e=0;e<=c;++e){var l=Math.abs(S.xr[e]);d+=l,f[e]=Math.sqrt(l*Math.sqrt(l)),f[e]>S.xrpow_max&&(S.xrpow_max=f[e])}return d}this.init_xrpow=function(S,f,c){var d=0,e=0|f.max_nonzero_coeff;if(f.xrpow_max=0,De.fill(c,e,576,0),d=G(f,c,e,d),d>1e-20){var l=0;S.substep_shaping&2&&(l=1);for(var A=0;A<f.psymax;A++)S.pseudohalf[A]=l;return!0}return De.fill(f.l3_enc,0,576,0),!1};function K(S,f){var c=S.ATH,d=f.xr;if(f.block_type!=X1.SHORT_TYPE)for(var e=!1,l=X1.PSFB21-1;l>=0&&!e;l--){var A=S.scalefac_band.psfb21[l],x=S.scalefac_band.psfb21[l+1],I=C.athAdjust(c.adjust,c.psfb21[l],c.floor);S.nsPsy.longfact[21]>1e-12&&(I*=S.nsPsy.longfact[21]);for(var w=x-1;w>=A;w--)if(Math.abs(d[w])<I)d[w]=0;else{e=!0;break}}else for(var y=0;y<3;y++)for(var e=!1,l=X1.PSFB12-1;l>=0&&!e;l--){var A=S.scalefac_band.s[12]*3+(S.scalefac_band.s[13]-S.scalefac_band.s[12])*y+(S.scalefac_band.psfb12[l]-S.scalefac_band.psfb12[0]),x=A+(S.scalefac_band.psfb12[l+1]-S.scalefac_band.psfb12[l]),_1=C.athAdjust(c.adjust,c.psfb12[l],c.floor);S.nsPsy.shortfact[12]>1e-12&&(_1*=S.nsPsy.shortfact[12]);for(var w=x-1;w>=A;w--)if(Math.abs(d[w])<_1)d[w]=0;else{e=!0;break}}}this.init_outer_loop=function(S,f){f.part2_3_length=0,f.big_values=0,f.count1=0,f.global_gain=210,f.scalefac_compress=0,f.table_select[0]=0,f.table_select[1]=0,f.table_select[2]=0,f.subblock_gain[0]=0,f.subblock_gain[1]=0,f.subblock_gain[2]=0,f.subblock_gain[3]=0,f.region0_count=0,f.region1_count=0,f.preflag=0,f.scalefac_scale=0,f.count1table_select=0,f.part2_length=0,f.sfb_lmax=X1.SBPSY_l,f.sfb_smin=X1.SBPSY_s,f.psy_lmax=S.sfb21_extra?X1.SBMAX_l:X1.SBPSY_l,f.psymax=f.psy_lmax,f.sfbmax=f.sfb_lmax,f.sfbdivide=11;for(var c=0;c<X1.SBMAX_l;c++)f.width[c]=S.scalefac_band.l[c+1]-S.scalefac_band.l[c],f.window[c]=3;if(f.block_type==X1.SHORT_TYPE){var d=Ze(576);f.sfb_smin=0,f.sfb_lmax=0,f.mixed_block_flag!=0&&(f.sfb_smin=3,f.sfb_lmax=S.mode_gr*2+4),f.psymax=f.sfb_lmax+3*((S.sfb21_extra?X1.SBMAX_s:X1.SBPSY_s)-f.sfb_smin),f.sfbmax=f.sfb_lmax+3*(X1.SBPSY_s-f.sfb_smin),f.sfbdivide=f.sfbmax-18,f.psy_lmax=f.sfb_lmax;var e=S.scalefac_band.l[f.sfb_lmax];Me.arraycopy(f.xr,0,d,0,576);for(var c=f.sfb_smin;c<X1.SBMAX_s;c++)for(var l=S.scalefac_band.s[c],A=S.scalefac_band.s[c+1],x=0;x<3;x++)for(var I=l;I<A;I++)f.xr[e++]=d[3*I+x];for(var w=f.sfb_lmax,c=f.sfb_smin;c<X1.SBMAX_s;c++)f.width[w]=f.width[w+1]=f.width[w+2]=S.scalefac_band.s[c+1]-S.scalefac_band.s[c],f.window[w]=0,f.window[w+1]=1,f.window[w+2]=2,w+=3}f.count1bits=0,f.sfb_partition_table=C.nr_of_sfb_block[0][0],f.slen[0]=0,f.slen[1]=0,f.slen[2]=0,f.slen[3]=0,f.max_nonzero_coeff=575,De.fill(f.scalefac,0),K(S,f)};function q(S){this.ordinal=S}q.BINSEARCH_NONE=new q(0),q.BINSEARCH_UP=new q(1),q.BINSEARCH_DOWN=new q(2);function e1(S,f,c,d,e){var l,A=S.CurrentStep[d],x=!1,I=S.OldValue[d],w=q.BINSEARCH_NONE;for(f.global_gain=I,c-=f.part2_length;;){var y;if(l=c1.count_bits(S,e,f,null),A==1||l==c)break;l>c?(w==q.BINSEARCH_DOWN&&(x=!0),x&&(A/=2),w=q.BINSEARCH_UP,y=A):(w==q.BINSEARCH_UP&&(x=!0),x&&(A/=2),w=q.BINSEARCH_DOWN,y=-A),f.global_gain+=y,f.global_gain<0&&(f.global_gain=0,x=!0),f.global_gain>255&&(f.global_gain=255,x=!0)}for(Ke(f.global_gain>=0),Ke(f.global_gain<256);l>c&&f.global_gain<255;)f.global_gain++,l=c1.count_bits(S,e,f,null);return S.CurrentStep[d]=I-f.global_gain>=4?4:2,S.OldValue[d]=f.global_gain,f.part2_3_length=l,l}this.trancate_smallspectrums=function(S,f,c,d){var e=Ze(Ha.SFBMAX);if(!(!(S.substep_shaping&4)&&f.block_type==X1.SHORT_TYPE||S.substep_shaping&128)){C.calc_noise(f,c,e,new O0,null);for(var A=0;A<576;A++){var l=0;f.l3_enc[A]!=0&&(l=Math.abs(f.xr[A])),d[A]=l}var A=0,x=8;f.block_type==X1.SHORT_TYPE&&(x=6);do{var I,w,y,_1,b=f.width[x];if(A+=b,!(e[x]>=1)&&(De.sort(d,A-b,b),!BitStream.EQ(d[A-1],0))){I=(1-e[x])*c[x],w=0,_1=0;do{var t;for(y=1;_1+y<b&&!BitStream.NEQ(d[_1+A-b],d[_1+A+y-b]);y++);if(t=d[_1+A-b]*d[_1+A-b]*y,I<t){_1!=0&&(w=d[_1+A-b-1]);break}I-=t,_1+=y}while(_1<b);if(!BitStream.EQ(w,0))do Math.abs(f.xr[A-b])<=w&&(f.l3_enc[A-b]=0);while(--b>0)}}while(++x<f.psymax);f.part2_3_length=c1.noquant_count_bits(S,f,null)}};function h1(S){for(var f=0;f<S.sfbmax;f++)if(S.scalefac[f]+S.subblock_gain[S.window[f]]==0)return!1;return!0}function g(S){return P0.FAST_LOG10(.368+.632*S*S*S)}function m(S,f){for(var c=1e-37,d=0;d<f.psymax;d++)c+=g(S[d]);return Math.max(1e-20,c)}function V(S,f,c,d,e){var l;switch(S){default:case 9:{f.over_count>0?(l=c.over_SSD<=f.over_SSD,c.over_SSD==f.over_SSD&&(l=c.bits<f.bits)):l=c.max_noise<0&&c.max_noise*10+c.bits<=f.max_noise*10+f.bits;break}case 0:l=c.over_count<f.over_count||c.over_count==f.over_count&&c.over_noise<f.over_noise||c.over_count==f.over_count&&BitStream.EQ(c.over_noise,f.over_noise)&&c.tot_noise<f.tot_noise;break;case 8:c.max_noise=m(e,d);case 1:l=c.max_noise<f.max_noise;break;case 2:l=c.tot_noise<f.tot_noise;break;case 3:l=c.tot_noise<f.tot_noise&&c.max_noise<f.max_noise;break;case 4:l=c.max_noise<=0&&f.max_noise>.2||c.max_noise<=0&&f.max_noise<0&&f.max_noise>c.max_noise-.2&&c.tot_noise<f.tot_noise||c.max_noise<=0&&f.max_noise>0&&f.max_noise>c.max_noise-.2&&c.tot_noise<f.tot_noise+f.over_noise||c.max_noise>0&&f.max_noise>-.05&&f.max_noise>c.max_noise-.1&&c.tot_noise+c.over_noise<f.tot_noise+f.over_noise||c.max_noise>0&&f.max_noise>-.1&&f.max_noise>c.max_noise-.15&&c.tot_noise+c.over_noise+c.over_noise<f.tot_noise+f.over_noise+f.over_noise;break;case 5:l=c.over_noise<f.over_noise||BitStream.EQ(c.over_noise,f.over_noise)&&c.tot_noise<f.tot_noise;break;case 6:l=c.over_noise<f.over_noise||BitStream.EQ(c.over_noise,f.over_noise)&&(c.max_noise<f.max_noise||BitStream.EQ(c.max_noise,f.max_noise)&&c.tot_noise<=f.tot_noise);break;case 7:l=c.over_count<f.over_count||c.over_noise<f.over_noise;break}return f.over_count==0&&(l=l&&c.bits<f.bits),l}function s1(S,f,c,d,e){var l=S.internal_flags,A;f.scalefac_scale==0?A=1.2968395546510096:A=1.6817928305074292;for(var x=0,I=0;I<f.sfbmax;I++)x<c[I]&&(x=c[I]);var w=l.noise_shaping_amp;switch(w==3&&(e?w=2:w=1),w){case 2:break;case 1:x>1?x=Math.pow(x,.5):x*=.95;break;case 0:default:x>1?x=1:x*=.95;break}for(var y=0,I=0;I<f.sfbmax;I++){var _1=f.width[I],b;if(y+=_1,!(c[I]<x)){if(l.substep_shaping&2&&(l.pseudohalf[I]=l.pseudohalf[I]==0?1:0,l.pseudohalf[I]==0&&l.noise_shaping_amp==2))return;for(f.scalefac[I]++,b=-_1;b<0;b++)d[y+b]*=A,d[y+b]>f.xrpow_max&&(f.xrpow_max=d[y+b]);if(l.noise_shaping_amp==2)return}}}function U(S,f){for(var c=1.2968395546510096,d=0,e=0;e<S.sfbmax;e++){var l=S.width[e],A=S.scalefac[e];if(S.preflag!=0&&(A+=C.pretab[e]),d+=l,A&1){A++;for(var x=-l;x<0;x++)f[d+x]*=c,f[d+x]>S.xrpow_max&&(S.xrpow_max=f[d+x])}S.scalefac[e]=A>>1}S.preflag=0,S.scalefac_scale=1}function r1(S,f,c){var d,e=f.scalefac;for(d=0;d<f.sfb_lmax;d++)if(e[d]>=16)return!0;for(var l=0;l<3;l++){var A=0,x=0;for(d=f.sfb_lmax+l;d<f.sfbdivide;d+=3)A<e[d]&&(A=e[d]);for(;d<f.sfbmax;d+=3)x<e[d]&&(x=e[d]);if(!(A<16&&x<8)){if(f.subblock_gain[l]>=7)return!0;f.subblock_gain[l]++;var I=S.scalefac_band.l[f.sfb_lmax];for(d=f.sfb_lmax+l;d<f.sfbmax;d+=3){var w,y=f.width[d],_1=e[d];if(_1=_1-(4>>f.scalefac_scale),_1>=0){e[d]=_1,I+=y*3;continue}e[d]=0;{var b=210+(_1<<f.scalefac_scale+1);w=C.IPOW20(b)}I+=y*(l+1);for(var t=-y;t<0;t++)c[I+t]*=w,c[I+t]>f.xrpow_max&&(f.xrpow_max=c[I+t]);I+=y*(3-l-1)}{var w=C.IPOW20(202);I+=f.width[d]*(l+1);for(var t=-f.width[d];t<0;t++)c[I+t]*=w,c[I+t]>f.xrpow_max&&(f.xrpow_max=c[I+t])}}}return!1}function Z(S,f,c,d,e){var l=S.internal_flags;s1(S,f,c,d,e);var A=h1(f);return A?!1:(l.mode_gr==2?A=c1.scale_bitcount(f):A=c1.scale_bitcount_lsf(l,f),A?(l.noise_shaping>1&&(De.fill(l.pseudohalf,0),f.scalefac_scale==0?(U(f,d),A=!1):f.block_type==X1.SHORT_TYPE&&l.subblock_gain>0&&(A=r1(l,f,d)||h1(f))),A||(l.mode_gr==2?A=c1.scale_bitcount(f):A=c1.scale_bitcount_lsf(l,f)),!A):!0)}this.outer_loop=function(S,f,c,d,e,l){var A=S.internal_flags,x=new Ta,I=Ze(576),w=Ze(Ha.SFBMAX),y=new O0,_1,b=new qt,t=9999999,v=!1,T=!1,P=0;if(e1(A,f,l,e,d),A.noise_shaping==0)return 100;C.calc_noise(f,c,w,y,b),y.bits=f.part2_3_length,x.assign(f);var H=0;for(Me.arraycopy(d,0,I,0,576);!v;){do{var Y=new O0,B,n=255;if(A.substep_shaping&2?B=20:B=3,A.sfb21_extra&&(w[x.sfbmax]>1||x.block_type==X1.SHORT_TYPE&&(w[x.sfbmax+1]>1||w[x.sfbmax+2]>1))||!Z(S,x,w,d,T))break;x.scalefac_scale!=0&&(n=254);var s=l-x.part2_length;if(s<=0)break;for(;(x.part2_3_length=c1.count_bits(A,d,x,b))>s&&x.global_gain<=n;)x.global_gain++;if(x.global_gain>n)break;if(y.over_count==0){for(;(x.part2_3_length=c1.count_bits(A,d,x,b))>t&&x.global_gain<=n;)x.global_gain++;if(x.global_gain>n)break}if(C.calc_noise(x,c,w,Y,b),Y.bits=x.part2_3_length,f.block_type!=X1.SHORT_TYPE?_1=S.quant_comp:_1=S.quant_comp_short,_1=V(_1,y,Y,x,w)?1:0,_1!=0)t=f.part2_3_length,y=Y,f.assign(x),H=0,Me.arraycopy(d,0,I,0,576);else if(A.full_outer_loop==0&&(++H>B&&y.over_count==0||A.noise_shaping_amp==3&&T&&H>30||A.noise_shaping_amp==3&&T&&x.global_gain-P>15))break}while(x.global_gain+x.scalefac_scale<255);A.noise_shaping_amp==3?T?v=!0:(x.assign(f),Me.arraycopy(I,0,d,0,576),H=0,P=x.global_gain,T=!0):v=!0}return Ke(f.global_gain+f.scalefac_scale<=255),S.VBR==xa.vbr_rh||S.VBR==xa.vbr_mtrh?Me.arraycopy(I,0,d,0,576):A.substep_shaping&1&&trancate_smallspectrums(A,f,c,d),y.over_count},this.iteration_finish_one=function(S,f,c){var d=S.l3_side,e=d.tt[f][c];c1.best_scalefac_store(S,f,c,d),S.use_best_huffman==1&&c1.best_huffman_divide(S,e),z.ResvAdjust(S,e)},this.VBR_encode_granule=function(S,f,c,d,e,l,A){var x=S.internal_flags,I=new Ta,w=Ze(576),y=A,_1=A+1,b=(A+l)/2,t,v,T=0,P=x.sfb21_extra;Ke(y<=LameInternalFlags.MAX_BITS_PER_CHANNEL),De.fill(I.l3_enc,0);do b>y-42?x.sfb21_extra=!1:x.sfb21_extra=P,v=outer_loop(S,f,c,d,e,b),v<=0?(T=1,_1=f.part2_3_length,I.assign(f),Me.arraycopy(d,0,w,0,576),A=_1-32,t=A-l,b=(A+l)/2):(l=b+32,t=A-l,b=(A+l)/2,T!=0&&(T=2,f.assign(I),Me.arraycopy(w,0,d,0,576)));while(t>12);x.sfb21_extra=P,T==2&&Me.arraycopy(I.l3_enc,0,f.l3_enc,0,576),Ke(f.part2_3_length<=y)},this.get_framebits=function(S,f){var c=S.internal_flags;c.bitrate_index=c.VBR_min_bitrate;var d=E.getframebits(S);c.bitrate_index=1,d=E.getframebits(S);for(var e=1;e<=c.VBR_max_bitrate;e++){c.bitrate_index=e;var l=new MeanBits(d);f[e]=z.ResvFrameBegin(S,l),d=l.bits}},this.VBR_old_prepare=function(S,f,c,d,e,l,A,x,I){var w=S.internal_flags,y,_1=0,b=1,t=0;w.bitrate_index=w.VBR_max_bitrate;var v=z.ResvFrameBegin(S,new MeanBits(0))/w.mode_gr;get_framebits(S,l);for(var T=0;T<w.mode_gr;T++){var P=C.on_pe(S,f,x[T],v,T,0);w.mode_ext==X1.MPG_MD_MS_LR&&(ms_convert(w.l3_side,T),C.reduce_side(x[T],c[T],v,P));for(var H=0;H<w.channels_out;++H){var Y=w.l3_side.tt[T][H];Y.block_type!=X1.SHORT_TYPE?(_1=1.28/(1+Math.exp(3.5-f[T][H]/300))-.05,y=w.PSY.mask_adjust-_1):(_1=2.56/(1+Math.exp(3.5-f[T][H]/300))-.14,y=w.PSY.mask_adjust_short-_1),w.masking_lower=Math.pow(10,y*.1),init_outer_loop(w,Y),I[T][H]=C.calc_xmin(S,d[T][H],Y,e[T][H]),I[T][H]!=0&&(b=0),A[T][H]=126,t+=x[T][H]}}for(var T=0;T<w.mode_gr;T++)for(var H=0;H<w.channels_out;H++)t>l[w.VBR_max_bitrate]&&(x[T][H]*=l[w.VBR_max_bitrate],x[T][H]/=t),A[T][H]>x[T][H]&&(A[T][H]=x[T][H]);return b},this.bitpressure_strategy=function(S,f,c,d){for(var e=0;e<S.mode_gr;e++)for(var l=0;l<S.channels_out;l++){for(var A=S.l3_side.tt[e][l],x=f[e][l],I=0,w=0;w<A.psy_lmax;w++)x[I++]*=1+.029*w*w/X1.SBMAX_l/X1.SBMAX_l;if(A.block_type==X1.SHORT_TYPE)for(var w=A.sfb_smin;w<X1.SBMAX_s;w++)x[I++]*=1+.029*w*w/X1.SBMAX_s/X1.SBMAX_s,x[I++]*=1+.029*w*w/X1.SBMAX_s/X1.SBMAX_s,x[I++]*=1+.029*w*w/X1.SBMAX_s/X1.SBMAX_s;d[e][l]=0|Math.max(c[e][l],.9*d[e][l])}},this.VBR_new_prepare=function(S,f,c,d,e,l){var A=S.internal_flags,x=1,I=0,w=0,y;if(S.free_format){A.bitrate_index=0;var _1=new MeanBits(I);y=z.ResvFrameBegin(S,_1),I=_1.bits,e[0]=y}else{A.bitrate_index=A.VBR_max_bitrate;var _1=new MeanBits(I);z.ResvFrameBegin(S,_1),I=_1.bits,get_framebits(S,e),y=e[A.VBR_max_bitrate]}for(var b=0;b<A.mode_gr;b++){C.on_pe(S,f,l[b],I,b,0),A.mode_ext==X1.MPG_MD_MS_LR&&ms_convert(A.l3_side,b);for(var t=0;t<A.channels_out;++t){var v=A.l3_side.tt[b][t];A.masking_lower=Math.pow(10,A.PSY.mask_adjust*.1),init_outer_loop(A,v),C.calc_xmin(S,c[b][t],v,d[b][t])!=0&&(x=0),w+=l[b][t]}}for(var b=0;b<A.mode_gr;b++)for(var t=0;t<A.channels_out;t++)w>y&&(l[b][t]*=y,l[b][t]/=w);return x},this.calc_target_bits=function(S,f,c,d,e,l){var A=S.internal_flags,x=A.l3_side,I,w,y,_1,b=0;A.bitrate_index=A.VBR_max_bitrate;var t=new MeanBits(b);for(l[0]=z.ResvFrameBegin(S,t),b=t.bits,A.bitrate_index=1,b=E.getframebits(S)-A.sideinfo_len*8,e[0]=b/(A.mode_gr*A.channels_out),b=S.VBR_mean_bitrate_kbps*S.framesize*1e3,A.substep_shaping&1&&(b*=1.09),b/=S.out_samplerate,b-=A.sideinfo_len*8,b/=A.mode_gr*A.channels_out,I=.93+.07*(11-S.compression_ratio)/(11-5.5),I<.9&&(I=.9),I>1&&(I=1),w=0;w<A.mode_gr;w++){var v=0;for(y=0;y<A.channels_out;y++){if(d[w][y]=int(I*b),f[w][y]>700){var T=int((f[w][y]-700)/1.4),P=x.tt[w][y];d[w][y]=int(I*b),P.block_type==X1.SHORT_TYPE&&T<b/2&&(T=b/2),T>b*3/2?T=b*3/2:T<0&&(T=0),d[w][y]+=T}d[w][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(d[w][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),v+=d[w][y]}if(v>LameInternalFlags.MAX_BITS_PER_GRANULE)for(y=0;y<A.channels_out;++y)d[w][y]*=LameInternalFlags.MAX_BITS_PER_GRANULE,d[w][y]/=v}if(A.mode_ext==X1.MPG_MD_MS_LR)for(w=0;w<A.mode_gr;w++)C.reduce_side(d[w],c[w],b*A.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(_1=0,w=0;w<A.mode_gr;w++)for(y=0;y<A.channels_out;y++)d[w][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(d[w][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),_1+=d[w][y];if(_1>l[0])for(w=0;w<A.mode_gr;w++)for(y=0;y<A.channels_out;y++)d[w][y]*=l[0],d[w][y]/=_1}}var Yt=Ft,jt=Z1,Pa=jt.assert;function zt(){var E;this.setModules=function(z){E=z},this.ResvFrameBegin=function(z,C){var Q=z.internal_flags,c1,G=Q.l3_side,K=E.getframebits(z);C.bits=(K-Q.sideinfo_len*8)/Q.mode_gr;var q=8*256*Q.mode_gr-8;z.brate>320?c1=8*int(z.brate*1e3/(z.out_samplerate/1152)/8+.5):(c1=8*1440,z.strict_ISO&&(c1=8*int(32e4/(z.out_samplerate/1152)/8+.5))),Q.ResvMax=c1-K,Q.ResvMax>q&&(Q.ResvMax=q),(Q.ResvMax<0||z.disable_reservoir)&&(Q.ResvMax=0);var e1=C.bits*Q.mode_gr+Math.min(Q.ResvSize,Q.ResvMax);return e1>c1&&(e1=c1),Pa(Q.ResvMax%8==0),Pa(Q.ResvMax>=0),G.resvDrain_pre=0,Q.pinfo!=null&&(Q.pinfo.mean_bits=C.bits/2,Q.pinfo.resvsize=Q.ResvSize),e1},this.ResvMaxBits=function(z,C,Q,c1){var G=z.internal_flags,K,q=G.ResvSize,e1=G.ResvMax;c1!=0&&(q+=C),G.substep_shaping&1&&(e1*=.9),Q.bits=C,q*10>e1*9?(K=q-e1*9/10,Q.bits+=K,G.substep_shaping|=128):(K=0,G.substep_shaping&=127,!z.disable_reservoir&&!(G.substep_shaping&1)&&(Q.bits-=.1*C));var h1=q<G.ResvMax*6/10?q:G.ResvMax*6/10;return h1-=K,h1<0&&(h1=0),h1},this.ResvAdjust=function(z,C){z.ResvSize-=C.part2_3_length+C.part2_length},this.ResvFrameEnd=function(z,C){var Q,c1=z.l3_side;z.ResvSize+=C*z.mode_gr;var G=0;c1.resvDrain_post=0,c1.resvDrain_pre=0,(Q=z.ResvSize%8)!=0&&(G+=Q),Q=z.ResvSize-G-z.ResvMax,Q>0&&(G+=Q);{var K=Math.min(c1.main_data_begin*8,G)/8;c1.resvDrain_pre+=8*K,G-=8*K,z.ResvSize-=8*K,c1.main_data_begin-=K}c1.resvDrain_post+=G,z.ResvSize-=G}}var Ut=zt;function Zt(){var E="http://www.mp3dev.org/",z=3,C=98,Q=4,c1=0,G=93;this.getLameVersion=function(){return z+"."+C+"."+Q},this.getLameShortVersion=function(){return z+"."+C+"."+Q},this.getLameVeryShortVersion=function(){return"LAME"+z+"."+C+"r"},this.getPsyVersion=function(){return c1+"."+G},this.getLameUrl=function(){return E},this.getLameOsBitness=function(){return"32bits"}}var Kt=Zt,Xe=Z1,Gt=Xe.System,I0=Xe.VbrMode,Oa=Xe.ShortBlock,Wt=Xe.Arrays,n0=Xe.new_byte,Qt=Xe.assert;Ge.NUMTOCENTRIES=100,Ge.MAXFRAMESIZE=2880;function Ge(){var E,z,C;this.setModules=function(b,t,v){E=b,z=t,C=v};var Q=1,c1=2,G=4,K=8,q=Ge.NUMTOCENTRIES,e1=Ge.MAXFRAMESIZE,h1=q+4+4+4+4+4,g=h1+9+1+1+8+1+1+3+1+1+2+4+2+2,m=128,V=64,s1=32,U=null,r1="Xing",Z="Info",S=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function f(b,t){if(b.nVbrNumFrames++,b.sum+=t,b.seen++,!(b.seen<b.want)&&(b.pos<b.size&&(b.bag[b.pos]=b.sum,b.pos++,b.seen=0),b.pos==b.size)){for(var v=1;v<b.size;v+=2)b.bag[v/2]=b.bag[v];b.want*=2,b.pos/=2}}function c(b,t){if(!(b.pos<=0))for(var v=1;v<q;++v){var T=v/q,P,H,Y=0|Math.floor(T*b.pos);Y>b.pos-1&&(Y=b.pos-1),P=b.bag[Y],H=b.sum;var B=0|256*P/H;B>255&&(B=255),t[v]=255&B}}this.addVbrFrame=function(b){var t=b.internal_flags,v=Tables.bitrate_table[b.version][t.bitrate_index];Qt(t.VBR_seek_table.bag!=null),f(t.VBR_seek_table,v)};function d(b,t){var v=b[t+0]&255;return v<<=8,v|=b[t+1]&255,v<<=8,v|=b[t+2]&255,v<<=8,v|=b[t+3]&255,v}function e(b,t,v){b[t+0]=255&(v>>24&255),b[t+1]=255&(v>>16&255),b[t+2]=255&(v>>8&255),b[t+3]=255&(v&255)}function l(b,t,v){b[t+0]=255&(v>>8&255),b[t+1]=255&(v&255)}function A(b,t){return new String(b,t,r1.length(),U).equals(r1)||new String(b,t,Z.length(),U).equals(Z)}function x(b,t,v){return 255&(b<<t|v&~(-1<<t))}function I(b,t){var v=b.internal_flags;t[0]=x(t[0],8,255),t[1]=x(t[1],3,7),t[1]=x(t[1],1,b.out_samplerate<16e3?0:1),t[1]=x(t[1],1,b.version),t[1]=x(t[1],2,1),t[1]=x(t[1],1,b.error_protection?0:1),t[2]=x(t[2],4,v.bitrate_index),t[2]=x(t[2],2,v.samplerate_index),t[2]=x(t[2],1,0),t[2]=x(t[2],1,b.extension),t[3]=x(t[3],2,b.mode.ordinal()),t[3]=x(t[3],2,v.mode_ext),t[3]=x(t[3],1,b.copyright),t[3]=x(t[3],1,b.original),t[3]=x(t[3],2,b.emphasis),t[0]=255;var T=255&(t[1]&241),P;b.version==1?P=m:b.out_samplerate<16e3?P=s1:P=V,b.VBR==I0.vbr_off&&(P=b.brate);var H;b.free_format?H=0:H=255&16*E.BitrateIndex(P,b.version,b.out_samplerate),b.version==1?(t[1]=255&(T|10),T=255&(t[2]&13),t[2]=255&(H|T)):(t[1]=255&(T|2),T=255&(t[2]&13),t[2]=255&(H|T))}this.getVbrTag=function(b){var t=new VBRTagData,v=0;t.flags=0;var T=b[v+1]>>3&1,P=b[v+2]>>2&3,H=b[v+3]>>6&3,Y=b[v+2]>>4&15;if(Y=Tables.bitrate_table[T][Y],b[v+1]>>4==14?t.samprate=Tables.samplerate_table[2][P]:t.samprate=Tables.samplerate_table[T][P],T!=0?H!=3?v+=36:v+=21:H!=3?v+=21:v+=13,!A(b,v))return null;v+=4,t.hId=T;var B=t.flags=d(b,v);if(v+=4,B&Q&&(t.frames=d(b,v),v+=4),B&c1&&(t.bytes=d(b,v),v+=4),B&G){if(t.toc!=null)for(var n=0;n<q;n++)t.toc[n]=b[v+n];v+=q}t.vbrScale=-1,B&K&&(t.vbrScale=d(b,v),v+=4),t.headersize=(T+1)*72e3*Y/t.samprate,v+=21;var s=b[v+0]<<4;s+=b[v+1]>>4;var a=(b[v+1]&15)<<8;return a+=b[v+2]&255,(s<0||s>3e3)&&(s=-1),(a<0||a>3e3)&&(a=-1),t.encDelay=s,t.encPadding=a,t},this.InitVbrTag=function(b){var t=b.internal_flags,v;b.version==1?v=m:b.out_samplerate<16e3?v=s1:v=V,b.VBR==I0.vbr_off&&(v=b.brate);var T=(b.version+1)*72e3*v/b.out_samplerate,P=t.sideinfo_len+g;if(t.VBR_seek_table.TotalFrameSize=T,T<P||T>e1){b.bWriteVbrTag=!1;return}t.VBR_seek_table.nVbrNumFrames=0,t.VBR_seek_table.nBytesWritten=0,t.VBR_seek_table.sum=0,t.VBR_seek_table.seen=0,t.VBR_seek_table.want=1,t.VBR_seek_table.pos=0,t.VBR_seek_table.bag==null&&(t.VBR_seek_table.bag=new int[400],t.VBR_seek_table.size=400);var H=n0(e1);I(b,H);for(var Y=t.VBR_seek_table.TotalFrameSize,B=0;B<Y;++B)z.add_dummy_byte(b,H[B]&255,1)};function w(b,t){var v=t^b;return t=t>>8^S[v&255],t}this.updateMusicCRC=function(b,t,v,T){for(var P=0;P<T;++P)b[0]=w(t[v+P],b[0])};function y(b,t,v,T,P){var H=b.internal_flags,Y=0,B=b.encoder_delay,n=b.encoder_padding,s=100-10*b.VBR_q-b.quality,a=C.getLameVeryShortVersion(),_,h=0,D,J=[1,5,3,2,4,0,3],M=0|(b.lowpassfreq/100+.5>255?255:b.lowpassfreq/100+.5),X=0,n1=0,u1=0,d1=b.internal_flags.noise_shaping,A1=0,g1=0,S1=0,k1=0,F1=0,ce=(b.exp_nspsytune&1)!=0,r=(b.exp_nspsytune&2)!=0,i=!1,v1=!1,B1=b.internal_flags.nogap_total,O1=b.internal_flags.nogap_current,y1=b.ATHtype,E1=0,M1;switch(b.VBR){case vbr_abr:M1=b.VBR_mean_bitrate_kbps;break;case vbr_off:M1=b.brate;break;default:M1=b.VBR_min_bitrate_kbps}switch(b.VBR.ordinal()<J.length?_=J[b.VBR.ordinal()]:_=0,D=16*h+_,H.findReplayGain&&(H.RadioGain>510&&(H.RadioGain=510),H.RadioGain<-510&&(H.RadioGain=-510),n1=8192,n1|=3072,H.RadioGain>=0?n1|=H.RadioGain:(n1|=512,n1|=-H.RadioGain)),H.findPeakSample&&(X=Math.abs(0|H.PeakSample/32767*Math.pow(2,23)+.5)),B1!=-1&&(O1>0&&(v1=!0),O1<B1-1&&(i=!0)),E1=y1+((ce?1:0)<<4)+((r?1:0)<<5)+((i?1:0)<<6)+((v1?1:0)<<7),s<0&&(s=0),b.mode){case MONO:A1=0;break;case STEREO:A1=1;break;case DUAL_CHANNEL:A1=2;break;case JOINT_STEREO:b.force_ms?A1=4:A1=3;break;case NOT_SET:default:A1=7;break}b.in_samplerate<=32e3?S1=0:b.in_samplerate==48e3?S1=2:b.in_samplerate>48e3?S1=3:S1=1,(b.short_blocks==Oa.short_block_forced||b.short_blocks==Oa.short_block_dispensed||b.lowpassfreq==-1&&b.highpassfreq==-1||b.scale_left<b.scale_right||b.scale_left>b.scale_right||b.disable_reservoir&&b.brate<320||b.noATH||b.ATHonly||y1==0||b.in_samplerate<=32e3)&&(g1=1),k1=d1+(A1<<2)+(g1<<5)+(S1<<6),F1=H.nMusicCRC,e(v,T+Y,s),Y+=4;for(var I1=0;I1<9;I1++)v[T+Y+I1]=255&a.charAt(I1);Y+=9,v[T+Y]=255&D,Y++,v[T+Y]=255&M,Y++,e(v,T+Y,X),Y+=4,l(v,T+Y,n1),Y+=2,l(v,T+Y,u1),Y+=2,v[T+Y]=255&E1,Y++,M1>=255?v[T+Y]=255:v[T+Y]=255&M1,Y++,v[T+Y]=255&B>>4,v[T+Y+1]=255&(B<<4)+(n>>8),v[T+Y+2]=255&n,Y+=3,v[T+Y]=255&k1,Y++,v[T+Y++]=0,l(v,T+Y,b.preset),Y+=2,e(v,T+Y,t),Y+=4,l(v,T+Y,F1),Y+=2;for(var H1=0;H1<Y;H1++)P=w(v[T+H1],P);return l(v,T+Y,P),Y+=2,Y}function _1(b){b.seek(0);var t=n0(10);b.readFully(t);var v;return new String(t,"ISO-8859-1").startsWith("ID3")?v=0:v=((t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127)+t.length,v}this.getLameTagFrame=function(b,t){var v=b.internal_flags;if(!b.bWriteVbrTag||v.Class_ID!=Lame.LAME_ID||v.VBR_seek_table.pos<=0)return 0;if(t.length<v.VBR_seek_table.TotalFrameSize)return v.VBR_seek_table.TotalFrameSize;Wt.fill(t,0,v.VBR_seek_table.TotalFrameSize,0),I(b,t);var T=n0(q);if(b.free_format)for(var P=1;P<q;++P)T[P]=255&255*P/100;else c(v.VBR_seek_table,T);var H=v.sideinfo_len;b.error_protection&&(H-=2),b.VBR==I0.vbr_off?(t[H++]=255&Z.charAt(0),t[H++]=255&Z.charAt(1),t[H++]=255&Z.charAt(2),t[H++]=255&Z.charAt(3)):(t[H++]=255&r1.charAt(0),t[H++]=255&r1.charAt(1),t[H++]=255&r1.charAt(2),t[H++]=255&r1.charAt(3)),e(t,H,Q+c1+G+K),H+=4,e(t,H,v.VBR_seek_table.nVbrNumFrames),H+=4;var Y=v.VBR_seek_table.nBytesWritten+v.VBR_seek_table.TotalFrameSize;e(t,H,0|Y),H+=4,Gt.arraycopy(T,0,t,H,T.length),H+=T.length,b.error_protection&&z.CRC_writeheader(v,t);for(var B=0,P=0;P<H;P++)B=w(t[P],B);return H+=y(b,Y,t,H,B),v.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(b,t){var v=b.internal_flags;if(v.VBR_seek_table.pos<=0||(t.seek(t.length()),t.length()==0))return-1;var T=_1(t);t.seek(T);var P=n0(e1),H=getLameTagFrame(b,P);return H>P.length?-1:(H<1||t.write(P,0,H),0)}}var Jt=Ge,Ia=Z1,Na=Ia.new_byte,$t=Ia.assert,e2=H0(),a2=Pt,t2=ma,r2=Aa(),s2=Yt,n2=wa(),_2=Ut,i2=Ue,o2=x0();te();var l2=Kt,f2=Jt;function u2(){this.setModules=function(E,z){}}function c2(){this.setModules=function(E,z,C){}}function h2(){}function m2(){this.setModules=function(E,z){}}function b2(E,z,C){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),E=1,z=44100,C=128);var Q=new e2,c1=new u2,G=new t2,K=new o2,q=new a2,e1=new r2,h1=new s2,g=new f2,m=new l2,V=new m2,s1=new _2,U=new n2,r1=new c2,Z=new h2;Q.setModules(G,K,q,e1,h1,g,m,V,Z),K.setModules(G,Z,m,g),V.setModules(K,m),q.setModules(Q),h1.setModules(K,s1,e1,U),e1.setModules(U,s1,Q.enc.psy),s1.setModules(K),U.setModules(e1),g.setModules(Q,K,m),c1.setModules(r1,Z),r1.setModules(m,V,q);var S=Q.lame_init();S.num_channels=E,S.in_samplerate=z,S.brate=C,S.mode=i2.STEREO,S.quality=3,S.bWriteVbrTag=!1,S.disable_reservoir=!0,S.write_id3tag_automatic=!1,Q.lame_init_params(S);var f=1152,c=0|1.25*f+7200,d=Na(c);this.encodeBuffer=function(e,l){E==1&&(l=e),$t(e.length==l.length),e.length>f&&(f=e.length,c=0|1.25*f+7200,d=Na(c));var A=Q.lame_encode_buffer(S,e,l,e.length,d,0,c);return new Int8Array(d.subarray(0,A))},this.flush=function(){var e=Q.lame_encode_flush(S,d,0,c);return new Int8Array(d.subarray(0,e))}}function ge(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function _0(E){return E.charCodeAt(0)<<24|E.charCodeAt(1)<<16|E.charCodeAt(2)<<8|E.charCodeAt(3)}ge.RIFF=_0("RIFF"),ge.WAVE=_0("WAVE"),ge.fmt_=_0("fmt "),ge.data=_0("data"),ge.readHeader=function(E){var z=new ge,C=E.getUint32(0,!1);if(ge.RIFF==C&&(E.getUint32(4,!0),ge.WAVE==E.getUint32(8,!1)&&ge.fmt_==E.getUint32(12,!1))){var Q=E.getUint32(16,!0),c1=20;switch(Q){case 16:case 18:z.channels=E.getUint16(c1+2,!0),z.sampleRate=E.getUint32(c1+4,!0);break;default:throw"extended fmt chunk not implemented"}c1+=Q;for(var G=ge.data,K=0;G!=C&&(C=E.getUint32(c1,!1),K=E.getUint32(c1+4,!0),G!=C);)c1+=K+8;return z.dataLen=K,z.dataOffset=c1+8,z}};var p2=b0.Mp3Encoder=b2,v2=b0.WavHeader=ge;export{p2 as Mp3Encoder,v2 as WavHeader,b0 as default};
